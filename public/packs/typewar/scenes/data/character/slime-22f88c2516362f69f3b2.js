!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=52)}([function(t,e,i){(function(n){var o,s;!function(r){var a="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n;o=[i(10),i(9),e],void 0!==(s=function(t,e,i){a.Backbone=r(a,i,t,e)}.apply(e,o))&&(t.exports=s)}(function(t,e,i,n){var o=t.Backbone,s=Array.prototype.slice;e.VERSION="1.3.3",e.$=n,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var r=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,o){return i[e](this[n],l(t,this),o)};case 4:return function(t,o,s){return i[e](this[n],l(t,this),o,s)};default:return function(){var t=s.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},a=function(t,e,n){i.each(e,function(e,o){i[o]&&(t.prototype[o]=r(e,o,n))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?c(t):i.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},h=e.Events={},u=/\s+/,m=function(t,e,n,o,s){var r,a=0;if(n&&"object"==typeof n){void 0!==o&&"context"in s&&void 0===s.context&&(s.context=o);for(r=i.keys(n);a<r.length;a++)e=m(t,e,r[a],n[r[a]],s)}else if(n&&u.test(n))for(r=n.split(u);a<r.length;a++)e=t(e,r[a],o,s);else e=t(e,n,o,s);return e};h.on=function(t,e,i){return p(this,t,e,i)};var p=function(t,e,i,n,o){if(t._events=m(f,t._events||{},e,i,{context:n,ctx:t,listening:o}),o){(t._listeners||(t._listeners={}))[o.id]=o}return t};h.listenTo=function(t,e,n){if(!t)return this;var o=t._listenId||(t._listenId=i.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),r=s[o];if(!r){var a=this._listenId||(this._listenId=i.uniqueId("l"));r=s[o]={obj:t,objId:o,id:a,listeningTo:s,count:0}}return p(t,e,n,this,r),this};var f=function(t,e,i,n){if(i){var o=t[e]||(t[e]=[]),s=n.context,r=n.ctx,a=n.listening;a&&a.count++,o.push({callback:i,context:s,ctx:s||r,listening:a})}return t};h.off=function(t,e,i){return this._events?(this._events=m(_,this._events,t,e,{context:i,listeners:this._listeners}),this):this},h.stopListening=function(t,e,n){var o=this._listeningTo;if(!o)return this;for(var s=t?[t._listenId]:i.keys(o),r=0;r<s.length;r++){var a=o[s[r]];if(!a)break;a.obj.off(e,n,this)}return this};var _=function(t,e,n,o){if(t){var s,r=0,a=o.context,l=o.listeners;if(e||n||a){for(var c=e?[e]:i.keys(t);r<c.length;r++){e=c[r];var h=t[e];if(!h)break;for(var u=[],m=0;m<h.length;m++){var p=h[m];n&&n!==p.callback&&n!==p.callback._callback||a&&a!==p.context?u.push(p):(s=p.listening)&&0==--s.count&&(delete l[s.id],delete s.listeningTo[s.objId])}u.length?t[e]=u:delete t[e]}return t}for(var f=i.keys(l);r<f.length;r++)s=l[f[r]],delete l[s.id],delete s.listeningTo[s.objId]}};h.once=function(t,e,n){var o=m(y,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(o,e,n)},h.listenToOnce=function(t,e,n){var o=m(y,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,o)};var y=function(t,e,n,o){if(n){var s=t[e]=i.once(function(){o(e,s),n.apply(this,arguments)});s._callback=n}return t};h.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return m(d,this._events,t,void 0,i),this};var d=function(t,e,i,n){if(t){var o=t[e],s=t.all;o&&s&&(s=s.slice()),o&&x(o,n),s&&x(s,[e].concat(n))}return t},x=function(t,e){var i,n=-1,o=t.length,s=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<o;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,r);return;case 3:for(;++n<o;)(i=t[n]).callback.call(i.ctx,s,r,a);return;default:for(;++n<o;)(i=t[n]).callback.apply(i.ctx,e);return}};h.bind=h.on,h.unbind=h.off,i.extend(e,h);var v=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var o=i.result(this,"defaults");n=i.defaults(i.extend({},o,n),o),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(v.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var o;if("object"==typeof t?(o=t,n=e):(o={})[t]=e,n||(n={}),!this._validate(o,n))return!1;var s=n.unset,r=n.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var c=this.attributes,h=this.changed,u=this._previousAttributes;for(var m in o)e=o[m],i.isEqual(c[m],e)||a.push(m),i.isEqual(u[m],e)?delete h[m]:h[m]=e,s?delete c[m]:c[m]=e;if(this.idAttribute in o&&(this.id=this.get(this.idAttribute)),!r){a.length&&(this._pending=n);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,c[a[p]],n)}if(l)return this;if(!r)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var o in t){var s=t[o];i.isEqual(e[o],s)||(n[o]=s)}return!!i.size(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var o=t.parse?e.parse(i,t):i;if(!e.set(o,t))return!1;n&&n.call(t.context,e,i,t),e.trigger("sync",e,i,t)},V(this,t),this.sync("read",this,t)},save:function(t,e,n){var o;null==t||"object"==typeof t?(o=t,n=e):(o={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var s=n.wait;if(o&&!s){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;var r=this,a=n.success,l=this.attributes;n.success=function(t){r.attributes=l;var e=n.parse?r.parse(t,n):t;if(s&&(e=i.extend({},o,e)),e&&!r.set(e,n))return!1;a&&a.call(n.context,r,t,n),r.trigger("sync",r,t,n)},V(this,n),o&&s&&(this.attributes=i.extend({},l,o));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=o);var h=this.sync(c,this,n);return this.attributes=l,h},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,o=t.wait,s=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){o&&s(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var r=!1;return this.isNew()?i.defer(t.success):(V(this,t),r=this.sync("delete",this,t)),o||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||P();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}}),a(v,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var b=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},w=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,o=Array(t.length-i),s=e.length;for(n=0;n<o.length;n++)o[n]=t[n+i];for(n=0;n<s;n++)t[n+i]=e[n];for(n=0;n<o.length;n++)t[n+s+i]=o[n]};i.extend(b.prototype,h,{model:v,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,C))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var o=this._removeModels(t,e);return!e.silent&&o.length&&(e.changes={added:[],merged:[],removed:o},this.trigger("update",this,e)),n?o[0]:o},set:function(t,e){if(null!=t){e=i.extend({},g,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var o=e.at;null!=o&&(o=+o),o>this.length&&(o=this.length),o<0&&(o+=this.length+1);var s,r,a=[],l=[],c=[],h=[],u={},m=e.add,p=e.merge,f=e.remove,_=!1,y=this.comparator&&null==o&&!1!==e.sort,d=i.isString(this.comparator)?this.comparator:null;for(r=0;r<t.length;r++){s=t[r];var x=this.get(s);if(x){if(p&&s!==x){var v=this._isModel(s)?s.attributes:s;e.parse&&(v=x.parse(v,e)),x.set(v,e),c.push(x),y&&!_&&(_=x.hasChanged(d))}u[x.cid]||(u[x.cid]=!0,a.push(x)),t[r]=x}else m&&(s=t[r]=this._prepareModel(s,e))&&(l.push(s),this._addReference(s,e),u[s.cid]=!0,a.push(s))}if(f){for(r=0;r<this.length;r++)s=this.models[r],u[s.cid]||h.push(s);h.length&&this._removeModels(h,e)}var b=!1,C=!y&&m&&f;if(a.length&&C?(b=this.length!==a.length||i.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,w(this.models,a,0),this.length=this.models.length):l.length&&(y&&(_=!0),w(this.models,l,null==o?this.length:o),this.length=this.models.length),_&&this.sort({silent:!0}),!e.silent){for(r=0;r<l.length;r++)null!=o&&(e.index=o+r),s=l[r],s.trigger("add",s,this,e);(_||b)&&this.trigger("sort",this,e),(l.length||h.length||c.length)&&(e.changes={added:l,removed:h,merged:c},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var o=t.reset?"reset":"set";n[o](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},V(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(!(t=this._prepareModel(t,e)))return!1;n||this.add(t,e);var o=this,s=e.success;return e.success=function(t,e,i){n&&o.add(t,i),s&&s.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var o=this.get(t[n]);if(o){var s=this.indexOf(o);this.models.splice(s,1),this.length--,delete this._byId[o.cid];var r=this.modelId(o.attributes);null!=r&&delete this._byId[r],e.silent||(e.index=s,o.trigger("remove",o,this,e)),i.push(o),this._removeReference(o,e)}}return i},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var o=this.modelId(e.previousAttributes()),s=this.modelId(e.attributes);o!==s&&(null!=o&&delete this._byId[o],null!=s&&(this._byId[s]=e))}}this.trigger.apply(this,arguments)}}),a(b,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var S=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,A)),this._ensureElement(),this.initialize.apply(this,arguments)},A=["model","collection","el","id","attributes","className","tagName","events"];i.extend(S.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var o=e.match(/^(\S+)\s*(.*)$/);this.delegate(o[1],o[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,o){var s=D[t];i.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:s,dataType:"json"};if(o.url||(r.url=i.result(n,"url")||P()),null!=o.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),o.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",o.emulateJSON&&(r.data._method=s);var a=o.beforeSend;o.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",s),a)return a.apply(this,arguments)}}"GET"===r.type||o.emulateJSON||(r.processData=!1);var l=o.error;o.error=function(t,e,i){o.textStatus=e,o.errorThrown=i,l&&l.call(o.context,t,e,i)};var c=o.xhr=e.ajax(i.extend(r,o));return n.trigger("request",n,c,o),c};var D={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var B=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};i.extend(B.prototype,h,{initialize:function(){},route:function(t,n,o){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var s=this;return e.history.route(t,function(i){var r=s._extractParameters(t,i);!1!==s.execute(o,r,n)&&(s.trigger.apply(s,["route:"+n].concat(r)),s.trigger("route",n,r),e.history.trigger("route",s,n,r))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(/[\-{}\[\]+?.,\\\^$|#\s]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,function(t,e){return e?t:"([^/?]+)"}).replace(/\*\w+/g,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var M=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)};M.started=!1,i.extend(M.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(/^[#\/]|\s+$/g,"")},start:function(t){if(M.started)throw new Error("Backbone.history has already been started");if(M.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(/^\/+|\/+$/g,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,o=n.insertBefore(this.iframe,n.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var s=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!M.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(/#.*$/,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new M;var I=function(t,e){var n,o=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,e),n.prototype=i.create(o.prototype,t),n.prototype.constructor=n,n.__super__=o.prototype,n};v.extend=b.extend=B.extend=S.extend=M.extend=I;var P=function(){throw new Error('A "url" property or function must be specified')},V=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e})}).call(e,i(8))},function(t,e,i){!function(e,i){t.exports=i()}(0,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(){var t=d();return t.compile=function(e,i){return h.compile(e,i,t)},t.precompile=function(e,i){return h.precompile(e,i,t)},t.AST=l.default,t.Compiler=h.Compiler,t.JavaScriptCompiler=m.default,t.Parser=c.parser,t.parse=c.parse,t}var o=i(1).default;e.__esModule=!0;var s=i(2),r=o(s),a=i(24),l=o(a),c=i(25),h=i(30),u=i(31),m=o(u),p=i(28),f=o(p),_=i(23),y=o(_),d=r.default.create,x=n();x.create=n,y.default(x),x.Visitor=f.default,x.default=x,e.default=x,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,i){"use strict";function n(){var t=new a.HandlebarsEnvironment;return p.extend(t,a),t.SafeString=c.default,t.Exception=u.default,t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=_,t.template=function(e){return _.template(e,t)},t}var o=i(3).default,s=i(1).default;e.__esModule=!0;var r=i(4),a=o(r),l=i(21),c=s(l),h=i(6),u=s(h),m=i(5),p=o(m),f=i(22),_=o(f),y=i(23),d=s(y),x=n();x.create=n,d.default(x),x.default=x,e.default=x,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},e.__esModule=!0},function(t,e,i){"use strict";function n(t,e,i){this.helpers=t||{},this.partials=e||{},this.decorators=i||{},l.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}var o=i(1).default;e.__esModule=!0,e.HandlebarsEnvironment=n;var s=i(5),r=i(6),a=o(r),l=i(10),c=i(18),h=i(20),u=o(h);e.VERSION="4.0.5";e.COMPILER_REVISION=7;var m={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=m;var p="[object Object]";n.prototype={constructor:n,logger:u.default,log:u.default.log,registerHelper:function(t,e){if(s.toString.call(t)===p){if(e)throw new a.default("Arg not supported with multiple helpers");s.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(s.toString.call(t)===p)s.extend(this.partials,t);else{if(void 0===e)throw new a.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(s.toString.call(t)===p){if(e)throw new a.default("Arg not supported with multiple decorators");s.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var f=u.default.log;e.log=f,e.createFrame=s.createFrame,e.logger=u.default},function(t,e){"use strict";function i(t){return h[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&(t[i]=arguments[e][i]);return t}function o(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function s(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return m.test(t)?t.replace(u,i):t}function r(t){return!t&&0!==t||!(!_(t)||0!==t.length)}function a(t){var e=n({},t);return e._parent=t,e}function l(t,e){return t.path=e,t}function c(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=n,e.indexOf=o,e.escapeExpression=s,e.isEmpty=r,e.createFrame=a,e.blockParams=l,e.appendContextPath=c;var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},u=/[&<>"'`=]/g,m=/[&<>"'`=]/,p=Object.prototype.toString;e.toString=p;var f=function(t){return"function"==typeof t};f(/x/)&&(e.isFunction=f=function(t){return"function"==typeof t&&"[object Function]"===p.call(t)}),e.isFunction=f;var _=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===p.call(t)};e.isArray=_},function(t,e,i){"use strict";function n(t,e){var i=e&&e.loc,r=void 0,a=void 0;i&&(r=i.start.line,a=i.start.column,t+=" - "+r+":"+a);for(var l=Error.prototype.constructor.call(this,t),c=0;c<s.length;c++)this[s[c]]=l[s[c]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{i&&(this.lineNumber=r,o?Object.defineProperty(this,"column",{value:a}):this.column=a)}catch(t){}}var o=i(7).default;e.__esModule=!0;var s=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,t.exports=e.default},function(t,e,i){t.exports={default:i(8),__esModule:!0}},function(t,e,i){var n=i(9);t.exports=function(t,e,i){return n.setDesc(t,e,i)}},function(t,e){var i=Object;t.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},function(t,e,i){"use strict";function n(t){r.default(t),l.default(t),h.default(t),m.default(t),f.default(t),y.default(t),x.default(t)}var o=i(1).default;e.__esModule=!0,e.registerDefaultHelpers=n;var s=i(11),r=o(s),a=i(12),l=o(a),c=i(13),h=o(c),u=i(14),m=o(u),p=i(15),f=o(p),_=i(16),y=o(_),d=i(17),x=o(d)},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,i){var o=i.inverse,s=i.fn;if(!0===e)return s(this);if(!1===e||null==e)return o(this);if(n.isArray(e))return e.length>0?(i.ids&&(i.ids=[i.name]),t.helpers.each(e,i)):o(this);if(i.data&&i.ids){var r=n.createFrame(i.data);r.contextPath=n.appendContextPath(i.data.contextPath,i.name),i={data:r}}return s(e,i)})},t.exports=e.default},function(t,e,i){"use strict";var n=i(1).default;e.__esModule=!0;var o=i(5),s=i(6),r=n(s);e.default=function(t){t.registerHelper("each",function(t,e){function i(e,i,s){c&&(c.key=e,c.index=i,c.first=0===i,c.last=!!s,h&&(c.contextPath=h+e)),l+=n(t[e],{data:c,blockParams:o.blockParams([t[e],e],[h+e,null])})}if(!e)throw new r.default("Must pass iterator to #each");var n=e.fn,s=e.inverse,a=0,l="",c=void 0,h=void 0;if(e.data&&e.ids&&(h=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),o.isFunction(t)&&(t=t.call(this)),e.data&&(c=o.createFrame(e.data)),t&&"object"==typeof t)if(o.isArray(t))for(var u=t.length;a<u;a++)a in t&&i(a,a,a===t.length-1);else{var m=void 0;for(var p in t)t.hasOwnProperty(p)&&(void 0!==m&&i(m,a-1),m=p,a++);void 0!==m&&i(m,a-1,!0)}return 0===a&&(l=s(this)),l})},t.exports=e.default},function(t,e,i){"use strict";var n=i(1).default;e.__esModule=!0;var o=i(6),s=n(o);e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5);e.default=function(t){t.registerHelper("if",function(t,e){return n.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||n.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers.if.call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],i=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var o=1;null!=i.hash.level?o=i.hash.level:i.data&&null!=i.data.level&&(o=i.data.level),e[0]=o,t.log.apply(t,e)})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5);e.default=function(t){t.registerHelper("with",function(t,e){n.isFunction(t)&&(t=t.call(this));var i=e.fn;if(n.isEmpty(t))return e.inverse(this);var o=e.data;return e.data&&e.ids&&(o=n.createFrame(e.data),o.contextPath=n.appendContextPath(e.data.contextPath,e.ids[0])),i(t,{data:o,blockParams:n.blockParams([t],[o&&o.contextPath])})})},t.exports=e.default},function(t,e,i){"use strict";function n(t){r.default(t)}var o=i(1).default;e.__esModule=!0,e.registerDefaultDecorators=n;var s=i(19),r=o(s)},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5);e.default=function(t){t.registerDecorator("inline",function(t,e,i,o){var s=t;return e.partials||(e.partials={},s=function(o,s){var r=i.partials;i.partials=n.extend({},r,e.partials);var a=t(o,s);return i.partials=r,a}),e.partials[o.args[0]]=o.fn,s})},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(o.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=o.lookupLevel(t),"undefined"!=typeof console&&o.lookupLevel(o.level)<=t){var e=o.methodMap[t];console[e]||(e="log");for(var i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];console[e].apply(console,n)}}};e.default=o,t.exports=e.default},function(t,e){"use strict";function i(t){this.string=t}e.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},e.default=i,t.exports=e.default},function(t,e,i){"use strict";function n(t){var e=t&&t[0]||1,i=d.COMPILER_REVISION;if(e!==i){if(e<i){var n=d.REVISION_CHANGES[i],o=d.REVISION_CHANGES[e];throw new y.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new y.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function o(t,e){function i(i,n,o){o.hash&&(n=f.extend({},n,o.hash),o.ids&&(o.ids[0]=!0)),i=e.VM.resolvePartial.call(this,i,n,o);var s=e.VM.invokePartial.call(this,i,n,o);if(null==s&&e.compile&&(o.partials[o.name]=e.compile(i,t.compilerOptions,e),s=o.partials[o.name](n,o)),null!=s){if(o.indent){for(var r=s.split("\n"),a=0,l=r.length;a<l&&(r[a]||a+1!==l);a++)r[a]=o.indent+r[a];s=r.join("\n")}return s}throw new y.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")}function n(e){function i(e){return""+t.main(o,e,o.helpers,o.partials,r,l,a)}var s=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=s.data;n._setup(s),!s.partial&&t.useData&&(r=c(e,r));var a=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(a=s.depths?e!=s.depths[0]?[e].concat(s.depths):s.depths:[e]),(i=h(t.main,i,o,s.depths||[],r,l))(e,s)}if(!e)throw new y.default("No environment passed to template");if(!t||!t.main)throw new y.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var o={strict:function(t,e){if(!(e in t))throw new y.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var i=t.length,n=0;n<i;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:f.escapeExpression,invokePartial:i,fn:function(e){var i=t[e];return i.decorator=t[e+"_d"],i},programs:[],program:function(t,e,i,n,o){var r=this.programs[t],a=this.fn(t);return e||o||n||i?r=s(this,t,a,e,i,n,o):r||(r=this.programs[t]=s(this,t,a)),r},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i=f.extend({},e,t)),i},noop:e.VM.noop,compilerInfo:t.compiler};return n.isTop=!0,n._setup=function(i){i.partial?(o.helpers=i.helpers,o.partials=i.partials,o.decorators=i.decorators):(o.helpers=o.merge(i.helpers,e.helpers),t.usePartial&&(o.partials=o.merge(i.partials,e.partials)),(t.usePartial||t.useDecorators)&&(o.decorators=o.merge(i.decorators,e.decorators)))},n._child=function(e,i,n,r){if(t.useBlockParams&&!n)throw new y.default("must pass block params");if(t.useDepths&&!r)throw new y.default("must pass parent depths");return s(o,e,t[e],i,0,n,r)},n}function s(t,e,i,n,o,s,r){function a(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=r;return r&&e!=r[0]&&(a=[e].concat(r)),i(t,e,t.helpers,t.partials,o.data||n,s&&[o.blockParams].concat(s),a)}return a=h(i,a,t,r,n,s),a.program=e,a.depth=r?r.length:0,a.blockParams=o||0,a}function r(t,e,i){if(t)t.call||i.name||(i.name=t,t=i.partials[t]);else if("@partial-block"===i.name){for(var n=i.data;n["partial-block"]===l;)n=n._parent;t=n["partial-block"],n["partial-block"]=l}else t=i.partials[i.name];return t}function a(t,e,i){i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var n=void 0;if(i.fn&&i.fn!==l&&(i.data=d.createFrame(i.data),n=i.data["partial-block"]=i.fn,n.partials&&(i.partials=f.extend({},i.partials,n.partials))),void 0===t&&n&&(t=n),void 0===t)throw new y.default("The partial "+i.name+" could not be found");if(t instanceof Function)return t(e,i)}function l(){return""}function c(t,e){return e&&"root"in e||(e=e?d.createFrame(e):{},e.root=t),e}function h(t,e,i,n,o,s){if(t.decorator){var r={};e=t.decorator(e,r,i,n&&n[0],o,s,n),f.extend(e,r)}return e}var u=i(3).default,m=i(1).default;e.__esModule=!0,e.checkRevision=n,e.template=o,e.wrapProgram=s,e.resolvePartial=r,e.invokePartial=a,e.noop=l;var p=i(5),f=u(p),_=i(6),y=m(_),d=i(4)},function(t,e){(function(i){"use strict";e.__esModule=!0,e.default=function(t){var e=void 0!==i?i:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";e.__esModule=!0;var i={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!i.helpers.scopedId(t)&&!t.depth}}};e.default=i,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){return"Program"===t.type?t:(a.default.yy=p,p.locInfo=function(t){return new p.SourceLocation(e&&e.srcName,t)},new c.default(e).accept(a.default.parse(t)))}var o=i(1).default,s=i(3).default;e.__esModule=!0,e.parse=n;var r=i(26),a=o(r),l=i(27),c=o(l),h=i(29),u=s(h),m=i(5);e.parser=a.default;var p={};m.extend(p,u)},function(t,e){"use strict";var i=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,i,n,o,s,r){var a=s.length-1;switch(o){case 1:return s[a-1];case 2:this.$=n.prepareProgram(s[a]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=s[a];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(s[a]),strip:n.stripFlags(s[a],s[a]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:s[a],value:s[a],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(s[a-2],s[a-1],s[a],this._$);break;case 12:this.$={path:s[a-3],params:s[a-2],hash:s[a-1]};break;case 13:this.$=n.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!1,this._$);break;case 14:this.$=n.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!0,this._$);break;case 15:this.$={open:s[a-5],path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:n.stripFlags(s[a-5],s[a])};break;case 16:case 17:this.$={path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:n.stripFlags(s[a-5],s[a])};break;case 18:this.$={strip:n.stripFlags(s[a-1],s[a-1]),program:s[a]};break;case 19:var l=n.prepareBlock(s[a-2],s[a-1],s[a],s[a],!1,this._$),c=n.prepareProgram([l],s[a-1].loc);c.chained=!0,this.$={strip:s[a-2].strip,program:c,chain:!0};break;case 20:this.$=s[a];break;case 21:this.$={path:s[a-1],strip:n.stripFlags(s[a-2],s[a])};break;case 22:case 23:this.$=n.prepareMustache(s[a-3],s[a-2],s[a-1],s[a-4],n.stripFlags(s[a-4],s[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:s[a-3],params:s[a-2],hash:s[a-1],indent:"",strip:n.stripFlags(s[a-4],s[a]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(s[a-2],s[a-1],s[a],this._$);break;case 26:this.$={path:s[a-3],params:s[a-2],hash:s[a-1],strip:n.stripFlags(s[a-4],s[a])};break;case 27:case 28:this.$=s[a];break;case 29:this.$={type:"SubExpression",path:s[a-3],params:s[a-2],hash:s[a-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:s[a],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(s[a-2]),value:s[a],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(s[a-1]);break;case 33:case 34:this.$=s[a];break;case 35:this.$={type:"StringLiteral",value:s[a],original:s[a],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(s[a]),original:Number(s[a]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===s[a],original:"true"===s[a],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:case 41:this.$=s[a];break;case 42:this.$=n.preparePath(!0,s[a],this._$);break;case 43:this.$=n.preparePath(!1,s[a],this._$);break;case 44:s[a-2].push({part:n.id(s[a]),original:s[a],separator:s[a-1]}),this.$=s[a-2];break;case 45:this.$=[{part:n.id(s[a]),original:s[a]}];break;case 46:this.$=[];break;case 47:s[a-1].push(s[a]);break;case 48:this.$=[s[a]];break;case 49:s[a-1].push(s[a]);break;case 50:this.$=[];break;case 51:s[a-1].push(s[a]);break;case 58:this.$=[];break;case 59:s[a-1].push(s[a]);break;case 64:this.$=[];break;case 65:s[a-1].push(s[a]);break;case 70:this.$=[];break;case 71:s[a-1].push(s[a]);break;case 78:this.$=[];break;case 79:s[a-1].push(s[a]);break;case 82:this.$=[];break;case 83:s[a-1].push(s[a]);break;case 86:this.$=[];break;case 87:s[a-1].push(s[a]);break;case 90:this.$=[];break;case 91:s[a-1].push(s[a]);break;case 94:this.$=[];break;case 95:s[a-1].push(s[a]);break;case 98:this.$=[s[a]];break;case 99:s[a-1].push(s[a]);break;case 100:this.$=[s[a]];break;case 101:s[a-1].push(s[a])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,i=[0],n=[null],o=[],s=this.table,r="",a=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var m,p,f,_,y,d,x,v,b,g={};;){if(f=i[i.length-1],this.defaultActions[f]?_=this.defaultActions[f]:(null!==m&&void 0!==m||(m=function(){var t;return t=e.lexer.lex()||1,"number"!=typeof t&&(t=e.symbols_[t]||t),t}()),_=s[f]&&s[f][m]),void 0===_||!_.length||!_[0]){var C="";if(!c){b=[];for(d in s[f])this.terminals_[d]&&d>2&&b.push("'"+this.terminals_[d]+"'");C=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:h,expected:b})}}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+m);switch(_[0]){case 1:i.push(m),n.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(_[1]),m=null,p?(m=p,p=null):(l=this.lexer.yyleng,r=this.lexer.yytext,a=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(x=this.productions_[_[1]][1],g.$=n[n.length-x],g._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},u&&(g._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),void 0!==(y=this.performAction.call(g,r,l,a,this.yy,_[1],n,o)))return y;x&&(i=i.slice(0,-1*x*2),n=n.slice(0,-1*x),o=o.slice(0,-1*x)),i.push(this.productions_[_[1]][0]),n.push(g.$),o.push(g._$),v=s[i[i.length-2]][i[i.length-1]],i.push(v);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,o;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),r=0;r<s.length&&(!(i=this._input.match(this.rules[s[r]]))||e&&!(i[0].length>e[0].length)||(e=i,n=r,this.options.flex));r++);return e?(o=e[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,s[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){function o(t,i){return e.yytext=e.yytext.substr(t,e.yyleng-i)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(e.yytext=e.yytext.substr(5,e.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=o(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=o(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},t}();return e.lexer=i,t.prototype=e,e.Parser=t,new t}();e.__esModule=!0,e.default=i},function(t,e,i){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function o(t,e,i){void 0===e&&(e=t.length);var n=t[e-1],o=t[e-2];return n?"ContentStatement"===n.type?(o||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:i}function s(t,e,i){void 0===e&&(e=-1);var n=t[e+1],o=t[e+2];return n?"ContentStatement"===n.type?(o||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:i}function r(t,e,i){var n=t[null==e?0:e+1];if(n&&"ContentStatement"===n.type&&(i||!n.rightStripped)){var o=n.value;n.value=n.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==o}}function a(t,e,i){var n=t[null==e?t.length-1:e-1];if(n&&"ContentStatement"===n.type&&(i||!n.leftStripped)){var o=n.value;return n.value=n.value.replace(i?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==o,n.leftStripped}}var l=i(1).default;e.__esModule=!0;var c=i(28),h=l(c);n.prototype=new h.default,n.prototype.Program=function(t){var e=!this.options.ignoreStandalone,i=!this.isRootSeen;this.isRootSeen=!0;for(var n=t.body,l=0,c=n.length;l<c;l++){var h=n[l],u=this.accept(h);if(u){var m=o(n,l,i),p=s(n,l,i),f=u.openStandalone&&m,_=u.closeStandalone&&p,y=u.inlineStandalone&&m&&p;u.close&&r(n,l,!0),u.open&&a(n,l,!0),e&&y&&(r(n,l),a(n,l)&&"PartialStatement"===h.type&&(h.indent=/([ \t]+$)/.exec(n[l-1].original)[1])),e&&f&&(r((h.program||h.inverse).body),a(n,l)),e&&_&&(r(n,l),a((h.inverse||h.program).body))}}return t},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,i=t.program&&t.inverse,n=i,l=i;if(i&&i.chained)for(n=i.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:s(e.body),closeStandalone:o((n||e).body)};if(t.openStrip.close&&r(e.body,null,!0),i){var h=t.inverseStrip;h.open&&a(e.body,null,!0),h.close&&r(n.body,null,!0),t.closeStrip.open&&a(l.body,null,!0),!this.options.ignoreStandalone&&o(e.body)&&s(n.body)&&(a(e.body),r(n.body))}else t.closeStrip.open&&a(e.body,null,!0);return c},n.prototype.Decorator=n.prototype.MustacheStatement=function(t){return t.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=n,t.exports=e.default},function(t,e,i){"use strict";function n(){this.parents=[]}function o(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function s(t){o.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function r(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}var a=i(1).default;e.__esModule=!0;var l=i(6),c=a(l);n.prototype={constructor:n,mutating:!1,acceptKey:function(t,e){var i=this.accept(t[e]);if(this.mutating){if(i&&!n.prototype[i.type])throw new c.default('Unexpected node type "'+i.type+'" found when accepting '+e+" on "+t.type);t[e]=i}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new c.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,i=t.length;e<i;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,i--)},accept:function(t){if(t){if(!this[t.type])throw new c.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:o,Decorator:o,BlockStatement:s,DecoratorBlock:s,PartialStatement:r,PartialBlockStatement:function(t){r.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:o,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=n,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var i={loc:t.path.loc};throw new y.default(t.path.original+" doesn't match "+e,i)}}function o(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function s(t){return/^\[.*\]$/.test(t)?t.substr(1,t.length-2):t}function r(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}}function a(t){return t.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function l(t,e,i){i=this.locInfo(i);for(var n=t?"@":"",o=[],s=0,r="",a=0,l=e.length;a<l;a++){var c=e[a].part,h=e[a].original!==c;if(n+=(e[a].separator||"")+c,h||".."!==c&&"."!==c&&"this"!==c)o.push(c);else{if(o.length>0)throw new y.default("Invalid path: "+n,{loc:i});".."===c&&(s++,r+="../")}}return{type:"PathExpression",data:t,depth:s,parts:o,original:n,loc:i}}function c(t,e,i,n,o,s){var r=n.charAt(3)||n.charAt(2),a="{"!==r&&"&"!==r;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:t,params:e,hash:i,escaped:a,strip:o,loc:this.locInfo(s)}}function h(t,e,i,o){n(t,i),o=this.locInfo(o);var s={type:"Program",body:e,strip:{},loc:o};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:s,openStrip:{},inverseStrip:{},closeStrip:{},loc:o}}function u(t,e,i,o,s,r){o&&o.path&&n(t,o);var a=/\*/.test(t.open);e.blockParams=t.blockParams;var l=void 0,c=void 0;if(i){if(a)throw new y.default("Unexpected inverse block on decorator",i);i.chain&&(i.program.body[0].closeStrip=o.strip),c=i.strip,l=i.program}return s&&(s=l,l=e,e=s),{type:a?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:l,openStrip:t.strip,inverseStrip:c,closeStrip:o&&o.strip,loc:this.locInfo(r)}}function m(t,e){if(!e&&t.length){var i=t[0].loc,n=t[t.length-1].loc;i&&n&&(e={source:i.source,start:{line:i.start.line,column:i.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:t,strip:{},loc:e}}function p(t,e,i,o){return n(t,i),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:i&&i.strip,loc:this.locInfo(o)}}var f=i(1).default;e.__esModule=!0,e.SourceLocation=o,e.id=s,e.stripFlags=r,e.stripComment=a,e.preparePath=l,e.prepareMustache=c,e.prepareRawBlock=h,e.prepareBlock=u,e.prepareProgram=m,e.preparePartialBlock=p;var _=i(6),y=f(_)},function(t,e,i){"use strict";function n(){}function o(t,e,i){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new h.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var n=i.parse(t,e),o=(new i.Compiler).compile(n,e);return(new i.JavaScriptCompiler).compile(o,e)}function s(t,e,i){function n(){var n=i.parse(t,e),o=(new i.Compiler).compile(n,e),s=(new i.JavaScriptCompiler).compile(o,e,void 0,!0);return i.template(s)}function o(t,e){return s||(s=n()),s.call(this,t,e)}if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new h.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var s=void 0;return o._setup=function(t){return s||(s=n()),s._setup(t)},o._child=function(t,e,i,o){return s||(s=n()),s._child(t,e,i,o)},o}function r(t,e){if(t===e)return!0;if(u.isArray(t)&&u.isArray(e)&&t.length===e.length){for(var i=0;i<t.length;i++)if(!r(t[i],e[i]))return!1;return!0}}function a(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}var l=i(1).default;e.__esModule=!0,e.Compiler=n,e.precompile=o,e.compile=s;var c=i(6),h=l(c),u=i(5),m=i(24),p=l(m),f=[].slice;n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;i<e;i++){var n=this.opcodes[i],o=t.opcodes[i];if(n.opcode!==o.opcode||!r(n.args,o.args))return!1}e=this.children.length;for(var i=0;i<e;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[];var i=e.knownHelpers;if(e.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},i)for(var n in i)n in i&&(e.knownHelpers[n]=i[n]);return this.accept(t)},compileProgram:function(t){var e=new this.compiler,i=e.compile(t,this.options),n=this.guid++;return this.usePartial=this.usePartial||i.usePartial,this.children[n]=i,this.useDepths=this.useDepths||i.useDepths,n},accept:function(t){if(!this[t.type])throw new h.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,i=e.length,n=0;n<i;n++)this.accept(e[n]);return this.options.blockParams.shift(),this.isSimple=1===i,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){a(t);var e=t.program,i=t.inverse;e=e&&this.compileProgram(e),i=i&&this.compileProgram(i);var n=this.classifySexpr(t);"helper"===n?this.helperSexpr(t,e,i):"simple"===n?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,i),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),i=this.setupFullMustacheParams(t,e,void 0),n=t.path;this.useDecorators=!0,this.opcode("registerDecorator",i.length,n.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var i=t.params;if(i.length>1)throw new h.default("Unsupported number of partial arguments: "+i.length,t);i.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):i.push({type:"PathExpression",parts:[],depth:0}));var n=t.name.original,o="SubExpression"===t.name.type;o&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var s=t.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",o,n,s),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){a(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,i){var n=t.path,o=n.parts[0],s=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",o,s)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),o=t.path,s=o.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new h.default("You specified knownHelpersOnly, but used the unknown helper "+s,t);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",n.length,o.original,p.default.helpers.simpleId(o))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],i=p.default.helpers.scopedId(t),n=!t.depth&&!i&&this.blockParamIndex(e);n?this.opcode("lookupBlockParam",n,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,i):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,i=0,n=e.length;for(this.opcode("pushHash");i<n;i++)this.pushParam(e[i].value);for(;i--;)this.opcode("assignToHash",e[i].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:f.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=p.default.helpers.simpleId(t.path),i=e&&!!this.blockParamIndex(t.path.parts[0]),n=!i&&p.default.helpers.helperExpression(t),o=!i&&(n||e);if(o&&!n){var s=t.path.parts[0],r=this.options;r.knownHelpers[s]?n=!0:r.knownHelpersOnly&&(o=!1)}return n?"helper":o?"ambiguous":"simple"},pushParams:function(t){for(var e=0,i=t.length;e<i;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var i=void 0;if(!t.parts||p.default.helpers.scopedId(t)||t.depth||(i=this.blockParamIndex(t.parts[0])),i){var n=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",i,n)}else e=t.original||e,e.replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,i,n){var o=t.params;return this.pushParams(o),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.accept(t.hash):this.opcode("emptyHash",n),o},blockParamIndex:function(t){for(var e=0,i=this.options.blockParams.length;e<i;e++){var n=this.options.blockParams[e],o=n&&u.indexOf(n,t);if(n&&o>=0)return[e,o]}}}},function(t,e,i){"use strict";function n(t){this.value=t}function o(){}function s(t,e,i,n){var o=e.popStack(),s=0,r=i.length;for(t&&r--;s<r;s++)o=e.nameLookup(o,i[s],n);return t?[e.aliasable("container.strict"),"(",o,", ",e.quotedString(i[s]),")"]:o}var r=i(1).default;e.__esModule=!0;var a=i(4),l=i(6),c=r(l),h=i(5),u=i(32),m=r(u);o.prototype={nameLookup:function(t,e){return o.isValidJavaScriptVariableName(e)?[t,".",e]:[t,"[",JSON.stringify(e),"]"]},depthedLookup:function(t){return[this.aliasable("container.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=a.COMPILER_REVISION;return[t,a.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,i){return h.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:i?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},compile:function(t,e,i,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!i,this.context=i||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var o=t.opcodes,s=void 0,r=void 0,a=void 0,l=void 0;for(a=0,l=o.length;a<l;a++)s=o[a],this.source.currentLocation=s.loc,r=r||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=r,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var h=this.createFunctionContext(n);if(this.isChild)return h;var u={compiler:this.compilerInfo(),main:h};this.decorators&&(u.main_d=this.decorators,u.useDecorators=!0);var m=this.context,p=m.programs,f=m.decorators;for(a=0,l=p.length;a<l;a++)p[a]&&(u[a]=p[a],f[a]&&(u[a+"_d"]=f[a],u.useDecorators=!0));return this.environment.usePartial&&(u.usePartial=!0),this.options.data&&(u.useData=!0),this.useDepths&&(u.useDepths=!0),this.useBlockParams&&(u.useBlockParams=!0),this.options.compat&&(u.compat=!0),n?u.compilerOptions=this.options:(u.compiler=JSON.stringify(u.compiler),this.source.currentLocation={start:{line:1,column:0}},u=this.objectLiteral(u),e.srcName?(u=u.toStringWithSourceMap({file:e.destName}),u.map=u.map&&u.map.toString()):u=u.toString()),u},preamble:function(){this.lastContext=0,this.source=new m.default(this.options.srcName),this.decorators=new m.default(this.options.srcName)},createFunctionContext:function(t){var e="",i=this.stackVars.concat(this.registers.list);i.length>0&&(e+=", "+i.join(", "));var n=0;for(var o in this.aliases){var s=this.aliases[o];this.aliases.hasOwnProperty(o)&&s.children&&s.referenceCount>1&&(e+=", alias"+ ++n+"="+o,s.children[0]="alias"+n)}var r=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths");var a=this.mergeSource(e);return t?(r.push(a),Function.apply(this,r)):this.source.wrap(["function(",r.join(","),") {\n  ",a,"}"])},mergeSource:function(t){var e=this.environment.isSimple,i=!this.forceBuffer,n=void 0,o=void 0,s=void 0,r=void 0;return this.source.each(function(t){t.appendToBuffer?(s?t.prepend("  + "):s=t,r=t):(s&&(o?s.prepend("buffer += "):n=!0,r.add(";"),s=r=void 0),o=!0,e||(i=!1))}),i?s?(s.prepend("return "),r.add(";")):o||this.source.push('return "";'):(t+=", buffer = "+(n?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),r.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(t){var e=this.aliasable("helpers.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs(t,0,i);var n=this.popStack();i.splice(1,0,n),this.push(this.source.functionCall(e,"call",i))},ambiguousBlockValue:function(){var t=this.aliasable("helpers.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var i=this.topStack();e.splice(1,0,i),this.pushSource(["if (!",this.lastHelper,") { ",i," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack(function(t){return[" != null ? ",t,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,i,n){var o=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[o++])),this.resolvePath("context",t,o,e,i)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,i){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,i)},resolvePath:function(t,e,i,n,o){var r=this;if(this.options.strict||this.options.assumeObjects)return void this.push(s(this.options.strict&&o,this,e,t));for(var a=e.length;i<a;i++)this.replaceStack(function(o){var s=r.nameLookup(o,e[i],t);return n?[" && ",s]:[" != null ? ",s," : ",o]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var i=this.nameLookup("decorators",e,"decorator"),n=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(i,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(t,e,i){var n=this.popStack(),o=this.setupHelper(t,e),s=i?[o.name," || "]:"",r=["("].concat(s,n);this.options.strict||r.push(" || ",this.aliasable("helpers.helperMissing")),r.push(")"),this.push(this.source.functionCall(r,"call",o.callParams))},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var i=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),o=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=["(","(helper = ",o," || ",i,")"];this.options.strict||(s[0]="(helper = ",s.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",s,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(t,e,i){var n=[],o=this.setupParams(e,1,n);t&&(e=this.popStack(),delete o.name),i&&(o.indent=JSON.stringify(i)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",t?n.unshift(e):n.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),n.push(o),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(t){var e=this.popStack(),i=void 0,n=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(n=this.popStack(),i=this.popStack());var s=this.hash;i&&(s.contexts[t]=i),n&&(s.types[t]=n),o&&(s.ids[t]=o),s.values[t]=e},pushId:function(t,e,i){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:o,compileChildren:function(t,e){for(var i=t.children,n=void 0,o=void 0,s=0,r=i.length;s<r;s++){n=i[s],o=new this.compiler;var a=this.matchExistingProgram(n);if(null==a){this.context.programs.push("");var l=this.context.programs.length;n.index=l,n.name="program"+l,this.context.programs[l]=o.compile(n,e,this.context,!this.precompile),this.context.decorators[l]=o.decorators,this.context.environments[l]=n,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=a.index,n.name="program"+a.index,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;e<i;e++){var n=this.context.environments[e];if(n&&n.equals(t))return n}},programExpression:function(t){var e=this.environment.children[t],i=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths"),"container.program("+i.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof n||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],i=void 0,o=void 0,s=void 0;if(!this.isInline())throw new c.default("replaceStack on non-inline");var r=this.popStack(!0);if(r instanceof n)i=[r.value],e=["(",i],s=!0;else{o=!0;var a=this.incrStack();e=["((",this.push(a)," = ",r,")"],i=this.topStack()}var l=t.call(this,i);s||this.popStack(),o&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,i=t.length;e<i;e++){var o=t[e];if(o instanceof n)this.compileStack.push(o);else{var s=this.incrStack();this.pushSource([s," = ",o,";"]),this.compileStack.push(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new c.default("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):(e=this.aliases[t]=this.source.wrap(t),e.aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,i){var n=[];return{params:n,paramsInit:this.setupHelperArgs(e,t,n,i),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : {}")].concat(n)}},setupParams:function(t,e,i){var n={},o=[],s=[],r=[],a=!i,l=void 0;a&&(i=[]),n.name=this.quotedString(t),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var c=this.popStack(),h=this.popStack();(h||c)&&(n.fn=h||"container.noop",n.inverse=c||"container.noop");for(var u=e;u--;)l=this.popStack(),i[u]=l,this.trackIds&&(r[u]=this.popStack()),this.stringParams&&(s[u]=this.popStack(),o[u]=this.popStack());return a&&(n.args=this.source.generateArray(i)),this.trackIds&&(n.ids=this.source.generateArray(r)),this.stringParams&&(n.types=this.source.generateArray(s),n.contexts=this.source.generateArray(o)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(t,e,i,n){var o=this.setupParams(t,e,i);return o=this.objectLiteral(o),n?(this.useRegister("options"),i.push("options"),["options=",o]):i?(i.push(o),""):o}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=o.RESERVED_WORDS={},i=0,n=t.length;i<n;i++)e[t[i]]=!0}(),o.isValidJavaScriptVariableName=function(t){return!o.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=o,t.exports=e.default},function(t,e,i){"use strict";function n(t,e,i){if(s.isArray(t)){for(var n=[],o=0,r=t.length;o<r;o++)n.push(e.wrap(t[o],i));return n}return"boolean"==typeof t||"number"==typeof t?t+"":t}function o(t){this.srcFile=t,this.source=[]}e.__esModule=!0;var s=i(5),r=void 0;r||(r=function(t,e,i,n){this.src="",n&&this.add(n)},r.prototype={add:function(t){s.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){s.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),o.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(t){for(var e=0,i=this.source.length;e<i;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new r(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof r?t:(t=n(t,this,e),new r(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,i){return i=this.generateList(i),this.wrap([t,e?"."+e+"(":"(",i,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var i in t)if(t.hasOwnProperty(i)){var o=n(t[i],this);"undefined"!==o&&e.push([this.quotedString(i),":",o])}var s=this.generateList(e);return s.prepend("{"),s.add("}"),s},generateList:function(t){for(var e=this.empty(),i=0,o=t.length;i<o;i++)i&&e.add(","),e.add(n(t[i],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=o,t.exports=e.default}])})},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(17);i.d(e,"SOUND_LETTER_TYPED",function(){return o}),i.d(e,"SOUND_SWORD_SLASH",function(){return s}),i.d(e,"SOUNDS",function(){return r});var o="LETTER_TYPED",s="SWORD_SLASH",r={LETTER_TYPED:n.SND_TYPEWRITER,SWORD_SLASH:n.SND_SWORD_SWIPE}},function(t,e,i){!function(){var i={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var n="string"==typeof t.initial?{state:t.initial}:t.initial,o=t.terminal||t.final,s=e||t.target||{},r=t.events||[],a=t.callbacks||{},l={},c={},h=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[i.WILDCARD];l[t.name]=l[t.name]||{};for(var n=0;n<e.length;n++)c[e[n]]=c[e[n]]||[],c[e[n]].push(t.name),l[t.name][e[n]]=t.to||e[n];t.to&&(c[t.to]=c[t.to]||[])};n&&(n.event=n.event||"startup",h({name:n.event,from:"none",to:n.state}));for(var u=0;u<r.length;u++)h(r[u]);for(var m in l)l.hasOwnProperty(m)&&(s[m]=i.buildEvent(m,l[m]));for(var m in a)a.hasOwnProperty(m)&&(s[m]=a[m]);return s.current="none",s.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},s.can=function(t){return!this.transition&&void 0!==l[t]&&(l[t].hasOwnProperty(this.current)||l[t].hasOwnProperty(i.WILDCARD))},s.cannot=function(t){return!this.can(t)},s.transitions=function(){return(c[this.current]||[]).concat(c[i.WILDCARD]||[])},s.isFinished=function(){return this.is(o)},s.error=t.error||function(t,e,i,n,o,s,r){throw r||s},s.states=function(){return Object.keys(c).sort()},n&&!n.defer&&s[n.event](),s},doCallback:function(t,e,n,o,s,r){if(e)try{return e.apply(t,[n,o,s].concat(r))}catch(e){return t.error(n,o,s,r,i.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}},beforeAnyEvent:function(t,e,n,o,s){return i.doCallback(t,t.onbeforeevent,e,n,o,s)},afterAnyEvent:function(t,e,n,o,s){return i.doCallback(t,t.onafterevent||t.onevent,e,n,o,s)},leaveAnyState:function(t,e,n,o,s){return i.doCallback(t,t.onleavestate,e,n,o,s)},enterAnyState:function(t,e,n,o,s){return i.doCallback(t,t.onenterstate||t.onstate,e,n,o,s)},changeState:function(t,e,n,o,s){return i.doCallback(t,t.onchangestate,e,n,o,s)},beforeThisEvent:function(t,e,n,o,s){return i.doCallback(t,t["onbefore"+e],e,n,o,s)},afterThisEvent:function(t,e,n,o,s){return i.doCallback(t,t["onafter"+e]||t["on"+e],e,n,o,s)},leaveThisState:function(t,e,n,o,s){return i.doCallback(t,t["onleave"+n],e,n,o,s)},enterThisState:function(t,e,n,o,s){return i.doCallback(t,t["onenter"+o]||t["on"+o],e,n,o,s)},beforeEvent:function(t,e,n,o,s){if(!1===i.beforeThisEvent(t,e,n,o,s)||!1===i.beforeAnyEvent(t,e,n,o,s))return!1},afterEvent:function(t,e,n,o,s){i.afterThisEvent(t,e,n,o,s),i.afterAnyEvent(t,e,n,o,s)},leaveState:function(t,e,n,o,s){var r=i.leaveThisState(t,e,n,o,s),a=i.leaveAnyState(t,e,n,o,s);return!1!==r&&!1!==a&&(i.ASYNC===r||i.ASYNC===a?i.ASYNC:void 0)},enterState:function(t,e,n,o,s){i.enterThisState(t,e,n,o,s),i.enterAnyState(t,e,n,o,s)},buildEvent:function(t,e){return function(){var n=this.current,o=e[n]||(e[i.WILDCARD]!=i.WILDCARD?e[i.WILDCARD]:n)||n,s=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,n,o,s,i.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,n,o,s,i.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===i.beforeEvent(this,t,n,o,s))return i.Result.CANCELLED;if(n===o)return i.afterEvent(this,t,n,o,s),i.Result.NOTRANSITION;var r=this;this.transition=function(){return r.transition=null,r.current=o,i.enterState(r,t,n,o,s),i.changeState(r,t,n,o,s),i.afterEvent(r,t,n,o,s),i.Result.SUCCEEDED},this.transition.cancel=function(){r.transition=null,i.afterEvent(r,t,n,o,s)};var a=i.leaveState(this,t,n,o,s);return!1===a?(this.transition=null,i.Result.CANCELLED):i.ASYNC===a?i.Result.PENDING:this.transition?this.transition():void 0}}};void 0!==t&&t.exports&&(e=t.exports=i),e.StateMachine=i}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ANIM_READY",function(){return n}),i.d(e,"ANIM_LIGHT_ATTACK",function(){return o}),i.d(e,"ANIM_MED_ATTACK",function(){return s}),i.d(e,"ANIM_HEAVY_ATTACK",function(){return r}),i.d(e,"ANIM_SPECIAL_ATTACK",function(){return a}),i.d(e,"ANIM_GUARD",function(){return l}),i.d(e,"ANIM_DASH",function(){return c}),i.d(e,"ANIM_JUMP",function(){return h}),i.d(e,"ANIM_ENTER",function(){return u}),i.d(e,"ANIM_CHARGE",function(){return m}),i.d(e,"ANIM_HIT",function(){return p});var n="ANIM_READY",o="ANIM_LIGHT_ATTACK",s="ANIM_MED_ATTACK",r="ANIM_HEAVY_ATTACK",a="ANIM_SPECIAL_ATTACK",l="ANIM_GUARD",c="ANIM_DASH",h="ANIM_JUMP",u="ANIM_ENTER",m="ANIM_CHARGE",p="ANIM_HIT"},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){r&&console.log(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=!1,a=function(){function t(){n(this,t)}return s(t,null,[{key:"retrieve",value:function(t,e){if(!t)throw"ERROR: TextLibrarian.retrieve called without a text library";return e||(e={}),this.getTextFromLibrary(t,e)}},{key:"getTextFromLibrary",value:function(t,e){var i,n,s,r,a;for(o("DEBUG: BEGIN LIB REQ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"),o("DEBUG: options are ---->",e),i=[],r=_.sample(t),n=t.indexOf(r),s=0,i.push(r),a=e.minLength&&e.maxLength?_.random(e.minLength,e.maxLength):e.minLength,o("DEBUG: target length determined as ---->",a);;){if(s+=1,this.lengthOfOutputString(i)>a)return o("DEBUG: finished building string from library -----------> ",i),o("DEBUG: END LIB REQ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"),o("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"),i.join(" ");if(n+1>t.length){var l=_.sample(t);n=t.indexOf(l),i.push(l)}else i.push(t[++n]);if(s>=20)return i.join(" ")}}},{key:"lengthOfOutputString",value:function(t){return t.join(" ").length}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4);Crafty.c("TextFragment",{_correct_characters:"",_current_position:null,_incorrect_characters:"",_text:"",_textFragFsm:null,textFragment:function(t){return this._initTextFragFsm(),this._text=t,this},activate:function(){this._textFragFsm.activate()},complete:function(){this._textFragFsm.finish()},errorCount:function(){return this._incorrect_characters.length},getCorrectCharacters:function(){return this._correct_characters},getIncorrectCharacters:function(){return this._incorrect_characters},getNextChar:function(){return this._text[this._current_position]},getRemainingCharacters:function(){return this.getText().slice(this._current_position)},getText:function(){return this._text},getTextStatus:function(){return{typed:this.getCorrectCharacters()||"",missed:this.getIncorrectCharacters()||"",rest:this.getRemainingCharacters()||""}},isActive:function(){return this._textFragFsm.is("active")},isComplete:function(){return this._textFragFsm.is("completed")},isCooling:function(){return this._textFragFsm.is("cooling")},isProcessed:function(){return this._textFragFsm.is("processed")},processed:function(){return this._textFragFsm.process()},textLength:function(){return this._text.length},matchFirstChar:function(t){return this._text[0]==t},matchNextChar:function(t){return this.getNextChar()==t},restart:function(){this._textFragFsm.restart()},setText:function(t){this._text=t},successPct:function(){return this.isComplete()?100*(1-this._incorrect_characters.length/this._correct_characters.length):(this._correct_characters.length-this._incorrect_characters.length)/this._text.length*100},takeInput:function(t){return this._text[this._current_position]==t?(this._correctInput(),this._checkForCompletion(),this._triggerRedraw(),!0):(this._wrongInput(t),this._triggerRedraw(),!1)},wasPerfect:function(){return this.successPct()>=99.9},_checkForCompletion:function(){this._correct_characters.length==this._text.length&&this.complete()},_clearTimestamps:function(){this.completed_at=null,this.started_at=null},_correctInput:function(t){this._correct_characters+=this._text[this._current_position],this._current_position++,Crafty.trigger("PlaySound",n.SOUND_LETTER_TYPED)},_getClasses:function(){return this._classes.concat(this._classesFunc(this._currentTime()))},_getClassesForDom:function(){return _.reduce(this._getClasses(),function(t,e){return t+" "+e},"")},_initTextFragFsm:function(){var t=this;this._textFragFsm=o.create({initial:"ready",events:[{name:"activate",from:"ready",to:"active"},{name:"finish",from:"active",to:"completed"},{name:"process",from:"completed",to:"processed"},{name:"restart",from:"completed",to:"ready"},{name:"restart",from:"processed",to:"ready"},{name:"cancel",from:"active",to:"ready"}],callbacks:{onactivate:function(e,i,n){t._onActivate()},oncomplete:function(e,i,n){t._onComplete()},onrestart:function(e,i,n){t._onRestart()},oncancel:function(e,i,n){t._onRestart()}}})},_onActivate:function(){this._current_position=0,this._tagStartedTimestamp(),this.z=99999,Crafty.trigger("TextFragmentActivated",this),this._triggerRedraw()},_onComplete:function(){console.log("DEBUG: TEXT FRAGMENT COMPONENT _COMPLETE ~~~~~~~~"),this._tagCompletedTimestamp(),this._triggerRedraw(),Crafty.trigger("TextFragmentCompleted",this),this.trigger("TextFragmentCompleted")},_onRestart:function(){this._incorrect_characters="",this._correct_characters="",this._current_position=null,this._clearTimestamps(),this._triggerRedraw()},_tagStartedTimestamp:function(){this.started_at=new Date},_tagCompletedTimestamp:function(){this.completed_at=new Date},_triggerRedraw:function(){this.trigger("TextFragmentRedraw")},_wrongInput:function(t){this._incorrect_characters+=t,this.trigger("InputIncorrect")}})},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var n,o;!function(e,i){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,function(i,s){"use strict";function r(t,e){e=e||rt;var i=e.createElement("script");i.text=t,e.head.appendChild(i).parentNode.removeChild(i)}function a(t){var e=!!t&&"length"in t&&t.length,i=xt.type(t);return"function"!==i&&!xt.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function l(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function c(t,e,i){return xt.isFunction(e)?xt.grep(t,function(t,n){return!!e.call(t,n,t)!==i}):e.nodeType?xt.grep(t,function(t){return t===e!==i}):"string"!=typeof e?xt.grep(t,function(t){return ut.call(e,t)>-1!==i}):At.test(e)?xt.filter(e,t,i):(e=xt.filter(e,t),xt.grep(t,function(t){return ut.call(e,t)>-1!==i&&1===t.nodeType}))}function h(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function u(t){var e={};return xt.each(t.match(Pt)||[],function(t,i){e[i]=!0}),e}function m(t){return t}function p(t){throw t}function f(t,e,i,n){var o;try{t&&xt.isFunction(o=t.promise)?o.call(t).done(e).fail(i):t&&xt.isFunction(o=t.then)?o.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}function _(){rt.removeEventListener("DOMContentLoaded",_),i.removeEventListener("load",_),xt.ready()}function y(){this.expando=xt.expando+y.uid++}function d(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Rt.test(t)?JSON.parse(t):t)}function x(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Gt,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=d(i)}catch(t){}Ft.set(t,e,i)}else i=void 0;return i}function v(t,e,i,n){var o,s=1,r=20,a=n?function(){return n.cur()}:function(){return xt.css(t,e,"")},l=a(),c=i&&i[3]||(xt.cssNumber[e]?"":"px"),h=(xt.cssNumber[e]||"px"!==c&&+l)&&Jt.exec(xt.css(t,e));if(h&&h[3]!==c){c=c||h[3],i=i||[],h=+l||1;do{s=s||".5",h/=s,xt.style(t,e,h+c)}while(s!==(s=a()/l)&&1!==s&&--r)}return i&&(h=+h||+l||0,o=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=h,n.end=o)),o}function b(t){var e,i=t.ownerDocument,n=t.nodeName,o=zt[n];return o||(e=i.body.appendChild(i.createElement(n)),o=xt.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),zt[n]=o,o)}function g(t,e){for(var i,n,o=[],s=0,r=t.length;s<r;s++)n=t[s],n.style&&(i=n.style.display,e?("none"===i&&(o[s]=Et.get(n,"display")||null,o[s]||(n.style.display="")),""===n.style.display&&jt(n)&&(o[s]=b(n))):"none"!==i&&(o[s]="none",Et.set(n,"display",i)));for(s=0;s<r;s++)null!=o[s]&&(t[s].style.display=o[s]);return t}function C(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&l(t,e)?xt.merge([t],i):i}function w(t,e){for(var i=0,n=t.length;i<n;i++)Et.set(t[i],"globalEval",!e||Et.get(e[i],"globalEval"))}function S(t,e,i,n,o){for(var s,r,a,l,c,h,u=e.createDocumentFragment(),m=[],p=0,f=t.length;p<f;p++)if((s=t[p])||0===s)if("object"===xt.type(s))xt.merge(m,s.nodeType?[s]:s);else if(Kt.test(s)){for(r=r||u.appendChild(e.createElement("div")),a=(Ut.exec(s)||["",""])[1].toLowerCase(),l=$t[a]||$t._default,r.innerHTML=l[1]+xt.htmlPrefilter(s)+l[2],h=l[0];h--;)r=r.lastChild;xt.merge(m,r.childNodes),r=u.firstChild,r.textContent=""}else m.push(e.createTextNode(s));for(u.textContent="",p=0;s=m[p++];)if(n&&xt.inArray(s,n)>-1)o&&o.push(s);else if(c=xt.contains(s.ownerDocument,s),r=C(u.appendChild(s),"script"),c&&w(r),i)for(h=0;s=r[h++];)Wt.test(s.type||"")&&i.push(s);return u}function A(){return!0}function D(){return!1}function B(){try{return rt.activeElement}catch(t){}}function M(t,e,i,n,o,s){var r,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=void 0);for(a in e)M(t,a,i,n,e[a],s);return t}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=D;else if(!o)return t;return 1===s&&(r=o,o=function(t){return xt().off(t),r.apply(this,arguments)},o.guid=r.guid||(r.guid=xt.guid++)),t.each(function(){xt.event.add(this,e,o,n,i)})}function I(t,e){return l(t,"table")&&l(11!==e.nodeType?e:e.firstChild,"tr")?xt(">tbody",t)[0]||t:t}function P(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function V(t){var e=ie.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function k(t,e){var i,n,o,s,r,a,l,c;if(1===e.nodeType){if(Et.hasData(t)&&(s=Et.access(t),r=Et.set(e,s),c=s.events)){delete r.handle,r.events={};for(o in c)for(i=0,n=c[o].length;i<n;i++)xt.event.add(e,o,c[o][i])}Ft.hasData(t)&&(a=Ft.access(t),l=xt.extend({},a),Ft.set(e,l))}}function T(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Ht.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function L(t,e,i,n){e=ct.apply([],e);var o,s,a,l,c,h,u=0,m=t.length,p=m-1,f=e[0],_=xt.isFunction(f);if(_||m>1&&"string"==typeof f&&!dt.checkClone&&ee.test(f))return t.each(function(o){var s=t.eq(o);_&&(e[0]=f.call(this,o,s.html())),L(s,e,i,n)});if(m&&(o=S(e,t[0].ownerDocument,!1,t,n),s=o.firstChild,1===o.childNodes.length&&(o=s),s||n)){for(a=xt.map(C(o,"script"),P),l=a.length;u<m;u++)c=o,u!==p&&(c=xt.clone(c,!0,!0),l&&xt.merge(a,C(c,"script"))),i.call(t[u],c,u);if(l)for(h=a[a.length-1].ownerDocument,xt.map(a,V),u=0;u<l;u++)c=a[u],Wt.test(c.type||"")&&!Et.access(c,"globalEval")&&xt.contains(h,c)&&(c.src?xt._evalUrl&&xt._evalUrl(c.src):r(c.textContent.replace(ne,""),h))}return t}function E(t,e,i){for(var n,o=e?xt.filter(e,t):t,s=0;null!=(n=o[s]);s++)i||1!==n.nodeType||xt.cleanData(C(n)),n.parentNode&&(i&&xt.contains(n.ownerDocument,n)&&w(C(n,"script")),n.parentNode.removeChild(n));return t}function F(t,e,i){var n,o,s,r,a=t.style;return i=i||re(t),i&&(r=i.getPropertyValue(e)||i[e],""!==r||xt.contains(t.ownerDocument,t)||(r=xt.style(t,e)),!dt.pixelMarginRight()&&se.test(r)&&oe.test(e)&&(n=a.width,o=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=o,a.maxWidth=s)),void 0!==r?r+"":r}function R(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function G(t){if(t in me)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=ue.length;i--;)if((t=ue[i]+e)in me)return t}function N(t){var e=xt.cssProps[t];return e||(e=xt.cssProps[t]=G(t)||t),e}function J(t,e,i){var n=Jt.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function O(t,e,i,n,o){var s,r=0;for(s=i===(n?"border":"content")?4:"width"===e?1:0;s<4;s+=2)"margin"===i&&(r+=xt.css(t,i+Ot[s],!0,o)),n?("content"===i&&(r-=xt.css(t,"padding"+Ot[s],!0,o)),"margin"!==i&&(r-=xt.css(t,"border"+Ot[s]+"Width",!0,o))):(r+=xt.css(t,"padding"+Ot[s],!0,o),"padding"!==i&&(r+=xt.css(t,"border"+Ot[s]+"Width",!0,o)));return r}function j(t,e,i){var n,o=re(t),s=F(t,e,o),r="border-box"===xt.css(t,"boxSizing",!1,o);return se.test(s)?s:(n=r&&(dt.boxSizingReliable()||s===t.style[e]),"auto"===s&&(s=t["offset"+e[0].toUpperCase()+e.slice(1)]),(s=parseFloat(s)||0)+O(t,e,i||(r?"border":"content"),n,o)+"px")}function q(t,e,i,n,o){return new q.prototype.init(t,e,i,n,o)}function z(){fe&&(!1===rt.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(z):i.setTimeout(z,xt.fx.interval),xt.fx.tick())}function H(){return i.setTimeout(function(){pe=void 0}),pe=xt.now()}function U(t,e){var i,n=0,o={height:t};for(e=e?1:0;n<4;n+=2-e)i=Ot[n],o["margin"+i]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function W(t,e,i){for(var n,o=(X.tweeners[e]||[]).concat(X.tweeners["*"]),s=0,r=o.length;s<r;s++)if(n=o[s].call(i,e,t))return n}function $(t,e,i){var n,o,s,r,a,l,c,h,u="width"in e||"height"in e,m=this,p={},f=t.style,_=t.nodeType&&jt(t),y=Et.get(t,"fxshow");i.queue||(r=xt._queueHooks(t,"fx"),null==r.unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,m.always(function(){m.always(function(){r.unqueued--,xt.queue(t,"fx").length||r.empty.fire()})}));for(n in e)if(o=e[n],_e.test(o)){if(delete e[n],s=s||"toggle"===o,o===(_?"hide":"show")){if("show"!==o||!y||void 0===y[n])continue;_=!0}p[n]=y&&y[n]||xt.style(t,n)}if((l=!xt.isEmptyObject(e))||!xt.isEmptyObject(p)){u&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],c=y&&y.display,null==c&&(c=Et.get(t,"display")),h=xt.css(t,"display"),"none"===h&&(c?h=c:(g([t],!0),c=t.style.display||c,h=xt.css(t,"display"),g([t]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===xt.css(t,"float")&&(l||(m.done(function(){f.display=c}),null==c&&(h=f.display,c="none"===h?"":h)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",m.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1;for(n in p)l||(y?"hidden"in y&&(_=y.hidden):y=Et.access(t,"fxshow",{display:c}),s&&(y.hidden=!_),_&&g([t],!0),m.done(function(){_||g([t]),Et.remove(t,"fxshow");for(n in p)xt.style(t,n,p[n])})),l=W(_?y[n]:0,n,m),n in y||(y[n]=l.start,_&&(l.end=l.start,l.start=0))}}function K(t,e){var i,n,o,s,r;for(i in t)if(n=xt.camelCase(i),o=e[n],s=t[i],Array.isArray(s)&&(o=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),(r=xt.cssHooks[n])&&"expand"in r){s=r.expand(s),delete t[n];for(i in s)i in t||(t[i]=s[i],e[i]=o)}else e[n]=o}function X(t,e,i){var n,o,s=0,r=X.prefilters.length,a=xt.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=pe||H(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,s=1-n,r=0,l=c.tweens.length;r<l;r++)c.tweens[r].run(s);return a.notifyWith(t,[c,s,i]),s<1&&l?i:(l||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:xt.extend({},e),opts:xt.extend(!0,{specialEasing:{},easing:xt.easing._default},i),originalProperties:e,originalOptions:i,startTime:pe||H(),duration:i.duration,tweens:[],createTween:function(e,i){var n=xt.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),h=c.props;for(K(h,c.opts.specialEasing);s<r;s++)if(n=X.prefilters[s].call(c,t,h,c.opts))return xt.isFunction(n.stop)&&(xt._queueHooks(c.elem,c.opts.queue).stop=xt.proxy(n.stop,n)),n;return xt.map(h,W,c),xt.isFunction(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),xt.fx.timer(xt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}function Z(t){return(t.match(Pt)||[]).join(" ")}function Y(t){return t.getAttribute&&t.getAttribute("class")||""}function Q(t,e,i,n){var o;if(Array.isArray(e))xt.each(e,function(e,o){i||Ae.test(t)?n(t,o):Q(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,i,n)});else if(i||"object"!==xt.type(e))n(t,e);else for(o in e)Q(t+"["+o+"]",e[o],i,n)}function tt(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,s=e.toLowerCase().match(Pt)||[];if(xt.isFunction(i))for(;n=s[o++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function et(t,e,i,n){function o(a){var l;return s[a]=!0,xt.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||r||s[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var s={},r=t===ke;return o(e.dataTypes[0])||!s["*"]&&o("*")}function it(t,e){var i,n,o=xt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&xt.extend(!0,t,n),t}function nt(t,e,i){for(var n,o,s,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){l.unshift(o);break}if(l[0]in i)s=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){s=o;break}r||(r=o)}s=s||r}if(s)return s!==l[0]&&l.unshift(s),i[s]}function ot(t,e,i,n){var o,s,r,a,l,c={},h=t.dataTypes.slice();if(h[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(s=h.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=h.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(r=c[l+" "+s]||c["* "+s]))for(o in c)if(a=o.split(" "),a[1]===s&&(r=c[l+" "+a[0]]||c["* "+a[0]])){!0===r?r=c[o]:!0!==c[o]&&(s=a[0],h.unshift(a[1]));break}if(!0!==r)if(r&&t.throws)e=r(e);else try{e=r(e)}catch(t){return{state:"parsererror",error:r?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}var st=[],rt=i.document,at=Object.getPrototypeOf,lt=st.slice,ct=st.concat,ht=st.push,ut=st.indexOf,mt={},pt=mt.toString,ft=mt.hasOwnProperty,_t=ft.toString,yt=_t.call(Object),dt={},xt=function(t,e){return new xt.fn.init(t,e)},vt=function(t,e){return e.toUpperCase()};xt.fn=xt.prototype={jquery:"3.2.1",constructor:xt,length:0,toArray:function(){return lt.call(this)},get:function(t){return null==t?lt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=xt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return xt.each(this,t)},map:function(t){return this.pushStack(xt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(lt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ht,sort:st.sort,splice:st.splice},xt.extend=xt.fn.extend=function(){var t,e,i,n,o,s,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||xt.isFunction(r)||(r={}),a===l&&(r=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=r[e],n=t[e],r!==n&&(c&&n&&(xt.isPlainObject(n)||(o=Array.isArray(n)))?(o?(o=!1,s=i&&Array.isArray(i)?i:[]):s=i&&xt.isPlainObject(i)?i:{},r[e]=xt.extend(c,s,n)):void 0!==n&&(r[e]=n));return r},xt.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===xt.type(t)},isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=xt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==pt.call(t))&&(!(e=at(t))||"function"==typeof(i=ft.call(e,"constructor")&&e.constructor)&&_t.call(i)===yt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?mt[pt.call(t)]||"object":typeof t},globalEval:function(t){r(t)},camelCase:function(t){return t.replace(/^-ms-/,"ms-").replace(/-([a-z])/g,vt)},each:function(t,e){var i,n=0;if(a(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(a(Object(t))?xt.merge(i,"string"==typeof t?[t]:t):ht.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:ut.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;n<i;n++)t[o++]=e[n];return t.length=o,t},grep:function(t,e,i){for(var n=[],o=0,s=t.length,r=!i;o<s;o++)!e(t[o],o)!==r&&n.push(t[o]);return n},map:function(t,e,i){var n,o,s=0,r=[];if(a(t))for(n=t.length;s<n;s++)null!=(o=e(t[s],s,i))&&r.push(o);else for(s in t)null!=(o=e(t[s],s,i))&&r.push(o);return ct.apply([],r)},guid:1,proxy:function(t,e){var i,n,o;if("string"==typeof e&&(i=t[e],e=t,t=i),xt.isFunction(t))return n=lt.call(arguments,2),o=function(){return t.apply(e||this,n.concat(lt.call(arguments)))},o.guid=t.guid=t.guid||xt.guid++,o},now:Date.now,support:dt}),"function"==typeof Symbol&&(xt.fn[Symbol.iterator]=st[Symbol.iterator]),xt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){mt["[object "+e+"]"]=e.toLowerCase()});var bt=function(t){function e(t,e,i,n){var o,s,r,a,l,h,m,p=e&&e.ownerDocument,f=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return i;if(!n&&((e?e.ownerDocument||e:N)!==V&&P(e),e=e||V,T)){if(11!==f&&(l=_t.exec(t)))if(o=l[1]){if(9===f){if(!(r=e.getElementById(o)))return i;if(r.id===o)return i.push(r),i}else if(p&&(r=p.getElementById(o))&&R(e,r)&&r.id===o)return i.push(r),i}else{if(l[2])return X.apply(i,e.getElementsByTagName(t)),i;if((o=l[3])&&b.getElementsByClassName&&e.getElementsByClassName)return X.apply(i,e.getElementsByClassName(o)),i}if(b.qsa&&!z[t+" "]&&(!L||!L.test(t))){if(1!==f)p=e,m=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(vt,bt):e.setAttribute("id",a=G),h=S(t),s=h.length;s--;)h[s]="#"+a+" "+u(h[s]);m=h.join(","),p=yt.test(t)&&c(e.parentNode)||e}if(m)try{return X.apply(i,p.querySelectorAll(m)),i}catch(t){}finally{a===G&&e.removeAttribute("id")}}}return D(t.replace(st,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>g.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[G]=!0,t}function o(t){var e=V.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),n=i.length;n--;)g.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Ct(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function l(t){return n(function(e){return e=+e,n(function(i,n){for(var o,s=t([],i.length,e),r=s.length;r--;)i[o=s[r]]&&(i[o]=!(n[o]=i[o]))})})}function c(t){return t&&void 0!==t.getElementsByTagName&&t}function h(){}function u(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function m(t,e,i){var n=e.dir,o=e.next,s=o||n,r=i&&"parentNode"===s,a=O++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,o);return!1}:function(e,i,l){var c,h,u,m=[J,a];if(l){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||r)if(u=e[G]||(e[G]={}),h=u[e.uniqueID]||(u[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[n]||e;else{if((c=h[s])&&c[0]===J&&c[1]===a)return m[2]=c[2];if(h[s]=m,m[2]=t(e,i,l))return!0}return!1}}function p(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function f(t,i,n){for(var o=0,s=i.length;o<s;o++)e(t,i[o],n);return n}function _(t,e,i,n,o){for(var s,r=[],a=0,l=t.length,c=null!=e;a<l;a++)(s=t[a])&&(i&&!i(s,n,o)||(r.push(s),c&&e.push(a)));return r}function y(t,e,i,o,s,r){return o&&!o[G]&&(o=y(o)),s&&!s[G]&&(s=y(s,r)),n(function(n,r,a,l){var c,h,u,m=[],p=[],y=r.length,d=n||f(e||"*",a.nodeType?[a]:a,[]),x=!t||!n&&e?d:_(d,m,t,a,l),v=i?s||(n?t:y||o)?[]:r:x;if(i&&i(x,v,a,l),o)for(c=_(v,p),o(c,[],a,l),h=c.length;h--;)(u=c[h])&&(v[p[h]]=!(x[p[h]]=u));if(n){if(s||t){if(s){for(c=[],h=v.length;h--;)(u=v[h])&&c.push(x[h]=u);s(null,v=[],c,l)}for(h=v.length;h--;)(u=v[h])&&(c=s?Y(n,u):m[h])>-1&&(n[c]=!(r[c]=u))}}else v=_(v===r?v.splice(y,v.length):v),s?s(null,r,v,l):X.apply(r,v)})}function d(t){for(var e,i,n,o=t.length,s=g.relative[t[0].type],r=s||g.relative[" "],a=s?1:0,l=m(function(t){return t===e},r,!0),c=m(function(t){return Y(e,t)>-1},r,!0),h=[function(t,i,n){var o=!s&&(n||i!==B)||((e=i).nodeType?l(t,i,n):c(t,i,n));return e=null,o}];a<o;a++)if(i=g.relative[t[a].type])h=[m(p(h),i)];else{if(i=g.filter[t[a].type].apply(null,t[a].matches),i[G]){for(n=++a;n<o&&!g.relative[t[n].type];n++);return y(a>1&&p(h),a>1&&u(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(st,"$1"),i,a<n&&d(t.slice(a,n)),n<o&&d(t=t.slice(n)),n<o&&u(t))}h.push(i)}return p(h)}function x(t,i){var o=i.length>0,s=t.length>0,r=function(n,r,a,l,c){var h,u,m,p=0,f="0",y=n&&[],d=[],x=B,v=n||s&&g.find.TAG("*",c),b=J+=null==x?1:Math.random()||.1,C=v.length;for(c&&(B=r===V||r||c);f!==C&&null!=(h=v[f]);f++){if(s&&h){for(u=0,r||h.ownerDocument===V||(P(h),a=!T);m=t[u++];)if(m(h,r||V,a)){l.push(h);break}c&&(J=b)}o&&((h=!m&&h)&&p--,n&&y.push(h))}if(p+=f,o&&f!==p){for(u=0;m=i[u++];)m(y,d,r,a);if(n){if(p>0)for(;f--;)y[f]||d[f]||(d[f]=$.call(l));d=_(d)}X.apply(l,d),c&&!n&&d.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&(J=b,B=x),y};return o?n(r):r}var v,b,g,C,w,S,A,D,B,M,I,P,V,k,T,L,E,F,R,G="sizzle"+1*new Date,N=t.document,J=0,O=0,j=i(),q=i(),z=i(),H=function(t,e){return t===e&&(I=!0),0},U={}.hasOwnProperty,W=[],$=W.pop,K=W.push,X=W.push,Z=W.slice,Y=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",it="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",nt=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",ot=new RegExp(tt+"+","g"),st=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),rt=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ct=new RegExp(nt),ht=new RegExp("^"+et+"$"),ut={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+nt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,pt=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,_t=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,dt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),xt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},vt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,bt=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},gt=function(){P()},Ct=m(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{X.apply(W=Z.call(N.childNodes),N.childNodes),W[N.childNodes.length].nodeType}catch(t){X={apply:W.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}b=e.support={},w=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:N;return n!==V&&9===n.nodeType&&n.documentElement?(V=n,k=V.documentElement,T=!w(V),N!==V&&(i=V.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",gt,!1):i.attachEvent&&i.attachEvent("onunload",gt)),b.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=o(function(t){return t.appendChild(V.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=ft.test(V.getElementsByClassName),b.getById=o(function(t){return k.appendChild(t).id=G,!V.getElementsByName||!V.getElementsByName(G).length}),b.getById?(g.filter.ID=function(t){var e=t.replace(dt,xt);return function(t){return t.getAttribute("id")===e}},g.find.ID=function(t,e){if(void 0!==e.getElementById&&T){var i=e.getElementById(t);return i?[i]:[]}}):(g.filter.ID=function(t){var e=t.replace(dt,xt);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},g.find.ID=function(t,e){if(void 0!==e.getElementById&&T){var i,n,o,s=e.getElementById(t);if(s){if((i=s.getAttributeNode("id"))&&i.value===t)return[s];for(o=e.getElementsByName(t),n=0;s=o[n++];)if((i=s.getAttributeNode("id"))&&i.value===t)return[s]}return[]}}),g.find.TAG=b.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},g.find.CLASS=b.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&T)return e.getElementsByClassName(t)},E=[],L=[],(b.qsa=ft.test(V.querySelectorAll))&&(o(function(t){k.appendChild(t).innerHTML="<a id='"+G+"'></a><select id='"+G+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+tt+"*(?:value|"+Q+")"),t.querySelectorAll("[id~="+G+"-]").length||L.push("~="),t.querySelectorAll(":checked").length||L.push(":checked"),t.querySelectorAll("a#"+G+"+*").length||L.push(".#.+[+~]")}),o(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=V.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+tt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&L.push(":enabled",":disabled"),k.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(b.matchesSelector=ft.test(F=k.matches||k.webkitMatchesSelector||k.mozMatchesSelector||k.oMatchesSelector||k.msMatchesSelector))&&o(function(t){b.disconnectedMatch=F.call(t,"*"),F.call(t,"[s!='']:x"),E.push("!=",nt)}),L=L.length&&new RegExp(L.join("|")),E=E.length&&new RegExp(E.join("|")),e=ft.test(k.compareDocumentPosition),R=e||ft.test(k.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},H=e?function(t,e){if(t===e)return I=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!b.sortDetached&&e.compareDocumentPosition(t)===i?t===V||t.ownerDocument===N&&R(N,t)?-1:e===V||e.ownerDocument===N&&R(N,e)?1:M?Y(M,t)-Y(M,e):0:4&i?-1:1)}:function(t,e){if(t===e)return I=!0,0;var i,n=0,o=t.parentNode,s=e.parentNode,a=[t],l=[e];if(!o||!s)return t===V?-1:e===V?1:o?-1:s?1:M?Y(M,t)-Y(M,e):0;if(o===s)return r(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?r(a[n],l[n]):a[n]===N?-1:l[n]===N?1:0},V):V},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==V&&P(t),i=i.replace(lt,"='$1']"),b.matchesSelector&&T&&!z[i+" "]&&(!E||!E.test(i))&&(!L||!L.test(i)))try{var n=F.call(t,i);if(n||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,V,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==V&&P(t),R(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==V&&P(t);var i=g.attrHandle[e.toLowerCase()],n=i&&U.call(g.attrHandle,e.toLowerCase())?i(t,e,!T):void 0;return void 0!==n?n:b.attributes||!T?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.escape=function(t){return(t+"").replace(vt,bt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,o=0;if(I=!b.detectDuplicates,M=!b.sortStable&&t.slice(0),t.sort(H),I){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return M=null,t},C=e.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=C(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=C(e);return i},g=e.selectors={cacheLength:50,createPseudo:n,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(dt,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(dt,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ct.test(i)&&(e=S(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(dt,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=j[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&j(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(o){var s=e.attr(o,t);return null==s?"!="===i:!i||(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s.replace(ot," ")+" ").indexOf(n)>-1:"|="===i&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,o){var s="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var c,h,u,m,p,f,_=s!==r?"nextSibling":"previousSibling",y=e.parentNode,d=a&&e.nodeName.toLowerCase(),x=!l&&!a,v=!1;if(y){if(s){for(;_;){for(m=e;m=m[_];)if(a?m.nodeName.toLowerCase()===d:1===m.nodeType)return!1;f=_="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?y.firstChild:y.lastChild],r&&x){for(m=y,u=m[G]||(m[G]={}),h=u[m.uniqueID]||(u[m.uniqueID]={}),c=h[t]||[],p=c[0]===J&&c[1],v=p&&c[2],m=p&&y.childNodes[p];m=++p&&m&&m[_]||(v=p=0)||f.pop();)if(1===m.nodeType&&++v&&m===e){h[t]=[J,p,v];break}}else if(x&&(m=e,u=m[G]||(m[G]={}),h=u[m.uniqueID]||(u[m.uniqueID]={}),c=h[t]||[],p=c[0]===J&&c[1],v=p),!1===v)for(;(m=++p&&m&&m[_]||(v=p=0)||f.pop())&&((a?m.nodeName.toLowerCase()!==d:1!==m.nodeType)||!++v||(x&&(u=m[G]||(m[G]={}),h=u[m.uniqueID]||(u[m.uniqueID]={}),h[t]=[J,v]),m!==e)););return(v-=o)===n||v%n==0&&v/n>=0}}},PSEUDO:function(t,i){var o,s=g.pseudos[t]||g.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[G]?s(i):s.length>1?(o=[t,t,"",i],g.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,o=s(t,i),r=o.length;r--;)n=Y(t,o[r]),t[n]=!(e[n]=o[r])}):function(t){return s(t,0,o)}):s}},pseudos:{not:n(function(t){var e=[],i=[],o=A(t.replace(st,"$1"));return o[G]?n(function(t,e,i,n){for(var s,r=o(t,null,n,[]),a=t.length;a--;)(s=r[a])&&(t[a]=!(e[a]=s))}):function(t,n,s){return e[0]=t,o(e,null,s,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(dt,xt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:n(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(dt,xt).toLowerCase(),function(e){var i;do{if(i=T?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===k},focus:function(t){return t===V.activeElement&&(!V.hasFocus||V.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!g.pseudos.empty(t)},header:function(t){return pt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[i<0?i+e:i]}),even:l(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:l(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},g.pseudos.nth=g.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})g.pseudos[v]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(v);for(v in{submit:!0,reset:!0})g.pseudos[v]=function(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}(v);return h.prototype=g.filters=g.pseudos,g.setFilters=new h,S=e.tokenize=function(t,i){var n,o,s,r,a,l,c,h=q[t+" "];if(h)return i?0:h.slice(0);for(a=t,l=[],c=g.preFilter;a;){n&&!(o=rt.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),n=!1,(o=at.exec(a))&&(n=o.shift(),s.push({value:n,type:o[0].replace(st," ")}),a=a.slice(n.length));for(r in g.filter)!(o=ut[r].exec(a))||c[r]&&!(o=c[r](o))||(n=o.shift(),s.push({value:n,type:r,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):q(t,l).slice(0)},A=e.compile=function(t,e){var i,n=[],o=[],s=z[t+" "];if(!s){for(e||(e=S(t)),i=e.length;i--;)s=d(e[i]),s[G]?n.push(s):o.push(s);s=z(t,x(o,n)),s.selector=t}return s},D=e.select=function(t,e,i,n){var o,s,r,a,l,h="function"==typeof t&&t,m=!n&&S(t=h.selector||t);if(i=i||[],1===m.length){if(s=m[0]=m[0].slice(0),s.length>2&&"ID"===(r=s[0]).type&&9===e.nodeType&&T&&g.relative[s[1].type]){if(!(e=(g.find.ID(r.matches[0].replace(dt,xt),e)||[])[0]))return i;h&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(o=ut.needsContext.test(t)?0:s.length;o--&&(r=s[o],!g.relative[a=r.type]);)if((l=g.find[a])&&(n=l(r.matches[0].replace(dt,xt),yt.test(s[0].type)&&c(e.parentNode)||e))){if(s.splice(o,1),!(t=n.length&&u(s)))return X.apply(i,n),i;break}}return(h||A(t,m))(n,e,!T,i,!e||yt.test(t)&&c(e.parentNode)||e),i},b.sortStable=G.split("").sort(H).join("")===G,b.detectDuplicates=!!I,P(),b.sortDetached=o(function(t){return 1&t.compareDocumentPosition(V.createElement("fieldset"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||s(Q,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(i);xt.find=bt,xt.expr=bt.selectors,xt.expr[":"]=xt.expr.pseudos,xt.uniqueSort=xt.unique=bt.uniqueSort,xt.text=bt.getText,xt.isXMLDoc=bt.isXML,xt.contains=bt.contains,xt.escapeSelector=bt.escape;var gt=function(t,e,i){for(var n=[],o=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&xt(t).is(i))break;n.push(t)}return n},Ct=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},wt=xt.expr.match.needsContext,St=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,At=/^.[^:#\[\.,]*$/;xt.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?xt.find.matchesSelector(n,t)?[n]:[]:xt.find.matches(t,xt.grep(e,function(t){return 1===t.nodeType}))},xt.fn.extend({find:function(t){var e,i,n=this.length,o=this;if("string"!=typeof t)return this.pushStack(xt(t).filter(function(){for(e=0;e<n;e++)if(xt.contains(o[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)xt.find(t,o[e],i);return n>1?xt.uniqueSort(i):i},filter:function(t){return this.pushStack(c(this,t||[],!1))},not:function(t){return this.pushStack(c(this,t||[],!0))},is:function(t){return!!c(this,"string"==typeof t&&wt.test(t)?xt(t):t||[],!1).length}});var Dt,Bt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(xt.fn.init=function(t,e,i){var n,o;if(!t)return this;if(i=i||Dt,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Bt.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof xt?e[0]:e,xt.merge(this,xt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:rt,!0)),St.test(n[1])&&xt.isPlainObject(e))for(n in e)xt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return o=rt.getElementById(n[2]),o&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):xt.isFunction(t)?void 0!==i.ready?i.ready(t):t(xt):xt.makeArray(t,this)}).prototype=xt.fn,Dt=xt(rt);var Mt=/^(?:parents|prev(?:Until|All))/,It={children:!0,contents:!0,next:!0,prev:!0};xt.fn.extend({has:function(t){var e=xt(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(xt.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,o=this.length,s=[],r="string"!=typeof t&&xt(t);if(!wt.test(t))for(;n<o;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&xt.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?xt.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?ut.call(xt(t),this[0]):ut.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(xt.uniqueSort(xt.merge(this.get(),xt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),xt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return gt(t,"parentNode")},parentsUntil:function(t,e,i){return gt(t,"parentNode",i)},next:function(t){return h(t,"nextSibling")},prev:function(t){return h(t,"previousSibling")},nextAll:function(t){return gt(t,"nextSibling")},prevAll:function(t){return gt(t,"previousSibling")},nextUntil:function(t,e,i){return gt(t,"nextSibling",i)},prevUntil:function(t,e,i){return gt(t,"previousSibling",i)},siblings:function(t){return Ct((t.parentNode||{}).firstChild,t)},children:function(t){return Ct(t.firstChild)},contents:function(t){return l(t,"iframe")?t.contentDocument:(l(t,"template")&&(t=t.content||t),xt.merge([],t.childNodes))}},function(t,e){xt.fn[t]=function(i,n){var o=xt.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=xt.filter(n,o)),this.length>1&&(It[t]||xt.uniqueSort(o),Mt.test(t)&&o.reverse()),this.pushStack(o)}});var Pt=/[^\x20\t\r\n\f]+/g;xt.Callbacks=function(t){t="string"==typeof t?u(t):xt.extend({},t);var e,i,n,o,s=[],r=[],a=-1,l=function(){for(o=o||t.once,n=e=!0;r.length;a=-1)for(i=r.shift();++a<s.length;)!1===s[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=s.length,i=!1);t.memory||(i=!1),e=!1,o&&(s=i?[]:"")},c={add:function(){return s&&(i&&!e&&(a=s.length-1,r.push(i)),function e(i){xt.each(i,function(i,n){xt.isFunction(n)?t.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!==xt.type(n)&&e(n)})}(arguments),i&&!e&&l()),this},remove:function(){return xt.each(arguments,function(t,e){for(var i;(i=xt.inArray(e,s,i))>-1;)s.splice(i,1),i<=a&&a--}),this},has:function(t){return t?xt.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=r=[],s=i="",this},disabled:function(){return!s},lock:function(){return o=r=[],i||e||(s=i=""),this},locked:function(){return!!o},fireWith:function(t,i){return o||(i=i||[],i=[t,i.slice?i.slice():i],r.push(i),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},xt.extend({Deferred:function(t){var e=[["notify","progress",xt.Callbacks("memory"),xt.Callbacks("memory"),2],["resolve","done",xt.Callbacks("once memory"),xt.Callbacks("once memory"),0,"resolved"],["reject","fail",xt.Callbacks("once memory"),xt.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return xt.Deferred(function(i){xt.each(e,function(e,n){var o=xt.isFunction(t[n[4]])&&t[n[4]];s[n[1]](function(){var t=o&&o.apply(this,arguments);t&&xt.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,o?[t]:arguments)})}),t=null}).promise()},then:function(t,n,o){function s(t,e,n,o){return function(){var a=this,l=arguments,c=function(){var i,c;if(!(t<r)){if((i=n.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"==typeof i||"function"==typeof i)&&i.then,xt.isFunction(c)?o?c.call(i,s(r,e,m,o),s(r,e,p,o)):(r++,c.call(i,s(r,e,m,o),s(r,e,p,o),s(r,e,m,e.notifyWith))):(n!==m&&(a=void 0,l=[i]),(o||e.resolveWith)(a,l))}},h=o?c:function(){try{c()}catch(i){xt.Deferred.exceptionHook&&xt.Deferred.exceptionHook(i,h.stackTrace),t+1>=r&&(n!==p&&(a=void 0,l=[i]),e.rejectWith(a,l))}};t?h():(xt.Deferred.getStackHook&&(h.stackTrace=xt.Deferred.getStackHook()),i.setTimeout(h))}}var r=0;return xt.Deferred(function(i){e[0][3].add(s(0,i,xt.isFunction(o)?o:m,i.notifyWith)),e[1][3].add(s(0,i,xt.isFunction(t)?t:m)),e[2][3].add(s(0,i,xt.isFunction(n)?n:p))}).promise()},promise:function(t){return null!=t?xt.extend(t,o):o}},s={};return xt.each(e,function(t,i){var r=i[2],a=i[5];o[i[1]]=r.add,a&&r.add(function(){n=a},e[3-t][2].disable,e[0][2].lock),r.add(i[3].fire),s[i[0]]=function(){return s[i[0]+"With"](this===s?void 0:this,arguments),this},s[i[0]+"With"]=r.fireWith}),o.promise(s),t&&t.call(s,s),s},when:function(t){var e=arguments.length,i=e,n=Array(i),o=lt.call(arguments),s=xt.Deferred(),r=function(t){return function(i){n[t]=this,o[t]=arguments.length>1?lt.call(arguments):i,--e||s.resolveWith(n,o)}};if(e<=1&&(f(t,s.done(r(i)).resolve,s.reject,!e),"pending"===s.state()||xt.isFunction(o[i]&&o[i].then)))return s.then();for(;i--;)f(o[i],r(i),s.reject);return s.promise()}});var Vt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;xt.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&Vt.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},xt.readyException=function(t){i.setTimeout(function(){throw t})};var kt=xt.Deferred();xt.fn.ready=function(t){return kt.then(t).catch(function(t){xt.readyException(t)}),this},xt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--xt.readyWait:xt.isReady)||(xt.isReady=!0,!0!==t&&--xt.readyWait>0||kt.resolveWith(rt,[xt]))}}),xt.ready.then=kt.then,"complete"===rt.readyState||"loading"!==rt.readyState&&!rt.documentElement.doScroll?i.setTimeout(xt.ready):(rt.addEventListener("DOMContentLoaded",_),i.addEventListener("load",_));var Tt=function(t,e,i,n,o,s,r){var a=0,l=t.length,c=null==i;if("object"===xt.type(i)){o=!0;for(a in i)Tt(t,e,a,i[a],!0,s,r)}else if(void 0!==n&&(o=!0,xt.isFunction(n)||(r=!0),c&&(r?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(xt(t),i)})),e))for(;a<l;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return o?t:c?e.call(t):l?e(t[0],i):s},Lt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};y.uid=1,y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Lt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,o=this.cache(t);if("string"==typeof e)o[xt.camelCase(e)]=i;else for(n in e)o[xt.camelCase(n)]=e[n];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][xt.camelCase(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){Array.isArray(e)?e=e.map(xt.camelCase):(e=xt.camelCase(e),e=e in n?[e]:e.match(Pt)||[]),i=e.length;for(;i--;)delete n[e[i]]}(void 0===e||xt.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!xt.isEmptyObject(e)}};var Et=new y,Ft=new y,Rt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Gt=/[A-Z]/g;xt.extend({hasData:function(t){return Ft.hasData(t)||Et.hasData(t)},data:function(t,e,i){return Ft.access(t,e,i)},removeData:function(t,e){Ft.remove(t,e)},_data:function(t,e,i){return Et.access(t,e,i)},_removeData:function(t,e){Et.remove(t,e)}}),xt.fn.extend({data:function(t,e){var i,n,o,s=this[0],r=s&&s.attributes;if(void 0===t){if(this.length&&(o=Ft.get(s),1===s.nodeType&&!Et.get(s,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=xt.camelCase(n.slice(5)),x(s,n,o[n])));Et.set(s,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){Ft.set(this,t)}):Tt(this,function(e){var i;if(s&&void 0===e){if(void 0!==(i=Ft.get(s,t)))return i;if(void 0!==(i=x(s,t)))return i}else this.each(function(){Ft.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Ft.remove(this,t)})}}),xt.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Et.get(t,e),i&&(!n||Array.isArray(i)?n=Et.access(t,e,xt.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=xt.queue(t,e),n=i.length,o=i.shift(),s=xt._queueHooks(t,e),r=function(){xt.dequeue(t,e)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete s.stop,o.call(t,r,s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Et.get(t,i)||Et.access(t,i,{empty:xt.Callbacks("once memory").add(function(){Et.remove(t,[e+"queue",i])})})}}),xt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?xt.queue(this[0],t):void 0===e?this:this.each(function(){var i=xt.queue(this,t,e);xt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&xt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){xt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=xt.Deferred(),s=this,r=this.length,a=function(){--n||o.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(i=Et.get(s[r],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var Nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Jt=new RegExp("^(?:([+-])=|)("+Nt+")([a-z%]*)$","i"),Ot=["Top","Right","Bottom","Left"],jt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&xt.contains(t.ownerDocument,t)&&"none"===xt.css(t,"display")},qt=function(t,e,i,n){var o,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];o=i.apply(t,n||[]);for(s in e)t.style[s]=r[s];return o},zt={};xt.fn.extend({show:function(){return g(this,!0)},hide:function(){return g(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){jt(this)?xt(this).show():xt(this).hide()})}});var Ht=/^(?:checkbox|radio)$/i,Ut=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Wt=/^$|\/(?:java|ecma)script/i,$t={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$t.optgroup=$t.option,$t.tbody=$t.tfoot=$t.colgroup=$t.caption=$t.thead,$t.th=$t.td;var Kt=/<|&#?\w+;/;!function(){var t=rt.createDocumentFragment(),e=t.appendChild(rt.createElement("div")),i=rt.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),dt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",dt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Xt=rt.documentElement,Zt=/^key/,Yt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Qt=/^([^.]*)(?:\.(.+)|)/;xt.event={global:{},add:function(t,e,i,n,o){var s,r,a,l,c,h,u,m,p,f,_,y=Et.get(t);if(y)for(i.handler&&(s=i,i=s.handler,o=s.selector),o&&xt.find.matchesSelector(Xt,o),i.guid||(i.guid=xt.guid++),(l=y.events)||(l=y.events={}),(r=y.handle)||(r=y.handle=function(e){return void 0!==xt&&xt.event.triggered!==e.type?xt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Pt)||[""],c=e.length;c--;)a=Qt.exec(e[c])||[],p=_=a[1],f=(a[2]||"").split(".").sort(),p&&(u=xt.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=xt.event.special[p]||{},h=xt.extend({type:p,origType:_,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&xt.expr.match.needsContext.test(o),namespace:f.join(".")},s),(m=l[p])||(m=l[p]=[],m.delegateCount=0,u.setup&&!1!==u.setup.call(t,n,f,r)||t.addEventListener&&t.addEventListener(p,r)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),o?m.splice(m.delegateCount++,0,h):m.push(h),xt.event.global[p]=!0)},remove:function(t,e,i,n,o){var s,r,a,l,c,h,u,m,p,f,_,y=Et.hasData(t)&&Et.get(t);if(y&&(l=y.events)){for(e=(e||"").match(Pt)||[""],c=e.length;c--;)if(a=Qt.exec(e[c])||[],p=_=a[1],f=(a[2]||"").split(".").sort(),p){for(u=xt.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,m=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=m.length;s--;)h=m[s],!o&&_!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(m.splice(s,1),h.selector&&m.delegateCount--,u.remove&&u.remove.call(t,h));r&&!m.length&&(u.teardown&&!1!==u.teardown.call(t,f,y.handle)||xt.removeEvent(t,p,y.handle),delete l[p])}else for(p in l)xt.event.remove(t,p+e[c],i,n,!0);xt.isEmptyObject(l)&&Et.remove(t,"handle events")}},dispatch:function(t){var e,i,n,o,s,r,a=xt.event.fix(t),l=new Array(arguments.length),c=(Et.get(this,"events")||{})[a.type]||[],h=xt.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(r=xt.event.handlers.call(this,a,c),e=0;(o=r[e++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(n=((xt.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,l))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(t,e){var i,n,o,s,r,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(s=[],r={},i=0;i<l;i++)n=e[i],o=n.selector+" ",void 0===r[o]&&(r[o]=n.needsContext?xt(o,this).index(c)>-1:xt.find(o,this,null,[c]).length),r[o]&&s.push(n);s.length&&a.push({elem:c,handlers:s})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(xt.Event.prototype,t,{enumerable:!0,configurable:!0,get:xt.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[xt.expando]?t:new xt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==B()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===B()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&l(this,"input"))return this.click(),!1},_default:function(t){return l(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},xt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},xt.Event=function(t,e){if(!(this instanceof xt.Event))return new xt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?A:D,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&xt.extend(this,e),this.timeStamp=t&&t.timeStamp||xt.now(),this[xt.expando]=!0},xt.Event.prototype={constructor:xt.Event,isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=A,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=A,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=A,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},xt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Zt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Yt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},xt.event.addProp),xt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){xt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,s=t.handleObj;return o&&(o===n||xt.contains(n,o))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),xt.fn.extend({on:function(t,e,i,n){return M(this,t,e,i,n)},one:function(t,e,i,n){return M(this,t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,xt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=D),this.each(function(){xt.event.remove(this,t,i,e)})}});var te=/<script|<style|<link/i,ee=/checked\s*(?:[^=]|=\s*.checked.)/i,ie=/^true\/(.*)/,ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;xt.extend({htmlPrefilter:function(t){return t.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,"<$1></$2>")},clone:function(t,e,i){var n,o,s,r,a=t.cloneNode(!0),l=xt.contains(t.ownerDocument,t);if(!(dt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||xt.isXMLDoc(t)))for(r=C(a),s=C(t),n=0,o=s.length;n<o;n++)T(s[n],r[n]);if(e)if(i)for(s=s||C(t),r=r||C(a),n=0,o=s.length;n<o;n++)k(s[n],r[n]);else k(t,a);return r=C(a,"script"),r.length>0&&w(r,!l&&C(t,"script")),a},cleanData:function(t){for(var e,i,n,o=xt.event.special,s=0;void 0!==(i=t[s]);s++)if(Lt(i)){if(e=i[Et.expando]){if(e.events)for(n in e.events)o[n]?xt.event.remove(i,n):xt.removeEvent(i,n,e.handle);i[Et.expando]=void 0}i[Ft.expando]&&(i[Ft.expando]=void 0)}}}),xt.fn.extend({detach:function(t){return E(this,t,!0)},remove:function(t){return E(this,t)},text:function(t){return Tt(this,function(t){return void 0===t?xt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return L(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){I(this,t).appendChild(t)}})},prepend:function(){return L(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=I(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return L(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return L(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(xt.cleanData(C(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return xt.clone(this,t,e)})},html:function(t){return Tt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!te.test(t)&&!$t[(Ut.exec(t)||["",""])[1].toLowerCase()]){t=xt.htmlPrefilter(t);try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(xt.cleanData(C(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return L(this,arguments,function(e){var i=this.parentNode;xt.inArray(this,t)<0&&(xt.cleanData(C(this)),i&&i.replaceChild(e,this))},t)}}),xt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){xt.fn[t]=function(t){for(var i,n=[],o=xt(t),s=o.length-1,r=0;r<=s;r++)i=r===s?this:this.clone(!0),xt(o[r])[e](i),ht.apply(n,i.get());return this.pushStack(n)}});var oe=/^margin/,se=new RegExp("^("+Nt+")(?!px)[a-z%]+$","i"),re=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)};!function(){function t(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Xt.appendChild(r);var t=i.getComputedStyle(a);e="1%"!==t.top,s="2px"===t.marginLeft,n="4px"===t.width,a.style.marginRight="50%",o="4px"===t.marginRight,Xt.removeChild(r),a=null}}var e,n,o,s,r=rt.createElement("div"),a=rt.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",dt.clearCloneStyle="content-box"===a.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(a),xt.extend(dt,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return t(),n},pixelMarginRight:function(){return t(),o},reliableMarginLeft:function(){return t(),s}}))}();var ae=/^(none|table(?!-c[ea]).+)/,le=/^--/,ce={position:"absolute",visibility:"hidden",display:"block"},he={letterSpacing:"0",fontWeight:"400"},ue=["Webkit","Moz","ms"],me=rt.createElement("div").style;xt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=F(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,r,a=xt.camelCase(e),l=le.test(e),c=t.style;if(l||(e=N(a)),r=xt.cssHooks[e]||xt.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(o=r.get(t,!1,n))?o:c[e];s=typeof i,"string"===s&&(o=Jt.exec(i))&&o[1]&&(i=v(t,e,o),s="number"),null!=i&&i===i&&("number"===s&&(i+=o&&o[3]||(xt.cssNumber[a]?"":"px")),dt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),r&&"set"in r&&void 0===(i=r.set(t,i,n))||(l?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,n){var o,s,r,a=xt.camelCase(e);return le.test(e)||(e=N(a)),r=xt.cssHooks[e]||xt.cssHooks[a],r&&"get"in r&&(o=r.get(t,!0,i)),void 0===o&&(o=F(t,e,n)),"normal"===o&&e in he&&(o=he[e]),""===i||i?(s=parseFloat(o),!0===i||isFinite(s)?s||0:o):o}}),xt.each(["height","width"],function(t,e){xt.cssHooks[e]={get:function(t,i,n){if(i)return!ae.test(xt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?j(t,e,n):qt(t,ce,function(){return j(t,e,n)})},set:function(t,i,n){var o,s=n&&re(t),r=n&&O(t,e,n,"border-box"===xt.css(t,"boxSizing",!1,s),s);return r&&(o=Jt.exec(i))&&"px"!==(o[3]||"px")&&(t.style[e]=i,i=xt.css(t,e)),J(t,i,r)}}}),xt.cssHooks.marginLeft=R(dt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(F(t,"marginLeft"))||t.getBoundingClientRect().left-qt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),xt.each({margin:"",padding:"",border:"Width"},function(t,e){xt.cssHooks[t+e]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];n<4;n++)o[t+Ot[n]+e]=s[n]||s[n-2]||s[0];return o}},oe.test(t)||(xt.cssHooks[t+e].set=J)}),xt.fn.extend({css:function(t,e){return Tt(this,function(t,e,i){var n,o,s={},r=0;if(Array.isArray(e)){for(n=re(t),o=e.length;r<o;r++)s[e[r]]=xt.css(t,e[r],!1,n);return s}return void 0!==i?xt.style(t,e,i):xt.css(t,e)},t,e,arguments.length>1)}}),xt.Tween=q,q.prototype={constructor:q,init:function(t,e,i,n,o,s){this.elem=t,this.prop=i,this.easing=o||xt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(xt.cssNumber[i]?"":"px")},cur:function(){var t=q.propHooks[this.prop];return t&&t.get?t.get(this):q.propHooks._default.get(this)},run:function(t){var e,i=q.propHooks[this.prop];return this.options.duration?this.pos=e=xt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):q.propHooks._default.set(this),this}},q.prototype.init.prototype=q.prototype,q.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=xt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){xt.fx.step[t.prop]?xt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[xt.cssProps[t.prop]]&&!xt.cssHooks[t.prop]?t.elem[t.prop]=t.now:xt.style(t.elem,t.prop,t.now+t.unit)}}},q.propHooks.scrollTop=q.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},xt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},xt.fx=q.prototype.init,xt.fx.step={};var pe,fe,_e=/^(?:toggle|show|hide)$/,ye=/queueHooks$/;xt.Animation=xt.extend(X,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return v(i.elem,t,Jt.exec(e),i),i}]},tweener:function(t,e){xt.isFunction(t)?(e=t,t=["*"]):t=t.match(Pt);for(var i,n=0,o=t.length;n<o;n++)i=t[n],X.tweeners[i]=X.tweeners[i]||[],X.tweeners[i].unshift(e)},prefilters:[$],prefilter:function(t,e){e?X.prefilters.unshift(t):X.prefilters.push(t)}}),xt.speed=function(t,e,i){var n=t&&"object"==typeof t?xt.extend({},t):{complete:i||!i&&e||xt.isFunction(t)&&t,duration:t,easing:i&&e||e&&!xt.isFunction(e)&&e};return xt.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in xt.fx.speeds?n.duration=xt.fx.speeds[n.duration]:n.duration=xt.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){xt.isFunction(n.old)&&n.old.call(this),n.queue&&xt.dequeue(this,n.queue)},n},xt.fn.extend({fadeTo:function(t,e,i,n){return this.filter(jt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=xt.isEmptyObject(t),s=xt.speed(e,i,n),r=function(){var e=X(this,xt.extend({},t),s);(o||Et.get(this,"finish"))&&e.stop(!0)};return r.finish=r,o||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",s=xt.timers,r=Et.get(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&ye.test(o)&&n(r[o]);for(o=s.length;o--;)s[o].elem!==this||null!=t&&s[o].queue!==t||(s[o].anim.stop(i),e=!1,s.splice(o,1));!e&&i||xt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=Et.get(this),n=i[t+"queue"],o=i[t+"queueHooks"],s=xt.timers,r=n?n.length:0;for(i.finish=!0,xt.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),xt.each(["toggle","show","hide"],function(t,e){var i=xt.fn[e];xt.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(U(e,!0),t,n,o)}}),xt.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){xt.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),xt.timers=[],xt.fx.tick=function(){var t,e=0,i=xt.timers;for(pe=xt.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||xt.fx.stop(),pe=void 0},xt.fx.timer=function(t){xt.timers.push(t),xt.fx.start()},xt.fx.interval=13,xt.fx.start=function(){fe||(fe=!0,z())},xt.fx.stop=function(){fe=null},xt.fx.speeds={slow:600,fast:200,_default:400},xt.fn.delay=function(t,e){return t=xt.fx?xt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var o=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(o)}})},function(){var t=rt.createElement("input"),e=rt.createElement("select"),i=e.appendChild(rt.createElement("option"));t.type="checkbox",dt.checkOn=""!==t.value,dt.optSelected=i.selected,t=rt.createElement("input"),t.value="t",t.type="radio",dt.radioValue="t"===t.value}();var de,xe=xt.expr.attrHandle;xt.fn.extend({attr:function(t,e){return Tt(this,xt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){xt.removeAttr(this,t)})}}),xt.extend({attr:function(t,e,i){var n,o,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?xt.prop(t,e,i):(1===s&&xt.isXMLDoc(t)||(o=xt.attrHooks[e.toLowerCase()]||(xt.expr.match.bool.test(e)?de:void 0)),void 0!==i?null===i?void xt.removeAttr(t,e):o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:(t.setAttribute(e,i+""),i):o&&"get"in o&&null!==(n=o.get(t,e))?n:(n=xt.find.attr(t,e),null==n?void 0:n))},attrHooks:{type:{set:function(t,e){if(!dt.radioValue&&"radio"===e&&l(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,o=e&&e.match(Pt);if(o&&1===t.nodeType)for(;i=o[n++];)t.removeAttribute(i)}}),de={set:function(t,e,i){return!1===e?xt.removeAttr(t,i):t.setAttribute(i,i),i}},xt.each(xt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=xe[e]||xt.find.attr;xe[e]=function(t,e,n){var o,s,r=e.toLowerCase();return n||(s=xe[r],xe[r]=o,o=null!=i(t,e,n)?r:null,xe[r]=s),o}});var ve=/^(?:input|select|textarea|button)$/i,be=/^(?:a|area)$/i;xt.fn.extend({prop:function(t,e){return Tt(this,xt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[xt.propFix[t]||t]})}}),xt.extend({prop:function(t,e,i){var n,o,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&xt.isXMLDoc(t)||(e=xt.propFix[e]||e,o=xt.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=xt.find.attr(t,"tabindex");return e?parseInt(e,10):ve.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),dt.optSelected||(xt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),xt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){xt.propFix[this.toLowerCase()]=this}),xt.fn.extend({addClass:function(t){var e,i,n,o,s,r,a,l=0;if(xt.isFunction(t))return this.each(function(e){xt(this).addClass(t.call(this,e,Y(this)))});if("string"==typeof t&&t)for(e=t.match(Pt)||[];i=this[l++];)if(o=Y(i),n=1===i.nodeType&&" "+Z(o)+" "){for(r=0;s=e[r++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");a=Z(n),o!==a&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,o,s,r,a,l=0;if(xt.isFunction(t))return this.each(function(e){xt(this).removeClass(t.call(this,e,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Pt)||[];i=this[l++];)if(o=Y(i),n=1===i.nodeType&&" "+Z(o)+" "){for(r=0;s=e[r++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");a=Z(n),o!==a&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):xt.isFunction(t)?this.each(function(i){xt(this).toggleClass(t.call(this,i,Y(this),e),e)}):this.each(function(){var e,n,o,s;if("string"===i)for(n=0,o=xt(this),s=t.match(Pt)||[];e=s[n++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==i||(e=Y(this),e&&Et.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Et.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+Z(Y(i))+" ").indexOf(e)>-1)return!0;return!1}});xt.fn.extend({val:function(t){var e,i,n,o=this[0];{if(arguments.length)return n=xt.isFunction(t),this.each(function(i){var o;1===this.nodeType&&(o=n?t.call(this,i,xt(this).val()):t,null==o?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=xt.map(o,function(t){return null==t?"":t+""})),(e=xt.valHooks[this.type]||xt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return(e=xt.valHooks[o.type]||xt.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(/\r/g,""):null==i?"":i)}}}),xt.extend({valHooks:{option:{get:function(t){var e=xt.find.attr(t,"value");return null!=e?e:Z(xt.text(t))}},select:{get:function(t){var e,i,n,o=t.options,s=t.selectedIndex,r="select-one"===t.type,a=r?null:[],c=r?s+1:o.length;for(n=s<0?c:r?s:0;n<c;n++)if(i=o[n],(i.selected||n===s)&&!i.disabled&&(!i.parentNode.disabled||!l(i.parentNode,"optgroup"))){if(e=xt(i).val(),r)return e;a.push(e)}return a},set:function(t,e){for(var i,n,o=t.options,s=xt.makeArray(e),r=o.length;r--;)n=o[r],(n.selected=xt.inArray(xt.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),xt.each(["radio","checkbox"],function(){xt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=xt.inArray(xt(t).val(),e)>-1}},dt.checkOn||(xt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ge=/^(?:focusinfocus|focusoutblur)$/;xt.extend(xt.event,{trigger:function(t,e,n,o){var s,r,a,l,c,h,u,m=[n||rt],p=ft.call(t,"type")?t.type:t,f=ft.call(t,"namespace")?t.namespace.split("."):[];if(r=a=n=n||rt,3!==n.nodeType&&8!==n.nodeType&&!ge.test(p+xt.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[xt.expando]?t:new xt.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:xt.makeArray(e,[t]),u=xt.event.special[p]||{},o||!u.trigger||!1!==u.trigger.apply(n,e))){if(!o&&!u.noBubble&&!xt.isWindow(n)){for(l=u.delegateType||p,ge.test(l+p)||(r=r.parentNode);r;r=r.parentNode)m.push(r),a=r;a===(n.ownerDocument||rt)&&m.push(a.defaultView||a.parentWindow||i)}for(s=0;(r=m[s++])&&!t.isPropagationStopped();)t.type=s>1?l:u.bindType||p,h=(Et.get(r,"events")||{})[t.type]&&Et.get(r,"handle"),h&&h.apply(r,e),(h=c&&r[c])&&h.apply&&Lt(r)&&(t.result=h.apply(r,e),!1===t.result&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(m.pop(),e)||!Lt(n)||c&&xt.isFunction(n[p])&&!xt.isWindow(n)&&(a=n[c],a&&(n[c]=null),xt.event.triggered=p,n[p](),xt.event.triggered=void 0,a&&(n[c]=a)),t.result}},simulate:function(t,e,i){var n=xt.extend(new xt.Event,i,{type:t,isSimulated:!0});xt.event.trigger(n,null,e)}}),xt.fn.extend({trigger:function(t,e){return this.each(function(){xt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return xt.event.trigger(t,e,i,!0)}}),xt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){xt.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),xt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),dt.focusin="onfocusin"in i,dt.focusin||xt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){xt.event.simulate(e,t.target,xt.event.fix(t))};xt.event.special[e]={setup:function(){var n=this.ownerDocument||this,o=Et.access(n,e);o||n.addEventListener(t,i,!0),Et.access(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=Et.access(n,e)-1;o?Et.access(n,e,o):(n.removeEventListener(t,i,!0),Et.remove(n,e))}}});var Ce=i.location,we=xt.now(),Se=/\?/;xt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||xt.error("Invalid XML: "+t),e};var Ae=/\[\]$/,De=/^(?:submit|button|image|reset|file)$/i,Be=/^(?:input|select|textarea|keygen)/i;xt.param=function(t,e){var i,n=[],o=function(t,e){var i=xt.isFunction(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(t)||t.jquery&&!xt.isPlainObject(t))xt.each(t,function(){o(this.name,this.value)});else for(i in t)Q(i,t[i],e,o);return n.join("&")},xt.fn.extend({serialize:function(){return xt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=xt.prop(this,"elements");return t?xt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!xt(this).is(":disabled")&&Be.test(this.nodeName)&&!De.test(t)&&(this.checked||!Ht.test(t))}).map(function(t,e){var i=xt(this).val();return null==i?null:Array.isArray(i)?xt.map(i,function(t){return{name:e.name,value:t.replace(/\r?\n/g,"\r\n")}}):{name:e.name,value:i.replace(/\r?\n/g,"\r\n")}}).get()}});var Me=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ie=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pe=/^(?:GET|HEAD)$/,Ve={},ke={},Te="*/".concat("*"),Le=rt.createElement("a");Le.href=Ce.href,xt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:Ie.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Te,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":xt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?it(it(t,xt.ajaxSettings),e):it(xt.ajaxSettings,t)},ajaxPrefilter:tt(Ve),ajaxTransport:tt(ke),ajax:function(t,e){function n(t,e,n,a){var c,m,p,b,g,C=e;h||(h=!0,l&&i.clearTimeout(l),o=void 0,r=a||"",w.readyState=t>0?4:0,c=t>=200&&t<300||304===t,n&&(b=nt(f,w,n)),b=ot(f,b,w,c),c?(f.ifModified&&(g=w.getResponseHeader("Last-Modified"),g&&(xt.lastModified[s]=g),(g=w.getResponseHeader("etag"))&&(xt.etag[s]=g)),204===t||"HEAD"===f.type?C="nocontent":304===t?C="notmodified":(C=b.state,m=b.data,p=b.error,c=!p)):(p=C,!t&&C||(C="error",t<0&&(t=0))),w.status=t,w.statusText=(e||C)+"",c?d.resolveWith(_,[m,C,w]):d.rejectWith(_,[w,C,p]),w.statusCode(v),v=void 0,u&&y.trigger(c?"ajaxSuccess":"ajaxError",[w,f,c?m:p]),x.fireWith(_,[w,C]),u&&(y.trigger("ajaxComplete",[w,f]),--xt.active||xt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var o,s,r,a,l,c,h,u,m,p,f=xt.ajaxSetup({},e),_=f.context||f,y=f.context&&(_.nodeType||_.jquery)?xt(_):xt.event,d=xt.Deferred(),x=xt.Callbacks("once memory"),v=f.statusCode||{},b={},g={},C="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(h){if(!a)for(a={};e=Me.exec(r);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return h?r:null},setRequestHeader:function(t,e){return null==h&&(t=g[t.toLowerCase()]=g[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==h&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(h)w.always(t[w.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||C;return o&&o.abort(e),n(0,e),this}};if(d.promise(w),f.url=((t||f.url||Ce.href)+"").replace(/^\/\//,Ce.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Pt)||[""],null==f.crossDomain){c=rt.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Le.protocol+"//"+Le.host!=c.protocol+"//"+c.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=xt.param(f.data,f.traditional)),et(Ve,f,e,w),h)return w;u=xt.event&&f.global,u&&0==xt.active++&&xt.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Pe.test(f.type),s=f.url.replace(/#.*$/,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(/%20/g,"+")):(p=f.url.slice(s.length),f.data&&(s+=(Se.test(s)?"&":"?")+f.data,delete f.data),!1===f.cache&&(s=s.replace(/([?&])_=[^&]*/,"$1"),p=(Se.test(s)?"&":"?")+"_="+we+++p),f.url=s+p),f.ifModified&&(xt.lastModified[s]&&w.setRequestHeader("If-Modified-Since",xt.lastModified[s]),xt.etag[s]&&w.setRequestHeader("If-None-Match",xt.etag[s])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Te+"; q=0.01":""):f.accepts["*"]);for(m in f.headers)w.setRequestHeader(m,f.headers[m]);if(f.beforeSend&&(!1===f.beforeSend.call(_,w,f)||h))return w.abort();if(C="abort",x.add(f.complete),w.done(f.success),w.fail(f.error),o=et(ke,f,e,w)){if(w.readyState=1,u&&y.trigger("ajaxSend",[w,f]),h)return w;f.async&&f.timeout>0&&(l=i.setTimeout(function(){w.abort("timeout")},f.timeout));try{h=!1,o.send(b,n)}catch(t){if(h)throw t;n(-1,t)}}else n(-1,"No Transport");return w},getJSON:function(t,e,i){return xt.get(t,e,i,"json")},getScript:function(t,e){return xt.get(t,void 0,e,"script")}}),xt.each(["get","post"],function(t,e){xt[e]=function(t,i,n,o){return xt.isFunction(i)&&(o=o||n,n=i,i=void 0),xt.ajax(xt.extend({url:t,type:e,dataType:o,data:i,success:n},xt.isPlainObject(t)&&t))}}),xt._evalUrl=function(t){return xt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},xt.fn.extend({wrapAll:function(t){var e;return this[0]&&(xt.isFunction(t)&&(t=t.call(this[0])),e=xt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return xt.isFunction(t)?this.each(function(e){xt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=xt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=xt.isFunction(t);return this.each(function(i){xt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){xt(this).replaceWith(this.childNodes)}),this}}),xt.expr.pseudos.hidden=function(t){return!xt.expr.pseudos.visible(t)},xt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},xt.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Ee={0:200,1223:204},Fe=xt.ajaxSettings.xhr();dt.cors=!!Fe&&"withCredentials"in Fe,dt.ajax=Fe=!!Fe,xt.ajaxTransport(function(t){var e,n;if(dt.cors||Fe&&!t.crossDomain)return{send:function(o,s){var r,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)a[r]=t.xhrFields[r];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(r in o)a.setRequestHeader(r,o[r]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Ee[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout(function(){e&&n()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),xt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),xt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return xt.globalEval(t),t}}}),xt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),xt.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,o){e=xt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&o("error"===t.type?404:200,t.type)}),rt.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Re=[],Ge=/(=)\?(?=&|$)|\?\?/;xt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Re.pop()||xt.expando+"_"+we++;return this[t]=!0,t}}),xt.ajaxPrefilter("json jsonp",function(t,e,n){var o,s,r,a=!1!==t.jsonp&&(Ge.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ge.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=xt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ge,"$1"+o):!1!==t.jsonp&&(t.url+=(Se.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return r||xt.error(o+" was not called"),r[0]},t.dataTypes[0]="json",s=i[o],i[o]=function(){r=arguments},n.always(function(){void 0===s?xt(i).removeProp(o):i[o]=s,t[o]&&(t.jsonpCallback=e.jsonpCallback,Re.push(o)),r&&xt.isFunction(s)&&s(r[0]),r=s=void 0}),"script"}),dt.createHTMLDocument=function(){var t=rt.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),xt.parseHTML=function(t,e,i){if("string"!=typeof t)return[];"boolean"==typeof e&&(i=e,e=!1);var n,o,s;return e||(dt.createHTMLDocument?(e=rt.implementation.createHTMLDocument(""),n=e.createElement("base"),n.href=rt.location.href,e.head.appendChild(n)):e=rt),o=St.exec(t),s=!i&&[],o?[e.createElement(o[1])]:(o=S([t],e,s),s&&s.length&&xt(s).remove(),xt.merge([],o.childNodes))},xt.fn.load=function(t,e,i){var n,o,s,r=this,a=t.indexOf(" ");return a>-1&&(n=Z(t.slice(a)),t=t.slice(0,a)),xt.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),r.length>0&&xt.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){s=arguments,r.html(n?xt("<div>").append(xt.parseHTML(t)).find(n):t)}).always(i&&function(t,e){r.each(function(){i.apply(this,s||[t.responseText,e,t])})}),this},xt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){xt.fn[e]=function(t){return this.on(e,t)}}),xt.expr.pseudos.animated=function(t){return xt.grep(xt.timers,function(e){return t===e.elem}).length},xt.offset={setOffset:function(t,e,i){var n,o,s,r,a,l,c,h=xt.css(t,"position"),u=xt(t),m={};"static"===h&&(t.style.position="relative"),a=u.offset(),s=xt.css(t,"top"),l=xt.css(t,"left"),c=("absolute"===h||"fixed"===h)&&(s+l).indexOf("auto")>-1,c?(n=u.position(),r=n.top,o=n.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),xt.isFunction(e)&&(e=e.call(t,i,xt.extend({},a))),null!=e.top&&(m.top=e.top-a.top+r),null!=e.left&&(m.left=e.left-a.left+o),"using"in e?e.using.call(t,m):u.css(m)}},xt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){xt.offset.setOffset(this,t,e)});var e,i,n,o,s=this[0];if(s)return s.getClientRects().length?(n=s.getBoundingClientRect(),e=s.ownerDocument,i=e.documentElement,o=e.defaultView,{top:n.top+o.pageYOffset-i.clientTop,left:n.left+o.pageXOffset-i.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===xt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),l(t[0],"html")||(n=t.offset()),n={top:n.top+xt.css(t[0],"borderTopWidth",!0),left:n.left+xt.css(t[0],"borderLeftWidth",!0)}),{top:e.top-n.top-xt.css(i,"marginTop",!0),left:e.left-n.left-xt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===xt.css(t,"position");)t=t.offsetParent;return t||Xt})}}),xt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;xt.fn[t]=function(n){return Tt(this,function(t,n,o){var s;if(xt.isWindow(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===o)return s?s[e]:t[n];s?s.scrollTo(i?s.pageXOffset:o,i?o:s.pageYOffset):t[n]=o},t,n,arguments.length)}}),xt.each(["top","left"],function(t,e){xt.cssHooks[e]=R(dt.pixelPosition,function(t,i){if(i)return i=F(t,e),se.test(i)?xt(t).position()[e]+"px":i})}),xt.each({Height:"height",Width:"width"},function(t,e){xt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){xt.fn[n]=function(o,s){var r=arguments.length&&(i||"boolean"!=typeof o),a=i||(!0===o||!0===s?"margin":"border");return Tt(this,function(e,i,o){var s;return xt.isWindow(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===o?xt.css(e,i,a):xt.style(e,i,o,a)},e,r?o:void 0,r)}})}),xt.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),xt.holdReady=function(t){t?xt.readyWait++:xt.ready(!0)},xt.isArray=Array.isArray,xt.parseJSON=JSON.parse,xt.nodeName=l,n=[],void 0!==(o=function(){return xt}.apply(e,n))&&(t.exports=o);var Ne=i.jQuery,Je=i.$;return xt.noConflict=function(t){return i.$===xt&&(i.$=Je),t&&i.jQuery===xt&&(i.jQuery=Ne),xt},s||(i.jQuery=i.$=xt),xt})},function(t,e,i){var n,o;(function(){function i(t){function e(e,i,n,o,s,r){for(;s>=0&&s<r;s+=t){var a=o?o[s]:s;n=i(n,e[a],a,e)}return n}return function(i,n,o,s){n=w(n,s,4);var r=!P(i)&&C.keys(i),a=(r||i).length,l=t>0?0:a-1;return arguments.length<3&&(o=i[r?r[l]:l],l+=t),e(i,n,o,r,l,a)}}function s(t){return function(e,i,n){i=S(i,n);for(var o=I(e),s=t>0?0:o-1;s>=0&&s<o;s+=t)if(i(e[s],s,e))return s;return-1}}function r(t,e,i){return function(n,o,s){var r=0,a=I(n);if("number"==typeof s)t>0?r=s>=0?s:Math.max(s+a,r):a=s>=0?Math.min(s+1,a):s+a+1;else if(i&&s&&a)return s=i(n,o),n[s]===o?s:-1;if(o!==o)return s=e(f.call(n,r,a),C.isNaN),s>=0?s+r:-1;for(s=t>0?r:a-1;s>=0&&s<a;s+=t)if(n[s]===o)return s;return-1}}function a(t,e){var i=E.length,n=t.constructor,o=C.isFunction(n)&&n.prototype||u,s="constructor";for(C.has(t,s)&&!C.contains(e,s)&&e.push(s);i--;)(s=E[i])in t&&t[s]!==o[s]&&!C.contains(e,s)&&e.push(s)}var l=this,c=l._,h=Array.prototype,u=Object.prototype,m=Function.prototype,p=h.push,f=h.slice,_=u.toString,y=u.hasOwnProperty,d=Array.isArray,x=Object.keys,v=m.bind,b=Object.create,g=function(){},C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};void 0!==t&&t.exports&&(e=t.exports=C),e._=C,C.VERSION="1.8.3";var w=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)};case 4:return function(i,n,o,s){return t.call(e,i,n,o,s)}}return function(){return t.apply(e,arguments)}},S=function(t,e,i){return null==t?C.identity:C.isFunction(t)?w(t,e,i):C.isObject(t)?C.matcher(t):C.property(t)};C.iteratee=function(t,e){return S(t,e,1/0)};var A=function(t,e){return function(i){var n=arguments.length;if(n<2||null==i)return i;for(var o=1;o<n;o++)for(var s=arguments[o],r=t(s),a=r.length,l=0;l<a;l++){var c=r[l];e&&void 0!==i[c]||(i[c]=s[c])}return i}},D=function(t){if(!C.isObject(t))return{};if(b)return b(t);g.prototype=t;var e=new g;return g.prototype=null,e},B=function(t){return function(e){return null==e?void 0:e[t]}},M=Math.pow(2,53)-1,I=B("length"),P=function(t){var e=I(t);return"number"==typeof e&&e>=0&&e<=M};C.each=C.forEach=function(t,e,i){e=w(e,i);var n,o;if(P(t))for(n=0,o=t.length;n<o;n++)e(t[n],n,t);else{var s=C.keys(t);for(n=0,o=s.length;n<o;n++)e(t[s[n]],s[n],t)}return t},C.map=C.collect=function(t,e,i){e=S(e,i);for(var n=!P(t)&&C.keys(t),o=(n||t).length,s=Array(o),r=0;r<o;r++){var a=n?n[r]:r;s[r]=e(t[a],a,t)}return s},C.reduce=C.foldl=C.inject=i(1),C.reduceRight=C.foldr=i(-1),C.find=C.detect=function(t,e,i){var n;if(void 0!==(n=P(t)?C.findIndex(t,e,i):C.findKey(t,e,i))&&-1!==n)return t[n]},C.filter=C.select=function(t,e,i){var n=[];return e=S(e,i),C.each(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n},C.reject=function(t,e,i){return C.filter(t,C.negate(S(e)),i)},C.every=C.all=function(t,e,i){e=S(e,i);for(var n=!P(t)&&C.keys(t),o=(n||t).length,s=0;s<o;s++){var r=n?n[s]:s;if(!e(t[r],r,t))return!1}return!0},C.some=C.any=function(t,e,i){e=S(e,i);for(var n=!P(t)&&C.keys(t),o=(n||t).length,s=0;s<o;s++){var r=n?n[s]:s;if(e(t[r],r,t))return!0}return!1},C.contains=C.includes=C.include=function(t,e,i,n){return P(t)||(t=C.values(t)),("number"!=typeof i||n)&&(i=0),C.indexOf(t,e,i)>=0},C.invoke=function(t,e){var i=f.call(arguments,2),n=C.isFunction(e);return C.map(t,function(t){var o=n?e:t[e];return null==o?o:o.apply(t,i)})},C.pluck=function(t,e){return C.map(t,C.property(e))},C.where=function(t,e){return C.filter(t,C.matcher(e))},C.findWhere=function(t,e){return C.find(t,C.matcher(e))},C.max=function(t,e,i){var n,o,s=-1/0,r=-1/0;if(null==e&&null!=t){t=P(t)?t:C.values(t);for(var a=0,l=t.length;a<l;a++)(n=t[a])>s&&(s=n)}else e=S(e,i),C.each(t,function(t,i,n){((o=e(t,i,n))>r||o===-1/0&&s===-1/0)&&(s=t,r=o)});return s},C.min=function(t,e,i){var n,o,s=1/0,r=1/0;if(null==e&&null!=t){t=P(t)?t:C.values(t);for(var a=0,l=t.length;a<l;a++)(n=t[a])<s&&(s=n)}else e=S(e,i),C.each(t,function(t,i,n){((o=e(t,i,n))<r||o===1/0&&s===1/0)&&(s=t,r=o)});return s},C.shuffle=function(t){for(var e,i=P(t)?t:C.values(t),n=i.length,o=Array(n),s=0;s<n;s++)e=C.random(0,s),e!==s&&(o[s]=o[e]),o[e]=i[s];return o},C.sample=function(t,e,i){return null==e||i?(P(t)||(t=C.values(t)),t[C.random(t.length-1)]):C.shuffle(t).slice(0,Math.max(0,e))},C.sortBy=function(t,e,i){return e=S(e,i),C.pluck(C.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index}),"value")};var V=function(t){return function(e,i,n){var o={};return i=S(i,n),C.each(e,function(n,s){var r=i(n,s,e);t(o,n,r)}),o}};C.groupBy=V(function(t,e,i){C.has(t,i)?t[i].push(e):t[i]=[e]}),C.indexBy=V(function(t,e,i){t[i]=e}),C.countBy=V(function(t,e,i){C.has(t,i)?t[i]++:t[i]=1}),C.toArray=function(t){return t?C.isArray(t)?f.call(t):P(t)?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:P(t)?t.length:C.keys(t).length},C.partition=function(t,e,i){e=S(e,i);var n=[],o=[];return C.each(t,function(t,i,s){(e(t,i,s)?n:o).push(t)}),[n,o]},C.first=C.head=C.take=function(t,e,i){if(null!=t)return null==e||i?t[0]:C.initial(t,t.length-e)},C.initial=function(t,e,i){return f.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},C.last=function(t,e,i){if(null!=t)return null==e||i?t[t.length-1]:C.rest(t,Math.max(0,t.length-e))},C.rest=C.tail=C.drop=function(t,e,i){return f.call(t,null==e||i?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var k=function(t,e,i,n){for(var o=[],s=0,r=n||0,a=I(t);r<a;r++){var l=t[r];if(P(l)&&(C.isArray(l)||C.isArguments(l))){e||(l=k(l,e,i));var c=0,h=l.length;for(o.length+=h;c<h;)o[s++]=l[c++]}else i||(o[s++]=l)}return o};C.flatten=function(t,e){return k(t,e,!1)},C.without=function(t){return C.difference(t,f.call(arguments,1))},C.uniq=C.unique=function(t,e,i,n){C.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=S(i,n));for(var o=[],s=[],r=0,a=I(t);r<a;r++){var l=t[r],c=i?i(l,r,t):l;e?(r&&s===c||o.push(l),s=c):i?C.contains(s,c)||(s.push(c),o.push(l)):C.contains(o,l)||o.push(l)}return o},C.union=function(){return C.uniq(k(arguments,!0,!0))},C.intersection=function(t){for(var e=[],i=arguments.length,n=0,o=I(t);n<o;n++){var s=t[n];if(!C.contains(e,s)){for(var r=1;r<i&&C.contains(arguments[r],s);r++);r===i&&e.push(s)}}return e},C.difference=function(t){var e=k(arguments,!0,!0,1);return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){return C.unzip(arguments)},C.unzip=function(t){for(var e=t&&C.max(t,I).length||0,i=Array(e),n=0;n<e;n++)i[n]=C.pluck(t,n);return i},C.object=function(t,e){for(var i={},n=0,o=I(t);n<o;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},C.findIndex=s(1),C.findLastIndex=s(-1),C.sortedIndex=function(t,e,i,n){i=S(i,n,1);for(var o=i(e),s=0,r=I(t);s<r;){var a=Math.floor((s+r)/2);i(t[a])<o?s=a+1:r=a}return s},C.indexOf=r(1,C.findIndex,C.sortedIndex),C.lastIndexOf=r(-1,C.findLastIndex),C.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=Array(n),s=0;s<n;s++,t+=i)o[s]=t;return o};var T=function(t,e,i,n,o){if(!(n instanceof e))return t.apply(i,o);var s=D(t.prototype),r=t.apply(s,o);return C.isObject(r)?r:s};C.bind=function(t,e){if(v&&t.bind===v)return v.apply(t,f.call(arguments,1));if(!C.isFunction(t))throw new TypeError("Bind must be called on a function");var i=f.call(arguments,2),n=function(){return T(t,n,e,this,i.concat(f.call(arguments)))};return n},C.partial=function(t){var e=f.call(arguments,1),i=function(){for(var n=0,o=e.length,s=Array(o),r=0;r<o;r++)s[r]=e[r]===C?arguments[n++]:e[r];for(;n<arguments.length;)s.push(arguments[n++]);return T(t,i,this,this,s)};return i},C.bindAll=function(t){var e,i,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(e=1;e<n;e++)i=arguments[e],t[i]=C.bind(t[i],t);return t},C.memoize=function(t,e){var i=function(n){var o=i.cache,s=""+(e?e.apply(this,arguments):n);return C.has(o,s)||(o[s]=t.apply(this,arguments)),o[s]};return i.cache={},i},C.delay=function(t,e){var i=f.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},C.defer=C.partial(C.delay,C,1),C.throttle=function(t,e,i){var n,o,s,r=null,a=0;i||(i={});var l=function(){a=!1===i.leading?0:C.now(),r=null,s=t.apply(n,o),r||(n=o=null)};return function(){var c=C.now();a||!1!==i.leading||(a=c);var h=e-(c-a);return n=this,o=arguments,h<=0||h>e?(r&&(clearTimeout(r),r=null),a=c,s=t.apply(n,o),r||(n=o=null)):r||!1===i.trailing||(r=setTimeout(l,h)),s}},C.debounce=function(t,e,i){var n,o,s,r,a,l=function(){var c=C.now()-r;c<e&&c>=0?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(s,o),n||(s=o=null)))};return function(){s=this,o=arguments,r=C.now();var c=i&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(s,o),s=o=null),a}},C.wrap=function(t,e){return C.partial(e,t)},C.negate=function(t){return function(){return!t.apply(this,arguments)}},C.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},C.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},C.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}},C.once=C.partial(C.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];C.keys=function(t){if(!C.isObject(t))return[];if(x)return x(t);var e=[];for(var i in t)C.has(t,i)&&e.push(i);return L&&a(t,e),e},C.allKeys=function(t){if(!C.isObject(t))return[];var e=[];for(var i in t)e.push(i);return L&&a(t,e),e},C.values=function(t){for(var e=C.keys(t),i=e.length,n=Array(i),o=0;o<i;o++)n[o]=t[e[o]];return n},C.mapObject=function(t,e,i){e=S(e,i);for(var n,o=C.keys(t),s=o.length,r={},a=0;a<s;a++)n=o[a],r[n]=e(t[n],n,t);return r},C.pairs=function(t){for(var e=C.keys(t),i=e.length,n=Array(i),o=0;o<i;o++)n[o]=[e[o],t[e[o]]];return n},C.invert=function(t){for(var e={},i=C.keys(t),n=0,o=i.length;n<o;n++)e[t[i[n]]]=i[n];return e},C.functions=C.methods=function(t){var e=[];for(var i in t)C.isFunction(t[i])&&e.push(i);return e.sort()},C.extend=A(C.allKeys),C.extendOwn=C.assign=A(C.keys),C.findKey=function(t,e,i){e=S(e,i);for(var n,o=C.keys(t),s=0,r=o.length;s<r;s++)if(n=o[s],e(t[n],n,t))return n},C.pick=function(t,e,i){var n,o,s={},r=t;if(null==r)return s;C.isFunction(e)?(o=C.allKeys(r),n=w(e,i)):(o=k(arguments,!1,!1,1),n=function(t,e,i){return e in i},r=Object(r));for(var a=0,l=o.length;a<l;a++){var c=o[a],h=r[c];n(h,c,r)&&(s[c]=h)}return s},C.omit=function(t,e,i){if(C.isFunction(e))e=C.negate(e);else{var n=C.map(k(arguments,!1,!1,1),String);e=function(t,e){return!C.contains(n,e)}}return C.pick(t,e,i)},C.defaults=A(C.allKeys,!0),C.create=function(t,e){var i=D(t);return e&&C.extendOwn(i,e),i},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t},C.isMatch=function(t,e){var i=C.keys(e),n=i.length;if(null==t)return!n;for(var o=Object(t),s=0;s<n;s++){var r=i[s];if(e[r]!==o[r]||!(r in o))return!1}return!0};var F=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var o=_.call(t);if(o!==_.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var s="[object Array]"===o;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var r=t.constructor,a=e.constructor;if(r!==a&&!(C.isFunction(r)&&r instanceof r&&C.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),s){if((l=t.length)!==e.length)return!1;for(;l--;)if(!F(t[l],e[l],i,n))return!1}else{var c,h=C.keys(t);if(l=h.length,C.keys(e).length!==l)return!1;for(;l--;)if(c=h[l],!C.has(e,c)||!F(t[c],e[c],i,n))return!1}return i.pop(),n.pop(),!0};C.isEqual=function(t,e){return F(t,e)},C.isEmpty=function(t){return null==t||(P(t)&&(C.isArray(t)||C.isString(t)||C.isArguments(t))?0===t.length:0===C.keys(t).length)},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=d||function(t){return"[object Array]"===_.call(t)},C.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},C.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){C["is"+t]=function(e){return _.call(e)==="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return C.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(C.isFunction=function(t){return"function"==typeof t||!1}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!==+t},C.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===_.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return null!=t&&y.call(t,e)},C.noConflict=function(){return l._=c,this},C.identity=function(t){return t},C.constant=function(t){return function(){return t}},C.noop=function(){},C.property=B,C.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},C.matcher=C.matches=function(t){return t=C.extendOwn({},t),function(e){return C.isMatch(e,t)}},C.times=function(t,e,i){var n=Array(Math.max(0,t));e=w(e,i,1);for(var o=0;o<t;o++)n[o]=e(o);return n},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},C.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},G=C.invert(R),N=function(t){var e=function(e){return t[e]},i="(?:"+C.keys(t).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(o,e):t}};C.escape=N(R),C.unescape=N(G),C.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),C.isFunction(n)?n.call(t):n};var J=0;C.uniqueId=function(t){var e=++J+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=function(t){return"\\"+O[t]};C.template=function(t,e,i){!e&&i&&(e=i),e=C.defaults({},e,C.templateSettings);var n=RegExp([(e.escape||/(.)^/).source,(e.interpolate||/(.)^/).source,(e.evaluate||/(.)^/).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(n,function(e,i,n,r,a){return s+=t.slice(o,a).replace(/\\|'|\r|\n|\u2028|\u2029/g,j),o=a+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var r=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return r.call(this,t,C)},l=e.variable||"obj";return a.source="function("+l+"){\n"+s+"}",a},C.chain=function(t){var e=C(t);return e._chain=!0,e};var q=function(t,e){return t._chain?C(e).chain():e};C.mixin=function(t){C.each(C.functions(t),function(e){var i=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return p.apply(t,arguments),q(this,i.apply(C,t))}})},C.mixin(C),C.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=h[t];C.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],q(this,i)}}),C.each(["concat","join","slice"],function(t){var e=h[t];C.prototype[t]=function(){return q(this,e.apply(this._wrapped,arguments))}}),C.prototype.value=function(){return this._wrapped},C.prototype.valueOf=C.prototype.toJSON=C.prototype.value,C.prototype.toString=function(){return""+this._wrapped},n=[],void 0!==(o=function(){return C}.apply(e,n))&&(t.exports=o)}).call(this)},,function(t,e){Crafty.c("BattleParticles",{init:function(){this._triggerParticles=!1,this._particleBuffer=[]},battleParticles:function(){return this},getParticleBuffer:function(){return this._particleBuffer},setParticleBuffer:function(t){this._particleBuffer=t},needTriggerParticles:function(){return this._triggerParticles},triggerParticles:function(){this._triggerParticles=!0}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o={blunt:0,slashing:0,piercing:0,fire:0,earth:0,water:0,air:0,light:0,dark:0,poison:0,life:0,death:0},s=function t(e){if(n(this,t),!opts.attacker)throw"Attempting to initialize AttackObject without an attacker";if(!opts.target)throw"Attempting to initialize AttackObject without a defender";this.properties=opts.properties||o,this.target=opts.target,this.attacker=opts.attacker,this.text_fragment=opts.text_fragment};e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i(13);Crafty.c("BattleNPCProjectile",{positionFunction:null,speed:1,init:function(){this.requires("2D, DOM")},battleNPCProjectile:function(t,e){return this.positionFunction=t,this.speed=e||this.speed,this}})},function(t,e,i){"use strict";function n(t,e){return{x:-1*e*t,y:0}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(24),s=i(5);i.d(e,"SlimeStandardAttack",function(){return r}),i.d(e,"SlimeGlobAttack",function(){return a}),i.d(e,"SlimeScatterAttack",function(){return l});var r={effects:[{klass:o.SpawnTextProjectile,positionFunction:n,speed:.03,textOptions:{minLength:7,maxLength:13},effects:[{klass:o.Damage,properties:{blunt:3,slashing:0,piercing:0,fire:0,earth:0,water:0,air:0,light:0,dark:0,poison:0,life:0,death:0}},{klass:o.TriggerAnimation,animation:s.ANIM_HIT},{klass:o.ScreenShake}]},{klass:o.TriggerAnimation,target:"self",animation:s.ANIM_LIGHT_ATTACK},{klass:o.SetCooldown,target:"self",cooldownLength:3400}],cost:0,name:"slime standard attack",startupDelay:1e3},a={effects:[{klass:o.SpawnTextProjectilePhysics,textOptions:{minLength:5,maxLength:8},box2d:{bodyType:"dynamic",density:.1,friction:2,restitution:.2},effects:[{klass:o.Damage,properties:{blunt:3,slashing:0,piercing:0,fire:0,earth:0,water:0,air:0,light:0,dark:0,poison:2,life:0,death:0}},{klass:o.TriggerAnimation,animation:s.ANIM_HIT},{klass:o.ScreenShake}]},{klass:o.TriggerAnimation,target:"self",animation:s.ANIM_HEAVY_ATTACK},{klass:o.SetCooldown,target:"self",cooldownLength:3e3}],cost:0,name:"glob",startupDelay:2e3},l={effects:[{klass:o.SpawnScatterTextProjectilePhysics,count:25,textOptions:{randomString:!0,minLength:1,maxLength:1},box2d:{bodyType:"dynamic",density:.1,friction:2,restitution:.32},effects:[{klass:o.Damage,properties:{blunt:2,slashing:0,piercing:0,fire:0,earth:0,water:0,air:0,light:0,dark:0,poison:0,life:0,death:0}},{klass:o.TriggerAnimation,animation:s.ANIM_HIT}]},{klass:o.TriggerAnimation,target:"self",animation:s.ANIM_HEAVY_ATTACK},{klass:o.SetCooldown,target:"self",cooldownLength:1e4}],cost:0,name:"glob",startupDelay:6e3}},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SND_TYPEWRITER",function(){return n}),i.d(e,"SND_SWORD_SWIPE",function(){return o});var n=["/audios/typewar/typewriter-key-1.mp3","/audios/typewar/typewriter-key-1.wav","/audios/typewar/typewriter-key-1.ogg"],o=["/audios/typewar/59999__qubodup__sword-or-bullet-swish-swosh-12.mp3","/audios/typewar/59999__qubodup__sword-or-bullet-swish-swosh-12.wav","/audios/typewar/59999__qubodup__sword-or-bullet-swish-swosh-12.ogg"]},function(t,e,i){"use strict";var n={};!function(t,e){function i(){}t.inherit=function(t,e){var n=t;i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=n},t.generateCallback=function(t,e){return function(){e.apply(t,arguments)}},t.NVector=function(t){void 0===t&&(t=0);for(var e=new Array(t||0),i=0;i<t;++i)e[i]=0;return e},t.is=function(t,e){return null!==t&&(e instanceof Function&&t instanceof e||!(void 0==t.constructor.__implements||!t.constructor.__implements[e]))},t.parseUInt=function(t){return Math.abs(parseInt(t))}}(n);var o=Array,s=n.NVector;void 0===n&&(n={}),void 0===n.Collision&&(n.Collision={}),void 0===n.Collision.Shapes&&(n.Collision.Shapes={}),void 0===n.Common&&(n.Common={}),void 0===n.Common.Math&&(n.Common.Math={}),void 0===n.Dynamics&&(n.Dynamics={}),void 0===n.Dynamics.Contacts&&(n.Dynamics.Contacts={}),void 0===n.Dynamics.Controllers&&(n.Dynamics.Controllers={}),void 0===n.Dynamics.Joints&&(n.Dynamics.Joints={}),function(){function t(){t.b2AABB.apply(this,arguments)}function e(){e.b2Bound.apply(this,arguments)}function i(){i.b2BoundValues.apply(this,arguments),this.constructor===i&&this.b2BoundValues.apply(this,arguments)}function o(){o.b2Collision.apply(this,arguments)}function s(){s.b2ContactID.apply(this,arguments),this.constructor===s&&this.b2ContactID.apply(this,arguments)}function r(){r.b2ContactPoint.apply(this,arguments)}function a(){a.b2Distance.apply(this,arguments)}function l(){l.b2DistanceInput.apply(this,arguments)}function c(){c.b2DistanceOutput.apply(this,arguments)}function h(){h.b2DistanceProxy.apply(this,arguments)}function u(){u.b2DynamicTree.apply(this,arguments),this.constructor===u&&this.b2DynamicTree.apply(this,arguments)}function m(){m.b2DynamicTreeBroadPhase.apply(this,arguments)}function p(){p.b2DynamicTreeNode.apply(this,arguments)}function f(){f.b2DynamicTreePair.apply(this,arguments)}function _(){_.b2Manifold.apply(this,arguments),this.constructor===_&&this.b2Manifold.apply(this,arguments)}function y(){y.b2ManifoldPoint.apply(this,arguments),this.constructor===y&&this.b2ManifoldPoint.apply(this,arguments)}function d(){d.b2Point.apply(this,arguments)}function x(){x.b2RayCastInput.apply(this,arguments),this.constructor===x&&this.b2RayCastInput.apply(this,arguments)}function v(){v.b2RayCastOutput.apply(this,arguments)}function b(){b.b2Segment.apply(this,arguments)}function g(){g.b2SeparationFunction.apply(this,arguments)}function C(){C.b2Simplex.apply(this,arguments),this.constructor===C&&this.b2Simplex.apply(this,arguments)}function w(){w.b2SimplexCache.apply(this,arguments)}function S(){S.b2SimplexVertex.apply(this,arguments)}function A(){A.b2TimeOfImpact.apply(this,arguments)}function D(){D.b2TOIInput.apply(this,arguments)}function B(){B.b2WorldManifold.apply(this,arguments),this.constructor===B&&this.b2WorldManifold.apply(this,arguments)}function M(){M.ClipVertex.apply(this,arguments)}function I(){I.Features.apply(this,arguments)}function P(){P.b2CircleShape.apply(this,arguments),this.constructor===P&&this.b2CircleShape.apply(this,arguments)}function V(){V.b2EdgeChainDef.apply(this,arguments),this.constructor===V&&this.b2EdgeChainDef.apply(this,arguments)}function k(){k.b2EdgeShape.apply(this,arguments),this.constructor===k&&this.b2EdgeShape.apply(this,arguments)}function T(){T.b2MassData.apply(this,arguments)}function L(){L.b2PolygonShape.apply(this,arguments),this.constructor===L&&this.b2PolygonShape.apply(this,arguments)}function E(){E.b2Shape.apply(this,arguments),this.constructor===E&&this.b2Shape.apply(this,arguments)}function F(){F.b2Color.apply(this,arguments),this.constructor===F&&this.b2Color.apply(this,arguments)}function R(){R.b2Settings.apply(this,arguments)}function G(){G.b2Mat22.apply(this,arguments),this.constructor===G&&this.b2Mat22.apply(this,arguments)}function N(){N.b2Mat33.apply(this,arguments),this.constructor===N&&this.b2Mat33.apply(this,arguments)}function J(){J.b2Math.apply(this,arguments)}function O(){O.b2Sweep.apply(this,arguments)}function j(){j.b2Transform.apply(this,arguments),this.constructor===j&&this.b2Transform.apply(this,arguments)}function q(){q.b2Vec2.apply(this,arguments),this.constructor===q&&this.b2Vec2.apply(this,arguments)}function z(){z.b2Vec3.apply(this,arguments),this.constructor===z&&this.b2Vec3.apply(this,arguments)}function H(){H.b2Body.apply(this,arguments),this.constructor===H&&this.b2Body.apply(this,arguments)}function U(){U.b2BodyDef.apply(this,arguments),this.constructor===U&&this.b2BodyDef.apply(this,arguments)}function W(){W.b2ContactFilter.apply(this,arguments)}function $(){$.b2ContactImpulse.apply(this,arguments)}function K(){K.b2ContactListener.apply(this,arguments)}function X(){X.b2ContactManager.apply(this,arguments),this.constructor===X&&this.b2ContactManager.apply(this,arguments)}function Z(){Z.b2DebugDraw.apply(this,arguments),this.constructor===Z&&this.b2DebugDraw.apply(this,arguments)}function Y(){Y.b2DestructionListener.apply(this,arguments)}function Q(){Q.b2FilterData.apply(this,arguments)}function tt(){tt.b2Fixture.apply(this,arguments),this.constructor===tt&&this.b2Fixture.apply(this,arguments)}function et(){et.b2FixtureDef.apply(this,arguments),this.constructor===et&&this.b2FixtureDef.apply(this,arguments)}function it(){it.b2Island.apply(this,arguments),this.constructor===it&&this.b2Island.apply(this,arguments)}function nt(){nt.b2TimeStep.apply(this,arguments)}function ot(){ot.b2World.apply(this,arguments),this.constructor===ot&&this.b2World.apply(this,arguments)}function st(){st.b2CircleContact.apply(this,arguments)}function rt(){rt.b2Contact.apply(this,arguments),this.constructor===rt&&this.b2Contact.apply(this,arguments)}function at(){at.b2ContactConstraint.apply(this,arguments),this.constructor===at&&this.b2ContactConstraint.apply(this,arguments)}function lt(){lt.b2ContactConstraintPoint.apply(this,arguments)}function ct(){ct.b2ContactEdge.apply(this,arguments)}function ht(){ht.b2ContactFactory.apply(this,arguments),this.constructor===ht&&this.b2ContactFactory.apply(this,arguments)}function ut(){ut.b2ContactRegister.apply(this,arguments)}function mt(){mt.b2ContactResult.apply(this,arguments)}function pt(){pt.b2ContactSolver.apply(this,arguments),this.constructor===pt&&this.b2ContactSolver.apply(this,arguments)}function ft(){ft.b2EdgeAndCircleContact.apply(this,arguments)}function _t(){_t.b2NullContact.apply(this,arguments),this.constructor===_t&&this.b2NullContact.apply(this,arguments)}function yt(){yt.b2PolyAndCircleContact.apply(this,arguments)}function dt(){dt.b2PolyAndEdgeContact.apply(this,arguments)}function xt(){xt.b2PolygonContact.apply(this,arguments)}function vt(){vt.b2PositionSolverManifold.apply(this,arguments),this.constructor===vt&&this.b2PositionSolverManifold.apply(this,arguments)}function bt(){bt.b2BuoyancyController.apply(this,arguments)}function gt(){gt.b2ConstantAccelController.apply(this,arguments)}function Ct(){Ct.b2ConstantForceController.apply(this,arguments)}function wt(){wt.b2Controller.apply(this,arguments)}function St(){St.b2ControllerEdge.apply(this,arguments)}function At(){At.b2GravityController.apply(this,arguments)}function Dt(){Dt.b2TensorDampingController.apply(this,arguments)}function Bt(){Bt.b2DistanceJoint.apply(this,arguments),this.constructor===Bt&&this.b2DistanceJoint.apply(this,arguments)}function Mt(){Mt.b2DistanceJointDef.apply(this,arguments),this.constructor===Mt&&this.b2DistanceJointDef.apply(this,arguments)}function It(){It.b2FrictionJoint.apply(this,arguments),this.constructor===It&&this.b2FrictionJoint.apply(this,arguments)}function Pt(){Pt.b2FrictionJointDef.apply(this,arguments),this.constructor===Pt&&this.b2FrictionJointDef.apply(this,arguments)}function Vt(){Vt.b2GearJoint.apply(this,arguments),this.constructor===Vt&&this.b2GearJoint.apply(this,arguments)}function kt(){kt.b2GearJointDef.apply(this,arguments),this.constructor===kt&&this.b2GearJointDef.apply(this,arguments)}function Tt(){Tt.b2Jacobian.apply(this,arguments)}function Lt(){Lt.b2Joint.apply(this,arguments),this.constructor===Lt&&this.b2Joint.apply(this,arguments)}function Et(){Et.b2JointDef.apply(this,arguments),this.constructor===Et&&this.b2JointDef.apply(this,arguments)}function Ft(){Ft.b2JointEdge.apply(this,arguments)}function Rt(){Rt.b2LineJoint.apply(this,arguments),this.constructor===Rt&&this.b2LineJoint.apply(this,arguments)}function Gt(){Gt.b2LineJointDef.apply(this,arguments),this.constructor===Gt&&this.b2LineJointDef.apply(this,arguments)}function Nt(){Nt.b2MouseJoint.apply(this,arguments),this.constructor===Nt&&this.b2MouseJoint.apply(this,arguments)}function Jt(){Jt.b2MouseJointDef.apply(this,arguments),this.constructor===Jt&&this.b2MouseJointDef.apply(this,arguments)}function Ot(){Ot.b2PrismaticJoint.apply(this,arguments),this.constructor===Ot&&this.b2PrismaticJoint.apply(this,arguments)}function jt(){jt.b2PrismaticJointDef.apply(this,arguments),this.constructor===jt&&this.b2PrismaticJointDef.apply(this,arguments)}function qt(){qt.b2PulleyJoint.apply(this,arguments),this.constructor===qt&&this.b2PulleyJoint.apply(this,arguments)}function zt(){zt.b2PulleyJointDef.apply(this,arguments),this.constructor===zt&&this.b2PulleyJointDef.apply(this,arguments)}function Ht(){Ht.b2RevoluteJoint.apply(this,arguments),this.constructor===Ht&&this.b2RevoluteJoint.apply(this,arguments)}function Ut(){Ut.b2RevoluteJointDef.apply(this,arguments),this.constructor===Ut&&this.b2RevoluteJointDef.apply(this,arguments)}function Wt(){Wt.b2WeldJoint.apply(this,arguments),this.constructor===Wt&&this.b2WeldJoint.apply(this,arguments)}function $t(){$t.b2WeldJointDef.apply(this,arguments),this.constructor===$t&&this.b2WeldJointDef.apply(this,arguments)}n.Collision.IBroadPhase="Box2D.Collision.IBroadPhase",n.Collision.b2AABB=t,n.Collision.b2Bound=e,n.Collision.b2BoundValues=i,n.Collision.b2Collision=o,n.Collision.b2ContactID=s,n.Collision.b2ContactPoint=r,n.Collision.b2Distance=a,n.Collision.b2DistanceInput=l,n.Collision.b2DistanceOutput=c,n.Collision.b2DistanceProxy=h,n.Collision.b2DynamicTree=u,n.Collision.b2DynamicTreeBroadPhase=m,n.Collision.b2DynamicTreeNode=p,n.Collision.b2DynamicTreePair=f,n.Collision.b2Manifold=_,n.Collision.b2ManifoldPoint=y,n.Collision.b2Point=d,n.Collision.b2RayCastInput=x,n.Collision.b2RayCastOutput=v,n.Collision.b2Segment=b,n.Collision.b2SeparationFunction=g,n.Collision.b2Simplex=C,n.Collision.b2SimplexCache=w,n.Collision.b2SimplexVertex=S,n.Collision.b2TimeOfImpact=A,n.Collision.b2TOIInput=D,n.Collision.b2WorldManifold=B,n.Collision.ClipVertex=M,n.Collision.Features=I,n.Collision.Shapes.b2CircleShape=P,n.Collision.Shapes.b2EdgeChainDef=V,n.Collision.Shapes.b2EdgeShape=k,n.Collision.Shapes.b2MassData=T,n.Collision.Shapes.b2PolygonShape=L,n.Collision.Shapes.b2Shape=E,n.Common.b2internal="Box2D.Common.b2internal",n.Common.b2Color=F,n.Common.b2Settings=R,n.Common.Math.b2Mat22=G,n.Common.Math.b2Mat33=N,n.Common.Math.b2Math=J,n.Common.Math.b2Sweep=O,n.Common.Math.b2Transform=j,n.Common.Math.b2Vec2=q,n.Common.Math.b2Vec3=z,n.Dynamics.b2Body=H,n.Dynamics.b2BodyDef=U,n.Dynamics.b2ContactFilter=W,n.Dynamics.b2ContactImpulse=$,n.Dynamics.b2ContactListener=K,n.Dynamics.b2ContactManager=X,n.Dynamics.b2DebugDraw=Z,n.Dynamics.b2DestructionListener=Y,n.Dynamics.b2FilterData=Q,n.Dynamics.b2Fixture=tt,n.Dynamics.b2FixtureDef=et,n.Dynamics.b2Island=it,n.Dynamics.b2TimeStep=nt,n.Dynamics.b2World=ot,n.Dynamics.Contacts.b2CircleContact=st,n.Dynamics.Contacts.b2Contact=rt,n.Dynamics.Contacts.b2ContactConstraint=at,n.Dynamics.Contacts.b2ContactConstraintPoint=lt,n.Dynamics.Contacts.b2ContactEdge=ct,n.Dynamics.Contacts.b2ContactFactory=ht,n.Dynamics.Contacts.b2ContactRegister=ut,n.Dynamics.Contacts.b2ContactResult=mt,n.Dynamics.Contacts.b2ContactSolver=pt,n.Dynamics.Contacts.b2EdgeAndCircleContact=ft,n.Dynamics.Contacts.b2NullContact=_t,n.Dynamics.Contacts.b2PolyAndCircleContact=yt,n.Dynamics.Contacts.b2PolyAndEdgeContact=dt,n.Dynamics.Contacts.b2PolygonContact=xt,n.Dynamics.Contacts.b2PositionSolverManifold=vt,n.Dynamics.Controllers.b2BuoyancyController=bt,n.Dynamics.Controllers.b2ConstantAccelController=gt,n.Dynamics.Controllers.b2ConstantForceController=Ct,n.Dynamics.Controllers.b2Controller=wt,n.Dynamics.Controllers.b2ControllerEdge=St,n.Dynamics.Controllers.b2GravityController=At,n.Dynamics.Controllers.b2TensorDampingController=Dt,n.Dynamics.Joints.b2DistanceJoint=Bt,n.Dynamics.Joints.b2DistanceJointDef=Mt,n.Dynamics.Joints.b2FrictionJoint=It,n.Dynamics.Joints.b2FrictionJointDef=Pt,n.Dynamics.Joints.b2GearJoint=Vt,n.Dynamics.Joints.b2GearJointDef=kt,n.Dynamics.Joints.b2Jacobian=Tt,n.Dynamics.Joints.b2Joint=Lt,n.Dynamics.Joints.b2JointDef=Et,n.Dynamics.Joints.b2JointEdge=Ft,n.Dynamics.Joints.b2LineJoint=Rt,n.Dynamics.Joints.b2LineJointDef=Gt,n.Dynamics.Joints.b2MouseJoint=Nt,n.Dynamics.Joints.b2MouseJointDef=Jt,n.Dynamics.Joints.b2PrismaticJoint=Ot,n.Dynamics.Joints.b2PrismaticJointDef=jt,n.Dynamics.Joints.b2PulleyJoint=qt,n.Dynamics.Joints.b2PulleyJointDef=zt,n.Dynamics.Joints.b2RevoluteJoint=Ht,n.Dynamics.Joints.b2RevoluteJointDef=Ut,n.Dynamics.Joints.b2WeldJoint=Wt,n.Dynamics.Joints.b2WeldJointDef=$t}(),n.postDefs=[],function(){var t=n.Collision.Shapes.b2CircleShape,e=(n.Collision.Shapes.b2EdgeChainDef,n.Collision.Shapes.b2EdgeShape,n.Collision.Shapes.b2MassData,n.Collision.Shapes.b2PolygonShape),i=n.Collision.Shapes.b2Shape,r=(n.Common.b2Color,n.Common.b2internal,n.Common.b2Settings),a=(n.Common.Math.b2Mat22,n.Common.Math.b2Mat33,n.Common.Math.b2Math),l=n.Common.Math.b2Sweep,c=n.Common.Math.b2Transform,h=n.Common.Math.b2Vec2,u=(n.Common.Math.b2Vec3,n.Collision.b2AABB),m=n.Collision.b2Bound,p=n.Collision.b2BoundValues,f=n.Collision.b2Collision,_=n.Collision.b2ContactID,y=n.Collision.b2ContactPoint,d=n.Collision.b2Distance,x=n.Collision.b2DistanceInput,v=n.Collision.b2DistanceOutput,b=n.Collision.b2DistanceProxy,g=n.Collision.b2DynamicTree,C=n.Collision.b2DynamicTreeBroadPhase,w=n.Collision.b2DynamicTreeNode,S=n.Collision.b2DynamicTreePair,A=n.Collision.b2Manifold,D=n.Collision.b2ManifoldPoint,B=n.Collision.b2Point,M=n.Collision.b2RayCastInput,I=n.Collision.b2RayCastOutput,P=n.Collision.b2Segment,V=n.Collision.b2SeparationFunction,k=n.Collision.b2Simplex,T=n.Collision.b2SimplexCache,L=n.Collision.b2SimplexVertex,E=n.Collision.b2TimeOfImpact,F=n.Collision.b2TOIInput,R=n.Collision.b2WorldManifold,G=n.Collision.ClipVertex,N=n.Collision.Features,J=n.Collision.IBroadPhase;u.b2AABB=function(){this.lowerBound=new h,this.upperBound=new h},u.prototype.IsValid=function(){var t=this.upperBound.x-this.lowerBound.x,e=this.upperBound.y-this.lowerBound.y,i=t>=0&&e>=0;return i=i&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},u.prototype.GetCenter=function(){return new h((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},u.prototype.GetExtents=function(){return new h((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},u.prototype.Contains=function(t){var e=!0;return e=e&&this.lowerBound.x<=t.lowerBound.x,e=e&&this.lowerBound.y<=t.lowerBound.y,e=e&&t.upperBound.x<=this.upperBound.x,e=e&&t.upperBound.y<=this.upperBound.y},u.prototype.RayCast=function(t,e){var i=-Number.MAX_VALUE,n=Number.MAX_VALUE,o=e.p1.x,s=e.p1.y,r=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,l=Math.abs(r),c=Math.abs(a),h=t.normal,u=0,m=0,p=0,f=0,_=0;if(l<Number.MIN_VALUE){if(o<this.lowerBound.x||this.upperBound.x<o)return!1}else if(u=1/r,m=(this.lowerBound.x-o)*u,p=(this.upperBound.x-o)*u,_=-1,m>p&&(f=m,m=p,p=f,_=1),m>i&&(h.x=_,h.y=0,i=m),n=Math.min(n,p),i>n)return!1;if(c<Number.MIN_VALUE){if(s<this.lowerBound.y||this.upperBound.y<s)return!1}else if(u=1/a,m=(this.lowerBound.y-s)*u,p=(this.upperBound.y-s)*u,_=-1,m>p&&(f=m,m=p,p=f,_=1),m>i&&(h.y=_,h.x=0,i=m),n=Math.min(n,p),i>n)return!1;return t.fraction=i,!0},u.prototype.TestOverlap=function(t){var e=t.lowerBound.x-this.upperBound.x,i=t.lowerBound.y-this.upperBound.y,n=this.lowerBound.x-t.upperBound.x,o=this.lowerBound.y-t.upperBound.y;return!(e>0||i>0)&&!(n>0||o>0)},u.Combine=function(t,e){var i=new u;return i.Combine(t,e),i},u.prototype.Combine=function(t,e){this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y)},m.b2Bound=function(){},m.prototype.IsLower=function(){return 0==(1&this.value)},m.prototype.IsUpper=function(){return 1==(1&this.value)},m.prototype.Swap=function(t){var e=this.value,i=this.proxy,n=this.stabbingCount;this.value=t.value,this.proxy=t.proxy,this.stabbingCount=t.stabbingCount,t.value=e,t.proxy=i,t.stabbingCount=n},p.b2BoundValues=function(){},p.prototype.b2BoundValues=function(){this.lowerValues=new s,this.lowerValues[0]=0,this.lowerValues[1]=0,this.upperValues=new s,this.upperValues[0]=0,this.upperValues[1]=0},f.b2Collision=function(){},f.ClipSegmentToLine=function(t,e,i,n){void 0===n&&(n=0);var o,s=0;o=e[0];var r=o.v;o=e[1];var a=o.v,l=i.x*r.x+i.y*r.y-n,c=i.x*a.x+i.y*a.y-n;if(l<=0&&t[s++].Set(e[0]),c<=0&&t[s++].Set(e[1]),l*c<0){var h=l/(l-c);o=t[s];var u=o.v;u.x=r.x+h*(a.x-r.x),u.y=r.y+h*(a.y-r.y),o=t[s];var m;l>0?(m=e[0],o.id=m.id):(m=e[1],o.id=m.id),++s}return s},f.EdgeSeparation=function(t,e,i,n,o){void 0===i&&(i=0);var s,r,a=(parseInt(t.m_vertexCount),t.m_vertices),l=t.m_normals,c=parseInt(n.m_vertexCount),h=n.m_vertices;s=e.R,r=l[i];var u=s.col1.x*r.x+s.col2.x*r.y,m=s.col1.y*r.x+s.col2.y*r.y;s=o.R;for(var p=s.col1.x*u+s.col1.y*m,f=s.col2.x*u+s.col2.y*m,_=0,y=Number.MAX_VALUE,d=0;d<c;++d){r=h[d];var x=r.x*p+r.y*f;x<y&&(y=x,_=d)}r=a[i],s=e.R;var v=e.position.x+(s.col1.x*r.x+s.col2.x*r.y),b=e.position.y+(s.col1.y*r.x+s.col2.y*r.y);r=h[_],s=o.R;var g=o.position.x+(s.col1.x*r.x+s.col2.x*r.y),C=o.position.y+(s.col1.y*r.x+s.col2.y*r.y);return g-=v,C-=b,g*u+C*m},f.FindMaxSeparation=function(t,e,i,n,o){var s,r,a=parseInt(e.m_vertexCount),l=e.m_normals;r=o.R,s=n.m_centroid;var c=o.position.x+(r.col1.x*s.x+r.col2.x*s.y),h=o.position.y+(r.col1.y*s.x+r.col2.y*s.y);r=i.R,s=e.m_centroid,c-=i.position.x+(r.col1.x*s.x+r.col2.x*s.y),h-=i.position.y+(r.col1.y*s.x+r.col2.y*s.y);for(var u=c*i.R.col1.x+h*i.R.col1.y,m=c*i.R.col2.x+h*i.R.col2.y,p=0,_=-Number.MAX_VALUE,y=0;y<a;++y){s=l[y];var d=s.x*u+s.y*m;d>_&&(_=d,p=y)}var x=f.EdgeSeparation(e,i,p,n,o),v=parseInt(p-1>=0?p-1:a-1),b=f.EdgeSeparation(e,i,v,n,o),g=parseInt(p+1<a?p+1:0),C=f.EdgeSeparation(e,i,g,n,o),w=0,S=0,A=0;if(b>x&&b>C)A=-1,w=v,S=b;else{if(!(C>x))return t[0]=p,x;A=1,w=g,S=C}for(;;){if(p=-1==A?w-1>=0?w-1:a-1:w+1<a?w+1:0,!((x=f.EdgeSeparation(e,i,p,n,o))>S))break;w=p,S=x}return t[0]=w,S},f.FindIncidentEdge=function(t,e,i,n,o,s){void 0===n&&(n=0);var r,a,l=(parseInt(e.m_vertexCount),e.m_normals),c=parseInt(o.m_vertexCount),h=o.m_vertices,u=o.m_normals;r=i.R,a=l[n];var m=r.col1.x*a.x+r.col2.x*a.y,p=r.col1.y*a.x+r.col2.y*a.y;r=s.R;var f=r.col1.x*m+r.col1.y*p;p=r.col2.x*m+r.col2.y*p,m=f;for(var _=0,y=Number.MAX_VALUE,d=0;d<c;++d){a=u[d];var x=m*a.x+p*a.y;x<y&&(y=x,_=d)}var v,b=parseInt(_),g=parseInt(b+1<c?b+1:0);v=t[0],a=h[b],r=s.R,v.v.x=s.position.x+(r.col1.x*a.x+r.col2.x*a.y),v.v.y=s.position.y+(r.col1.y*a.x+r.col2.y*a.y),v.id.features.referenceEdge=n,v.id.features.incidentEdge=b,v.id.features.incidentVertex=0,v=t[1],a=h[g],r=s.R,v.v.x=s.position.x+(r.col1.x*a.x+r.col2.x*a.y),v.v.y=s.position.y+(r.col1.y*a.x+r.col2.y*a.y),v.id.features.referenceEdge=n,v.id.features.incidentEdge=g,v.id.features.incidentVertex=1},f.MakeClipPointVector=function(){var t=new o(2);return t[0]=new G,t[1]=new G,t},f.CollidePolygons=function(t,e,i,n,o){var s;t.m_pointCount=0;var a=e.m_radius+n.m_radius,l=0;f.s_edgeAO[0]=l;var c=f.FindMaxSeparation(f.s_edgeAO,e,i,n,o);if(l=f.s_edgeAO[0],!(c>a)){var h=0;f.s_edgeBO[0]=h;var u=f.FindMaxSeparation(f.s_edgeBO,n,o,e,i);if(h=f.s_edgeBO[0],!(u>a)){var m,p,_,y,d,x=0,v=0;u>.98*c+.001?(m=n,p=e,_=o,y=i,x=h,t.m_type=A.e_faceB,v=1):(m=e,p=n,_=i,y=o,x=l,t.m_type=A.e_faceA,v=0);var b=f.s_incidentEdge;f.FindIncidentEdge(b,m,_,x,p,y);var g,C=parseInt(m.m_vertexCount),w=m.m_vertices,S=w[x];g=x+1<C?w[parseInt(x+1)]:w[0];var D=f.s_localTangent;D.Set(g.x-S.x,g.y-S.y),D.Normalize();var B=f.s_localNormal;B.x=D.y,B.y=-D.x;var M=f.s_planePoint;M.Set(.5*(S.x+g.x),.5*(S.y+g.y));var I=f.s_tangent;d=_.R,I.x=d.col1.x*D.x+d.col2.x*D.y,I.y=d.col1.y*D.x+d.col2.y*D.y;var P=f.s_tangent2;P.x=-I.x,P.y=-I.y;var V=f.s_normal;V.x=I.y,V.y=-I.x;var k=f.s_v11,T=f.s_v12;k.x=_.position.x+(d.col1.x*S.x+d.col2.x*S.y),k.y=_.position.y+(d.col1.y*S.x+d.col2.y*S.y),T.x=_.position.x+(d.col1.x*g.x+d.col2.x*g.y),T.y=_.position.y+(d.col1.y*g.x+d.col2.y*g.y);var L=V.x*k.x+V.y*k.y,E=-I.x*k.x-I.y*k.y+a,F=I.x*T.x+I.y*T.y+a,R=f.s_clipPoints1,G=f.s_clipPoints2;if(!(f.ClipSegmentToLine(R,b,P,E)<2||f.ClipSegmentToLine(G,R,I,F)<2)){t.m_localPlaneNormal.SetV(B),t.m_localPoint.SetV(M);for(var N=0,J=0;J<r.b2_maxManifoldPoints;++J){s=G[J];if(V.x*s.v.x+V.y*s.v.y-L<=a){var O=t.m_points[N];d=y.R;var j=s.v.x-y.position.x,q=s.v.y-y.position.y;O.m_localPoint.x=j*d.col1.x+q*d.col1.y,O.m_localPoint.y=j*d.col2.x+q*d.col2.y,O.m_id.Set(s.id),O.m_id.features.flip=v,++N}}t.m_pointCount=N}}}},f.CollideCircles=function(t,e,i,n,o){t.m_pointCount=0;var s,r;s=i.R,r=e.m_p;var a=i.position.x+(s.col1.x*r.x+s.col2.x*r.y),l=i.position.y+(s.col1.y*r.x+s.col2.y*r.y);s=o.R,r=n.m_p;var c=o.position.x+(s.col1.x*r.x+s.col2.x*r.y),h=o.position.y+(s.col1.y*r.x+s.col2.y*r.y),u=c-a,m=h-l,p=u*u+m*m,f=e.m_radius+n.m_radius;p>f*f||(t.m_type=A.e_circles,t.m_localPoint.SetV(e.m_p),t.m_localPlaneNormal.SetZero(),t.m_pointCount=1,t.m_points[0].m_localPoint.SetV(n.m_p),t.m_points[0].m_id.key=0)},f.CollidePolygonAndCircle=function(t,e,i,n,o){t.m_pointCount=0;var s,r,a=0,l=0;r=o.R,s=n.m_p;var c=o.position.x+(r.col1.x*s.x+r.col2.x*s.y),h=o.position.y+(r.col1.y*s.x+r.col2.y*s.y);a=c-i.position.x,l=h-i.position.y,r=i.R;for(var u=a*r.col1.x+l*r.col1.y,m=a*r.col2.x+l*r.col2.y,p=0,f=-Number.MAX_VALUE,_=e.m_radius+n.m_radius,y=parseInt(e.m_vertexCount),d=e.m_vertices,x=e.m_normals,v=0;v<y;++v){s=d[v],a=u-s.x,l=m-s.y,s=x[v];var b=s.x*a+s.y*l;if(b>_)return;b>f&&(f=b,p=v)}var g=parseInt(p),C=parseInt(g+1<y?g+1:0),w=d[g],S=d[C];if(f<Number.MIN_VALUE)return t.m_pointCount=1,t.m_type=A.e_faceA,t.m_localPlaneNormal.SetV(x[p]),t.m_localPoint.x=.5*(w.x+S.x),t.m_localPoint.y=.5*(w.y+S.y),t.m_points[0].m_localPoint.SetV(n.m_p),void(t.m_points[0].m_id.key=0);var D=(u-w.x)*(S.x-w.x)+(m-w.y)*(S.y-w.y),B=(u-S.x)*(w.x-S.x)+(m-S.y)*(w.y-S.y);if(D<=0){if((u-w.x)*(u-w.x)+(m-w.y)*(m-w.y)>_*_)return;t.m_pointCount=1,t.m_type=A.e_faceA,t.m_localPlaneNormal.x=u-w.x,t.m_localPlaneNormal.y=m-w.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(w),t.m_points[0].m_localPoint.SetV(n.m_p),t.m_points[0].m_id.key=0}else if(B<=0){if((u-S.x)*(u-S.x)+(m-S.y)*(m-S.y)>_*_)return;t.m_pointCount=1,t.m_type=A.e_faceA,t.m_localPlaneNormal.x=u-S.x,t.m_localPlaneNormal.y=m-S.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(S),t.m_points[0].m_localPoint.SetV(n.m_p),t.m_points[0].m_id.key=0}else{var M=.5*(w.x+S.x),I=.5*(w.y+S.y);if((f=(u-M)*x[g].x+(m-I)*x[g].y)>_)return;t.m_pointCount=1,t.m_type=A.e_faceA,t.m_localPlaneNormal.x=x[g].x,t.m_localPlaneNormal.y=x[g].y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.Set(M,I),t.m_points[0].m_localPoint.SetV(n.m_p),t.m_points[0].m_id.key=0}},f.TestOverlap=function(t,e){var i=e.lowerBound,n=t.upperBound,o=i.x-n.x,s=i.y-n.y;i=t.lowerBound,n=e.upperBound;var r=i.x-n.x,a=i.y-n.y;return!(o>0||s>0)&&!(r>0||a>0)},n.postDefs.push(function(){n.Collision.b2Collision.s_incidentEdge=f.MakeClipPointVector(),n.Collision.b2Collision.s_clipPoints1=f.MakeClipPointVector(),n.Collision.b2Collision.s_clipPoints2=f.MakeClipPointVector(),n.Collision.b2Collision.s_edgeAO=new s(1),n.Collision.b2Collision.s_edgeBO=new s(1),n.Collision.b2Collision.s_localTangent=new h,n.Collision.b2Collision.s_localNormal=new h,n.Collision.b2Collision.s_planePoint=new h,n.Collision.b2Collision.s_normal=new h,n.Collision.b2Collision.s_tangent=new h,n.Collision.b2Collision.s_tangent2=new h,n.Collision.b2Collision.s_v11=new h,n.Collision.b2Collision.s_v12=new h,n.Collision.b2Collision.b2CollidePolyTempVec=new h,n.Collision.b2Collision.b2_nullFeature=255}),_.b2ContactID=function(){this.features=new N},_.prototype.b2ContactID=function(){this.features._m_id=this},_.prototype.Set=function(t){this.key=t._key},_.prototype.Copy=function(){var t=new _;return t.key=this.key,t},Object.defineProperty(_.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key}}),Object.defineProperty(_.prototype,"key",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._key=t,this.features._referenceEdge=255&this._key,this.features._incidentEdge=(65280&this._key)>>8&255,this.features._incidentVertex=(16711680&this._key)>>16&255,this.features._flip=(4278190080&this._key)>>24&255}}),y.b2ContactPoint=function(){this.position=new h,this.velocity=new h,this.normal=new h,this.id=new _},d.b2Distance=function(){},d.Distance=function(t,e,i){++d.b2_gjkCalls;var n=i.proxyA,o=i.proxyB,s=i.transformA,l=i.transformB,c=d.s_simplex;c.ReadCache(e,n,s,o,l);for(var u,m=c.m_vertices,p=d.s_saveA,f=d.s_saveB,_=0,y=c.GetClosestPoint(),x=y.LengthSquared(),v=x,b=0,g=0;g<20;){for(_=c.m_count,b=0;b<_;b++)p[b]=m[b].indexA,f[b]=m[b].indexB;switch(c.m_count){case 1:break;case 2:c.Solve2();break;case 3:c.Solve3();break;default:r.b2Assert(!1)}if(3==c.m_count)break;u=c.GetClosestPoint(),v=u.LengthSquared(),x=v;var C=c.GetSearchDirection();if(C.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;var w=m[c.m_count];w.indexA=n.GetSupport(a.MulTMV(s.R,C.GetNegative())),w.wA=a.MulX(s,n.GetVertex(w.indexA)),w.indexB=o.GetSupport(a.MulTMV(l.R,C)),w.wB=a.MulX(l,o.GetVertex(w.indexB)),w.w=a.SubtractVV(w.wB,w.wA),++g,++d.b2_gjkIters;var S=!1;for(b=0;b<_;b++)if(w.indexA==p[b]&&w.indexB==f[b]){S=!0;break}if(S)break;++c.m_count}if(d.b2_gjkMaxIters=a.Max(d.b2_gjkMaxIters,g),c.GetWitnessPoints(t.pointA,t.pointB),t.distance=a.SubtractVV(t.pointA,t.pointB).Length(),t.iterations=g,c.WriteCache(e),i.useRadii){var A=n.m_radius,D=o.m_radius;if(t.distance>A+D&&t.distance>Number.MIN_VALUE){t.distance-=A+D;var B=a.SubtractVV(t.pointB,t.pointA);B.Normalize(),t.pointA.x+=A*B.x,t.pointA.y+=A*B.y,t.pointB.x-=D*B.x,t.pointB.y-=D*B.y}else u=new h,u.x=.5*(t.pointA.x+t.pointB.x),u.y=.5*(t.pointA.y+t.pointB.y),t.pointA.x=t.pointB.x=u.x,t.pointA.y=t.pointB.y=u.y,t.distance=0}},n.postDefs.push(function(){n.Collision.b2Distance.s_simplex=new k,n.Collision.b2Distance.s_saveA=new s(3),n.Collision.b2Distance.s_saveB=new s(3)}),x.b2DistanceInput=function(){},v.b2DistanceOutput=function(){this.pointA=new h,this.pointB=new h},b.b2DistanceProxy=function(){},b.prototype.Set=function(n){switch(n.GetType()){case i.e_circleShape:var s=n instanceof t?n:null;this.m_vertices=new o(1,!0),this.m_vertices[0]=s.m_p,this.m_count=1,this.m_radius=s.m_radius;break;case i.e_polygonShape:var a=n instanceof e?n:null;this.m_vertices=a.m_vertices,this.m_count=a.m_vertexCount,this.m_radius=a.m_radius;break;default:r.b2Assert(!1)}},b.prototype.GetSupport=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_count;++n){var o=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;o>i&&(e=n,i=o)}return e},b.prototype.GetSupportVertex=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_count;++n){var o=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;o>i&&(e=n,i=o)}return this.m_vertices[e]},b.prototype.GetVertexCount=function(){return this.m_count},b.prototype.GetVertex=function(t){return void 0===t&&(t=0),r.b2Assert(0<=t&&t<this.m_count),this.m_vertices[t]},g.b2DynamicTree=function(){},g.prototype.b2DynamicTree=function(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0},g.prototype.CreateProxy=function(t,e){var i=this.AllocateNode(),n=r.b2_aabbExtension,o=r.b2_aabbExtension;return i.aabb.lowerBound.x=t.lowerBound.x-n,i.aabb.lowerBound.y=t.lowerBound.y-o,i.aabb.upperBound.x=t.upperBound.x+n,i.aabb.upperBound.y=t.upperBound.y+o,i.userData=e,this.InsertLeaf(i),i},g.prototype.DestroyProxy=function(t){this.RemoveLeaf(t),this.FreeNode(t)},g.prototype.MoveProxy=function(t,e,i){if(r.b2Assert(t.IsLeaf()),t.aabb.Contains(e))return!1;this.RemoveLeaf(t);var n=r.b2_aabbExtension+r.b2_aabbMultiplier*(i.x>0?i.x:-i.x),o=r.b2_aabbExtension+r.b2_aabbMultiplier*(i.y>0?i.y:-i.y);return t.aabb.lowerBound.x=e.lowerBound.x-n,t.aabb.lowerBound.y=e.lowerBound.y-o,t.aabb.upperBound.x=e.upperBound.x+n,t.aabb.upperBound.y=e.upperBound.y+o,this.InsertLeaf(t),!0},g.prototype.Rebalance=function(t){if(void 0===t&&(t=0),null!=this.m_root)for(var e=0;e<t;e++){for(var i=this.m_root,n=0;0==i.IsLeaf();)i=this.m_path>>n&1?i.child2:i.child1,n=n+1&31;++this.m_path,this.RemoveLeaf(i),this.InsertLeaf(i)}},g.prototype.GetFatAABB=function(t){return t.aabb},g.prototype.GetUserData=function(t){return t.userData},g.prototype.Query=function(t,e){if(null!=this.m_root){var i=new o,n=0;for(i[n++]=this.m_root;n>0;){var s=i[--n];if(s.aabb.TestOverlap(e))if(s.IsLeaf()){var r=t(s);if(!r)return}else i[n++]=s.child1,i[n++]=s.child2}}},g.prototype.RayCast=function(t,e){if(null!=this.m_root){var i=e.p1,n=e.p2,s=a.SubtractVV(i,n);s.Normalize();var r=a.CrossFV(1,s),l=a.AbsV(r),c=e.maxFraction,h=new u,m=0,p=0;m=i.x+c*(n.x-i.x),p=i.y+c*(n.y-i.y),h.lowerBound.x=Math.min(i.x,m),h.lowerBound.y=Math.min(i.y,p),h.upperBound.x=Math.max(i.x,m),h.upperBound.y=Math.max(i.y,p);var f=new o,_=0;for(f[_++]=this.m_root;_>0;){var y=f[--_];if(0!=y.aabb.TestOverlap(h)){var d=y.aabb.GetCenter(),x=y.aabb.GetExtents();if(!(Math.abs(r.x*(i.x-d.x)+r.y*(i.y-d.y))-l.x*x.x-l.y*x.y>0))if(y.IsLeaf()){var v=new M;if(v.p1=e.p1,v.p2=e.p2,v.maxFraction=e.maxFraction,0==(c=t(v,y)))return;c>0&&(m=i.x+c*(n.x-i.x),p=i.y+c*(n.y-i.y),h.lowerBound.x=Math.min(i.x,m),h.lowerBound.y=Math.min(i.y,p),h.upperBound.x=Math.max(i.x,m),h.upperBound.y=Math.max(i.y,p))}else f[_++]=y.child1,f[_++]=y.child2}}}},g.prototype.AllocateNode=function(){if(this.m_freeList){var t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t}return new w},g.prototype.FreeNode=function(t){t.parent=this.m_freeList,this.m_freeList=t},g.prototype.InsertLeaf=function(t){if(++this.m_insertionCount,null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);var e=t.aabb.GetCenter(),i=this.m_root;if(0==i.IsLeaf())do{var n=i.child1,o=i.child2,s=Math.abs((n.aabb.lowerBound.x+n.aabb.upperBound.x)/2-e.x)+Math.abs((n.aabb.lowerBound.y+n.aabb.upperBound.y)/2-e.y),r=Math.abs((o.aabb.lowerBound.x+o.aabb.upperBound.x)/2-e.x)+Math.abs((o.aabb.lowerBound.y+o.aabb.upperBound.y)/2-e.y);i=s<r?n:o}while(0==i.IsLeaf());var a=i.parent,l=this.AllocateNode();if(l.parent=a,l.userData=null,l.aabb.Combine(t.aabb,i.aabb),a){i.parent.child1==i?a.child1=l:a.child2=l,l.child1=i,l.child2=t,i.parent=l,t.parent=l;do{if(a.aabb.Contains(l.aabb))break;a.aabb.Combine(a.child1.aabb,a.child2.aabb),l=a,a=a.parent}while(a)}else l.child1=i,l.child2=t,i.parent=l,t.parent=l,this.m_root=l},g.prototype.RemoveLeaf=function(t){if(t==this.m_root)return void(this.m_root=null);var e,i=t.parent,n=i.parent;if(e=i.child1==t?i.child2:i.child1,n)for(n.child1==i?n.child1=e:n.child2=e,e.parent=n,this.FreeNode(i);n;){var o=n.aabb;if(n.aabb=u.Combine(n.child1.aabb,n.child2.aabb),o.Contains(n.aabb))break;n=n.parent}else this.m_root=e,e.parent=null,this.FreeNode(i)},C.b2DynamicTreeBroadPhase=function(){this.m_tree=new g,this.m_moveBuffer=new o,this.m_pairBuffer=new o,this.m_pairCount=0},C.prototype.CreateProxy=function(t,e){var i=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(i),i},C.prototype.DestroyProxy=function(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)},C.prototype.MoveProxy=function(t,e,i){this.m_tree.MoveProxy(t,e,i)&&this.BufferMove(t)},C.prototype.TestOverlap=function(t,e){var i=this.m_tree.GetFatAABB(t),n=this.m_tree.GetFatAABB(e);return i.TestOverlap(n)},C.prototype.GetUserData=function(t){return this.m_tree.GetUserData(t)},C.prototype.GetFatAABB=function(t){return this.m_tree.GetFatAABB(t)},C.prototype.GetProxyCount=function(){return this.m_proxyCount},C.prototype.UpdatePairs=function(t){function e(t){if(t==n)return!0;i.m_pairCount==i.m_pairBuffer.length&&(i.m_pairBuffer[i.m_pairCount]=new S);var e=i.m_pairBuffer[i.m_pairCount];return e.proxyA=t<n?t:n,e.proxyB=t>=n?t:n,++i.m_pairCount,!0}var i=this;i.m_pairCount=0;var n,o=0;for(o=0;o<i.m_moveBuffer.length;++o){n=i.m_moveBuffer[o];var s=i.m_tree.GetFatAABB(n);i.m_tree.Query(e,s)}i.m_moveBuffer.length=0;for(var o=0;o<i.m_pairCount;){var r=i.m_pairBuffer[o],a=i.m_tree.GetUserData(r.proxyA),l=i.m_tree.GetUserData(r.proxyB);for(t(a,l),++o;o<i.m_pairCount;){var c=i.m_pairBuffer[o];if(c.proxyA!=r.proxyA||c.proxyB!=r.proxyB)break;++o}}},C.prototype.Query=function(t,e){this.m_tree.Query(t,e)},C.prototype.RayCast=function(t,e){this.m_tree.RayCast(t,e)},C.prototype.Validate=function(){},C.prototype.Rebalance=function(t){void 0===t&&(t=0),this.m_tree.Rebalance(t)},C.prototype.BufferMove=function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t},C.prototype.UnBufferMove=function(t){var e=parseInt(this.m_moveBuffer.indexOf(t));this.m_moveBuffer.splice(e,1)},C.prototype.ComparePairs=function(t,e){return 0},C.__implements={},C.__implements[J]=!0,w.b2DynamicTreeNode=function(){this.aabb=new u},w.prototype.IsLeaf=function(){return null==this.child1},S.b2DynamicTreePair=function(){},A.b2Manifold=function(){this.m_pointCount=0},A.prototype.b2Manifold=function(){this.m_points=new o(r.b2_maxManifoldPoints);for(var t=0;t<r.b2_maxManifoldPoints;t++)this.m_points[t]=new D;this.m_localPlaneNormal=new h,this.m_localPoint=new h},A.prototype.Reset=function(){for(var t=0;t<r.b2_maxManifoldPoints;t++)(this.m_points[t]instanceof D?this.m_points[t]:null).Reset();this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_type=0,this.m_pointCount=0},A.prototype.Set=function(t){this.m_pointCount=t.m_pointCount;for(var e=0;e<r.b2_maxManifoldPoints;e++)(this.m_points[e]instanceof D?this.m_points[e]:null).Set(t.m_points[e]);this.m_localPlaneNormal.SetV(t.m_localPlaneNormal),this.m_localPoint.SetV(t.m_localPoint),this.m_type=t.m_type},A.prototype.Copy=function(){var t=new A;return t.Set(this),t},n.postDefs.push(function(){n.Collision.b2Manifold.e_circles=1,n.Collision.b2Manifold.e_faceA=2,n.Collision.b2Manifold.e_faceB=4}),D.b2ManifoldPoint=function(){this.m_localPoint=new h,this.m_id=new _},D.prototype.b2ManifoldPoint=function(){this.Reset()},D.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_normalImpulse=0,this.m_tangentImpulse=0,this.m_id.key=0},D.prototype.Set=function(t){this.m_localPoint.SetV(t.m_localPoint),this.m_normalImpulse=t.m_normalImpulse,this.m_tangentImpulse=t.m_tangentImpulse,this.m_id.Set(t.m_id)},B.b2Point=function(){this.p=new h},B.prototype.Support=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this.p},B.prototype.GetFirstVertex=function(t){return this.p},M.b2RayCastInput=function(){this.p1=new h,this.p2=new h},M.prototype.b2RayCastInput=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1),t&&this.p1.SetV(t),e&&this.p2.SetV(e),this.maxFraction=i},I.b2RayCastOutput=function(){this.normal=new h},P.b2Segment=function(){this.p1=new h,this.p2=new h},P.prototype.TestSegment=function(t,e,i,n){void 0===n&&(n=0);var o=i.p1,s=i.p2.x-o.x,r=i.p2.y-o.y,a=this.p2.x-this.p1.x,l=this.p2.y-this.p1.y,c=l,h=-a,u=100*Number.MIN_VALUE,m=-(s*c+r*h);if(m>u){var p=o.x-this.p1.x,f=o.y-this.p1.y,_=p*c+f*h;if(0<=_&&_<=n*m){var y=-s*f+r*p;if(-u*m<=y&&y<=m*(1+u)){_/=m;var d=Math.sqrt(c*c+h*h);return c/=d,h/=d,t[0]=_,e.Set(c,h),!0}}}return!1},P.prototype.Extend=function(t){this.ExtendForward(t),this.ExtendBackward(t)},P.prototype.ExtendForward=function(t){var e=this.p2.x-this.p1.x,i=this.p2.y-this.p1.y,n=Math.min(e>0?(t.upperBound.x-this.p1.x)/e:e<0?(t.lowerBound.x-this.p1.x)/e:Number.POSITIVE_INFINITY,i>0?(t.upperBound.y-this.p1.y)/i:i<0?(t.lowerBound.y-this.p1.y)/i:Number.POSITIVE_INFINITY);this.p2.x=this.p1.x+e*n,this.p2.y=this.p1.y+i*n},P.prototype.ExtendBackward=function(t){var e=-this.p2.x+this.p1.x,i=-this.p2.y+this.p1.y,n=Math.min(e>0?(t.upperBound.x-this.p2.x)/e:e<0?(t.lowerBound.x-this.p2.x)/e:Number.POSITIVE_INFINITY,i>0?(t.upperBound.y-this.p2.y)/i:i<0?(t.lowerBound.y-this.p2.y)/i:Number.POSITIVE_INFINITY);this.p1.x=this.p2.x+e*n,this.p1.y=this.p2.y+i*n},V.b2SeparationFunction=function(){this.m_localPoint=new h,this.m_axis=new h},V.prototype.Initialize=function(t,e,i,n,o){this.m_proxyA=e,this.m_proxyB=n;var s=parseInt(t.count);r.b2Assert(0<s&&s<3);var l,c,u,m,p,f,_,y,d=0,x=0,v=0,b=0,g=0,C=0,w=0;if(1==s)this.m_type=V.e_points,l=this.m_proxyA.GetVertex(t.indexA[0]),m=this.m_proxyB.GetVertex(t.indexB[0]),y=l,_=i.R,d=i.position.x+(_.col1.x*y.x+_.col2.x*y.y),x=i.position.y+(_.col1.y*y.x+_.col2.y*y.y),y=m,_=o.R,v=o.position.x+(_.col1.x*y.x+_.col2.x*y.y),b=o.position.y+(_.col1.y*y.x+_.col2.y*y.y),this.m_axis.x=v-d,this.m_axis.y=b-x,this.m_axis.Normalize();else if(t.indexB[0]==t.indexB[1])this.m_type=V.e_faceA,c=this.m_proxyA.GetVertex(t.indexA[0]),u=this.m_proxyA.GetVertex(t.indexA[1]),m=this.m_proxyB.GetVertex(t.indexB[0]),this.m_localPoint.x=.5*(c.x+u.x),this.m_localPoint.y=.5*(c.y+u.y),this.m_axis=a.CrossVF(a.SubtractVV(u,c),1),this.m_axis.Normalize(),y=this.m_axis,_=i.R,g=_.col1.x*y.x+_.col2.x*y.y,C=_.col1.y*y.x+_.col2.y*y.y,y=this.m_localPoint,_=i.R,d=i.position.x+(_.col1.x*y.x+_.col2.x*y.y),x=i.position.y+(_.col1.y*y.x+_.col2.y*y.y),y=m,_=o.R,v=o.position.x+(_.col1.x*y.x+_.col2.x*y.y),b=o.position.y+(_.col1.y*y.x+_.col2.y*y.y),(w=(v-d)*g+(b-x)*C)<0&&this.m_axis.NegativeSelf();else if(t.indexA[0]==t.indexA[0])this.m_type=V.e_faceB,p=this.m_proxyB.GetVertex(t.indexB[0]),f=this.m_proxyB.GetVertex(t.indexB[1]),l=this.m_proxyA.GetVertex(t.indexA[0]),this.m_localPoint.x=.5*(p.x+f.x),this.m_localPoint.y=.5*(p.y+f.y),this.m_axis=a.CrossVF(a.SubtractVV(f,p),1),this.m_axis.Normalize(),y=this.m_axis,_=o.R,g=_.col1.x*y.x+_.col2.x*y.y,C=_.col1.y*y.x+_.col2.y*y.y,y=this.m_localPoint,_=o.R,v=o.position.x+(_.col1.x*y.x+_.col2.x*y.y),b=o.position.y+(_.col1.y*y.x+_.col2.y*y.y),y=l,_=i.R,d=i.position.x+(_.col1.x*y.x+_.col2.x*y.y),x=i.position.y+(_.col1.y*y.x+_.col2.y*y.y),(w=(d-v)*g+(x-b)*C)<0&&this.m_axis.NegativeSelf();else{c=this.m_proxyA.GetVertex(t.indexA[0]),u=this.m_proxyA.GetVertex(t.indexA[1]),p=this.m_proxyB.GetVertex(t.indexB[0]),f=this.m_proxyB.GetVertex(t.indexB[1]);var S=(a.MulX(i,l),a.MulMV(i.R,a.SubtractVV(u,c))),A=(a.MulX(o,m),a.MulMV(o.R,a.SubtractVV(f,p))),D=S.x*S.x+S.y*S.y,B=A.x*A.x+A.y*A.y,M=a.SubtractVV(A,S),I=S.x*M.x+S.y*M.y,P=A.x*M.x+A.y*M.y,k=S.x*A.x+S.y*A.y,T=D*B-k*k;w=0,0!=T&&(w=a.Clamp((k*P-I*B)/T,0,1));var L=(k*w+P)/B;L<0&&(L=0,w=a.Clamp((k-I)/D,0,1)),l=new h,l.x=c.x+w*(u.x-c.x),l.y=c.y+w*(u.y-c.y),m=new h,m.x=p.x+w*(f.x-p.x),m.y=p.y+w*(f.y-p.y),0==w||1==w?(this.m_type=V.e_faceB,this.m_axis=a.CrossVF(a.SubtractVV(f,p),1),this.m_axis.Normalize(),this.m_localPoint=m,y=this.m_axis,_=o.R,g=_.col1.x*y.x+_.col2.x*y.y,C=_.col1.y*y.x+_.col2.y*y.y,y=this.m_localPoint,_=o.R,v=o.position.x+(_.col1.x*y.x+_.col2.x*y.y),b=o.position.y+(_.col1.y*y.x+_.col2.y*y.y),y=l,_=i.R,d=i.position.x+(_.col1.x*y.x+_.col2.x*y.y),x=i.position.y+(_.col1.y*y.x+_.col2.y*y.y),(d-v)*g+(x-b)*C,w<0&&this.m_axis.NegativeSelf()):(this.m_type=V.e_faceA,this.m_axis=a.CrossVF(a.SubtractVV(u,c),1),this.m_localPoint=l,y=this.m_axis,_=i.R,g=_.col1.x*y.x+_.col2.x*y.y,C=_.col1.y*y.x+_.col2.y*y.y,y=this.m_localPoint,_=i.R,d=i.position.x+(_.col1.x*y.x+_.col2.x*y.y),x=i.position.y+(_.col1.y*y.x+_.col2.y*y.y),y=m,_=o.R,v=o.position.x+(_.col1.x*y.x+_.col2.x*y.y),b=o.position.y+(_.col1.y*y.x+_.col2.y*y.y),(v-d)*g+(b-x)*C,w<0&&this.m_axis.NegativeSelf())}},V.prototype.Evaluate=function(t,e){var i,n,o,s,l,c,h;switch(this.m_type){case V.e_points:return i=a.MulTMV(t.R,this.m_axis),n=a.MulTMV(e.R,this.m_axis.GetNegative()),o=this.m_proxyA.GetSupportVertex(i),s=this.m_proxyB.GetSupportVertex(n),l=a.MulX(t,o),c=a.MulX(e,s),(c.x-l.x)*this.m_axis.x+(c.y-l.y)*this.m_axis.y;case V.e_faceA:return h=a.MulMV(t.R,this.m_axis),l=a.MulX(t,this.m_localPoint),n=a.MulTMV(e.R,h.GetNegative()),s=this.m_proxyB.GetSupportVertex(n),c=a.MulX(e,s),(c.x-l.x)*h.x+(c.y-l.y)*h.y;case V.e_faceB:return h=a.MulMV(e.R,this.m_axis),c=a.MulX(e,this.m_localPoint),i=a.MulTMV(t.R,h.GetNegative()),o=this.m_proxyA.GetSupportVertex(i),l=a.MulX(t,o),(l.x-c.x)*h.x+(l.y-c.y)*h.y;default:return r.b2Assert(!1),0}},n.postDefs.push(function(){n.Collision.b2SeparationFunction.e_points=1,n.Collision.b2SeparationFunction.e_faceA=2,n.Collision.b2SeparationFunction.e_faceB=4}),k.b2Simplex=function(){this.m_v1=new L,this.m_v2=new L,this.m_v3=new L,this.m_vertices=new o(3)},k.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},k.prototype.ReadCache=function(t,e,i,n,o){r.b2Assert(0<=t.count&&t.count<=3);var s,l;this.m_count=t.count;for(var c=this.m_vertices,h=0;h<this.m_count;h++){var u=c[h];u.indexA=t.indexA[h],u.indexB=t.indexB[h],s=e.GetVertex(u.indexA),l=n.GetVertex(u.indexB),u.wA=a.MulX(i,s),u.wB=a.MulX(o,l),u.w=a.SubtractVV(u.wB,u.wA),u.a=0}if(this.m_count>1){var m=t.metric,p=this.GetMetric();(p<.5*m||2*m<p||p<Number.MIN_VALUE)&&(this.m_count=0)}0==this.m_count&&(u=c[0],u.indexA=0,u.indexB=0,s=e.GetVertex(0),l=n.GetVertex(0),u.wA=a.MulX(i,s),u.wB=a.MulX(o,l),u.w=a.SubtractVV(u.wB,u.wA),this.m_count=1)},k.prototype.WriteCache=function(t){t.metric=this.GetMetric(),t.count=n.parseUInt(this.m_count);for(var e=this.m_vertices,i=0;i<this.m_count;i++)t.indexA[i]=n.parseUInt(e[i].indexA),t.indexB[i]=n.parseUInt(e[i].indexB)},k.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var t=a.SubtractVV(this.m_v2.w,this.m_v1.w);return a.CrossVV(t,this.m_v1.w.GetNegative())>0?a.CrossFV(1,t):a.CrossVF(t,1);default:return r.b2Assert(!1),new h}},k.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:return r.b2Assert(!1),new h;case 1:return this.m_v1.w;case 2:return new h(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return r.b2Assert(!1),new h}},k.prototype.GetWitnessPoints=function(t,e){switch(this.m_count){case 0:r.b2Assert(!1);break;case 1:t.SetV(this.m_v1.wA),e.SetV(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:r.b2Assert(!1)}},k.prototype.GetMetric=function(){switch(this.m_count){case 0:return r.b2Assert(!1),0;case 1:return 0;case 2:return a.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return a.CrossVV(a.SubtractVV(this.m_v2.w,this.m_v1.w),a.SubtractVV(this.m_v3.w,this.m_v1.w));default:return r.b2Assert(!1),0}},k.prototype.Solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=a.SubtractVV(e,t),n=-(t.x*i.x+t.y*i.y);if(n<=0)return this.m_v1.a=1,void(this.m_count=1);var o=e.x*i.x+e.y*i.y;if(o<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Set(this.m_v2);var s=1/(o+n);this.m_v1.a=o*s,this.m_v2.a=n*s,this.m_count=2},k.prototype.Solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,n=a.SubtractVV(e,t),o=a.Dot(t,n),s=a.Dot(e,n),r=s,l=-o,c=a.SubtractVV(i,t),h=a.Dot(t,c),u=a.Dot(i,c),m=u,p=-h,f=a.SubtractVV(i,e),_=a.Dot(e,f),y=a.Dot(i,f),d=y,x=-_,v=a.CrossVV(n,c),b=v*a.CrossVV(e,i),g=v*a.CrossVV(i,t),C=v*a.CrossVV(t,e);if(l<=0&&p<=0)return this.m_v1.a=1,void(this.m_count=1);if(r>0&&l>0&&C<=0){var w=1/(r+l);return this.m_v1.a=r*w,this.m_v2.a=l*w,void(this.m_count=2)}if(m>0&&p>0&&g<=0){var S=1/(m+p);return this.m_v1.a=m*S,this.m_v3.a=p*S,this.m_count=2,void this.m_v2.Set(this.m_v3)}if(r<=0&&x<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Set(this.m_v2);if(m<=0&&d<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Set(this.m_v3);if(d>0&&x>0&&b<=0){var A=1/(d+x);return this.m_v2.a=d*A,this.m_v3.a=x*A,this.m_count=2,void this.m_v1.Set(this.m_v3)}var D=1/(b+g+C);this.m_v1.a=b*D,this.m_v2.a=g*D,this.m_v3.a=C*D,this.m_count=3},T.b2SimplexCache=function(){this.indexA=new s(3),this.indexB=new s(3)},L.b2SimplexVertex=function(){},L.prototype.Set=function(t){this.wA.SetV(t.wA),this.wB.SetV(t.wB),this.w.SetV(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB},E.b2TimeOfImpact=function(){},E.TimeOfImpact=function(t){++E.b2_toiCalls;var e=t.proxyA,i=t.proxyB,n=t.sweepA,o=t.sweepB;r.b2Assert(n.t0==o.t0),r.b2Assert(1-n.t0>Number.MIN_VALUE);var s=e.m_radius+i.m_radius,l=t.tolerance,c=0,h=0,u=0;for(E.s_cache.count=0,E.s_distanceInput.useRadii=!1;;){if(n.GetTransform(E.s_xfA,c),o.GetTransform(E.s_xfB,c),E.s_distanceInput.proxyA=e,E.s_distanceInput.proxyB=i,E.s_distanceInput.transformA=E.s_xfA,E.s_distanceInput.transformB=E.s_xfB,d.Distance(E.s_distanceOutput,E.s_cache,E.s_distanceInput),E.s_distanceOutput.distance<=0){c=1;break}E.s_fcn.Initialize(E.s_cache,e,E.s_xfA,i,E.s_xfB);var m=E.s_fcn.Evaluate(E.s_xfA,E.s_xfB);if(m<=0){c=1;break}if(0==h&&(u=m>s?a.Max(s-l,.75*s):a.Max(m-l,.02*s)),m-u<.5*l){if(0==h){c=1;break}break}var p=c,f=c,_=1,y=m;n.GetTransform(E.s_xfA,_),o.GetTransform(E.s_xfB,_);var x=E.s_fcn.Evaluate(E.s_xfA,E.s_xfB);if(x>=u){c=1;break}for(var v=0;;){var b=0;b=1&v?f+(u-y)*(_-f)/(x-y):.5*(f+_),n.GetTransform(E.s_xfA,b),o.GetTransform(E.s_xfB,b);var g=E.s_fcn.Evaluate(E.s_xfA,E.s_xfB);if(a.Abs(g-u)<.025*l){p=b;break}if(g>u?(f=b,y=g):(_=b,x=g),++v,++E.b2_toiRootIters,50==v)break}if(E.b2_toiMaxRootIters=a.Max(E.b2_toiMaxRootIters,v),p<(1+100*Number.MIN_VALUE)*c)break;if(c=p,h++,++E.b2_toiIters,1e3==h)break}return E.b2_toiMaxIters=a.Max(E.b2_toiMaxIters,h),c},n.postDefs.push(function(){n.Collision.b2TimeOfImpact.b2_toiCalls=0,n.Collision.b2TimeOfImpact.b2_toiIters=0,n.Collision.b2TimeOfImpact.b2_toiMaxIters=0,n.Collision.b2TimeOfImpact.b2_toiRootIters=0,n.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0,n.Collision.b2TimeOfImpact.s_cache=new T,n.Collision.b2TimeOfImpact.s_distanceInput=new x,n.Collision.b2TimeOfImpact.s_xfA=new c,n.Collision.b2TimeOfImpact.s_xfB=new c,n.Collision.b2TimeOfImpact.s_fcn=new V,n.Collision.b2TimeOfImpact.s_distanceOutput=new v}),F.b2TOIInput=function(){this.proxyA=new b,this.proxyB=new b,this.sweepA=new l,this.sweepB=new l},R.b2WorldManifold=function(){this.m_normal=new h},R.prototype.b2WorldManifold=function(){this.m_points=new o(r.b2_maxManifoldPoints);for(var t=0;t<r.b2_maxManifoldPoints;t++)this.m_points[t]=new h},R.prototype.Initialize=function(t,e,i,n,o){if(void 0===i&&(i=0),void 0===o&&(o=0),0!=t.m_pointCount){var s,r,a=0,l=0,c=0,h=0,u=0,m=0,p=0;switch(t.m_type){case A.e_circles:r=e.R,s=t.m_localPoint;var f=e.position.x+r.col1.x*s.x+r.col2.x*s.y,_=e.position.y+r.col1.y*s.x+r.col2.y*s.y;r=n.R,s=t.m_points[0].m_localPoint;var y=n.position.x+r.col1.x*s.x+r.col2.x*s.y,d=n.position.y+r.col1.y*s.x+r.col2.y*s.y,x=y-f,v=d-_,b=x*x+v*v;if(b>Number.MIN_VALUE*Number.MIN_VALUE){var g=Math.sqrt(b);this.m_normal.x=x/g,this.m_normal.y=v/g}else this.m_normal.x=1,this.m_normal.y=0;var C=f+i*this.m_normal.x,w=_+i*this.m_normal.y,S=y-o*this.m_normal.x,D=d-o*this.m_normal.y;this.m_points[0].x=.5*(C+S),this.m_points[0].y=.5*(w+D);break;case A.e_faceA:for(r=e.R,s=t.m_localPlaneNormal,l=r.col1.x*s.x+r.col2.x*s.y,c=r.col1.y*s.x+r.col2.y*s.y,r=e.R,s=t.m_localPoint,h=e.position.x+r.col1.x*s.x+r.col2.x*s.y,u=e.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_normal.x=l,this.m_normal.y=c,a=0;a<t.m_pointCount;a++)r=n.R,s=t.m_points[a].m_localPoint,m=n.position.x+r.col1.x*s.x+r.col2.x*s.y,p=n.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_points[a].x=m+.5*(i-(m-h)*l-(p-u)*c-o)*l,this.m_points[a].y=p+.5*(i-(m-h)*l-(p-u)*c-o)*c;break;case A.e_faceB:for(r=n.R,s=t.m_localPlaneNormal,l=r.col1.x*s.x+r.col2.x*s.y,c=r.col1.y*s.x+r.col2.y*s.y,r=n.R,s=t.m_localPoint,h=n.position.x+r.col1.x*s.x+r.col2.x*s.y,u=n.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_normal.x=-l,this.m_normal.y=-c,a=0;a<t.m_pointCount;a++)r=e.R,s=t.m_points[a].m_localPoint,m=e.position.x+r.col1.x*s.x+r.col2.x*s.y,p=e.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_points[a].x=m+.5*(o-(m-h)*l-(p-u)*c-i)*l,this.m_points[a].y=p+.5*(o-(m-h)*l-(p-u)*c-i)*c}}},G.ClipVertex=function(){this.v=new h,this.id=new _},G.prototype.Set=function(t){this.v.SetV(t.v),this.id.Set(t.id)},N.Features=function(){},Object.defineProperty(N.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:function(){return this._referenceEdge}}),Object.defineProperty(N.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._referenceEdge=t,this._m_id._key=4294967040&this._m_id._key|255&this._referenceEdge}}),Object.defineProperty(N.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:function(){return this._incidentEdge}}),Object.defineProperty(N.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentEdge=t,this._m_id._key=4294902015&this._m_id._key|this._incidentEdge<<8&65280}}),Object.defineProperty(N.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:function(){return this._incidentVertex}}),Object.defineProperty(N.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentVertex=t,this._m_id._key=4278255615&this._m_id._key|this._incidentVertex<<16&16711680}}),Object.defineProperty(N.prototype,"flip",{enumerable:!1,configurable:!0,get:function(){return this._flip}}),Object.defineProperty(N.prototype,"flip",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._flip=t,this._m_id._key=16777215&this._m_id._key|this._flip<<24&4278190080}})}(),function(){var t=(n.Common.b2Color,n.Common.b2internal,n.Common.b2Settings),e=n.Collision.Shapes.b2CircleShape,i=n.Collision.Shapes.b2EdgeChainDef,r=n.Collision.Shapes.b2EdgeShape,a=n.Collision.Shapes.b2MassData,l=n.Collision.Shapes.b2PolygonShape,c=n.Collision.Shapes.b2Shape,h=n.Common.Math.b2Mat22,u=(n.Common.Math.b2Mat33,n.Common.Math.b2Math),m=(n.Common.Math.b2Sweep,n.Common.Math.b2Transform),p=n.Common.Math.b2Vec2,f=(n.Common.Math.b2Vec3,n.Dynamics.b2Body,n.Dynamics.b2BodyDef,n.Dynamics.b2ContactFilter,n.Dynamics.b2ContactImpulse,n.Dynamics.b2ContactListener,n.Dynamics.b2ContactManager,n.Dynamics.b2DebugDraw,n.Dynamics.b2DestructionListener,n.Dynamics.b2FilterData,n.Dynamics.b2Fixture,n.Dynamics.b2FixtureDef,n.Dynamics.b2Island,n.Dynamics.b2TimeStep,n.Dynamics.b2World,n.Collision.b2AABB,n.Collision.b2Bound,n.Collision.b2BoundValues,n.Collision.b2Collision,n.Collision.b2ContactID,n.Collision.b2ContactPoint,n.Collision.b2Distance),_=n.Collision.b2DistanceInput,y=n.Collision.b2DistanceOutput,d=n.Collision.b2DistanceProxy,x=(n.Collision.b2DynamicTree,n.Collision.b2DynamicTreeBroadPhase,n.Collision.b2DynamicTreeNode,n.Collision.b2DynamicTreePair,n.Collision.b2Manifold,n.Collision.b2ManifoldPoint,n.Collision.b2Point,n.Collision.b2RayCastInput,n.Collision.b2RayCastOutput,n.Collision.b2Segment,n.Collision.b2SeparationFunction,n.Collision.b2Simplex,n.Collision.b2SimplexCache);n.Collision.b2SimplexVertex,n.Collision.b2TimeOfImpact,n.Collision.b2TOIInput,n.Collision.b2WorldManifold,n.Collision.ClipVertex,n.Collision.Features,n.Collision.IBroadPhase;n.inherit(e,n.Collision.Shapes.b2Shape),e.prototype.__super=n.Collision.Shapes.b2Shape.prototype,e.b2CircleShape=function(){n.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.m_p=new p},e.prototype.Copy=function(){var t=new e;return t.Set(this),t},e.prototype.Set=function(t){if(this.__super.Set.call(this,t),n.is(t,e)){var i=t instanceof e?t:null;this.m_p.SetV(i.m_p)}},e.prototype.TestPoint=function(t,e){var i=t.R,n=t.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),o=t.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y);return n=e.x-n,o=e.y-o,n*n+o*o<=this.m_radius*this.m_radius},e.prototype.RayCast=function(t,e,i){var n=i.R,o=i.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),s=i.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y),r=e.p1.x-o,a=e.p1.y-s,l=r*r+a*a-this.m_radius*this.m_radius,c=e.p2.x-e.p1.x,h=e.p2.y-e.p1.y,u=r*c+a*h,m=c*c+h*h,p=u*u-m*l;if(p<0||m<Number.MIN_VALUE)return!1;var f=-(u+Math.sqrt(p));return 0<=f&&f<=e.maxFraction*m&&(f/=m,t.fraction=f,t.normal.x=r+f*c,t.normal.y=a+f*h,t.normal.Normalize(),!0)},e.prototype.ComputeAABB=function(t,e){var i=e.R,n=e.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),o=e.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y);t.lowerBound.Set(n-this.m_radius,o-this.m_radius),t.upperBound.Set(n+this.m_radius,o+this.m_radius)},e.prototype.ComputeMass=function(e,i){void 0===i&&(i=0),e.mass=i*t.b2_pi*this.m_radius*this.m_radius,e.center.SetV(this.m_p),e.I=e.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},e.prototype.ComputeSubmergedArea=function(t,e,i,n){void 0===e&&(e=0);var o=u.MulX(i,this.m_p),s=-(u.Dot(t,o)-e);if(s<-this.m_radius+Number.MIN_VALUE)return 0;if(s>this.m_radius)return n.SetV(o),Math.PI*this.m_radius*this.m_radius;var r=this.m_radius*this.m_radius,a=s*s,l=r*(Math.asin(s/this.m_radius)+Math.PI/2)+s*Math.sqrt(r-a),c=-2/3*Math.pow(r-a,1.5)/l;return n.x=o.x+t.x*c,n.y=o.y+t.y*c,l},e.prototype.GetLocalPosition=function(){return this.m_p},e.prototype.SetLocalPosition=function(t){this.m_p.SetV(t)},e.prototype.GetRadius=function(){return this.m_radius},e.prototype.SetRadius=function(t){void 0===t&&(t=0),this.m_radius=t},e.prototype.b2CircleShape=function(t){void 0===t&&(t=0),this.__super.b2Shape.call(this),this.m_type=c.e_circleShape,this.m_radius=t},i.b2EdgeChainDef=function(){},i.prototype.b2EdgeChainDef=function(){this.vertexCount=0,this.isALoop=!0,this.vertices=[]},n.inherit(r,n.Collision.Shapes.b2Shape),r.prototype.__super=n.Collision.Shapes.b2Shape.prototype,r.b2EdgeShape=function(){n.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.s_supportVec=new p,this.m_v1=new p,this.m_v2=new p,this.m_coreV1=new p,this.m_coreV2=new p,this.m_normal=new p,this.m_direction=new p,this.m_cornerDir1=new p,this.m_cornerDir2=new p},r.prototype.TestPoint=function(t,e){return!1},r.prototype.RayCast=function(t,e,i){var n,o=e.p2.x-e.p1.x,s=e.p2.y-e.p1.y;n=i.R;var r=i.position.x+(n.col1.x*this.m_v1.x+n.col2.x*this.m_v1.y),a=i.position.y+(n.col1.y*this.m_v1.x+n.col2.y*this.m_v1.y),l=i.position.y+(n.col1.y*this.m_v2.x+n.col2.y*this.m_v2.y)-a,c=-(i.position.x+(n.col1.x*this.m_v2.x+n.col2.x*this.m_v2.y)-r),h=100*Number.MIN_VALUE,u=-(o*l+s*c);if(u>h){var m=e.p1.x-r,p=e.p1.y-a,f=m*l+p*c;if(0<=f&&f<=e.maxFraction*u){var _=-o*p+s*m;if(-h*u<=_&&_<=u*(1+h)){f/=u,t.fraction=f;var y=Math.sqrt(l*l+c*c);return t.normal.x=l/y,t.normal.y=c/y,!0}}}return!1},r.prototype.ComputeAABB=function(t,e){var i=e.R,n=e.position.x+(i.col1.x*this.m_v1.x+i.col2.x*this.m_v1.y),o=e.position.y+(i.col1.y*this.m_v1.x+i.col2.y*this.m_v1.y),s=e.position.x+(i.col1.x*this.m_v2.x+i.col2.x*this.m_v2.y),r=e.position.y+(i.col1.y*this.m_v2.x+i.col2.y*this.m_v2.y);n<s?(t.lowerBound.x=n,t.upperBound.x=s):(t.lowerBound.x=s,t.upperBound.x=n),o<r?(t.lowerBound.y=o,t.upperBound.y=r):(t.lowerBound.y=r,t.upperBound.y=o)},r.prototype.ComputeMass=function(t,e){void 0===e&&(e=0),t.mass=0,t.center.SetV(this.m_v1),t.I=0},r.prototype.ComputeSubmergedArea=function(t,e,i,n){void 0===e&&(e=0);var o=new p(t.x*e,t.y*e),s=u.MulX(i,this.m_v1),r=u.MulX(i,this.m_v2),a=u.Dot(t,s)-e,l=u.Dot(t,r)-e;if(a>0){if(l>0)return 0;s.x=-l/(a-l)*s.x+a/(a-l)*r.x,s.y=-l/(a-l)*s.y+a/(a-l)*r.y}else l>0&&(r.x=-l/(a-l)*s.x+a/(a-l)*r.x,r.y=-l/(a-l)*s.y+a/(a-l)*r.y);return n.x=(o.x+s.x+r.x)/3,n.y=(o.y+s.y+r.y)/3,.5*((s.x-o.x)*(r.y-o.y)-(s.y-o.y)*(r.x-o.x))},r.prototype.GetLength=function(){return this.m_length},r.prototype.GetVertex1=function(){return this.m_v1},r.prototype.GetVertex2=function(){return this.m_v2},r.prototype.GetCoreVertex1=function(){return this.m_coreV1},r.prototype.GetCoreVertex2=function(){return this.m_coreV2},r.prototype.GetNormalVector=function(){return this.m_normal},r.prototype.GetDirectionVector=function(){return this.m_direction},r.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},r.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},r.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},r.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},r.prototype.GetFirstVertex=function(t){var e=t.R;return new p(t.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y),t.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y))},r.prototype.GetNextEdge=function(){return this.m_nextEdge},r.prototype.GetPrevEdge=function(){return this.m_prevEdge},r.prototype.Support=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=t.R,o=t.position.x+(n.col1.x*this.m_coreV1.x+n.col2.x*this.m_coreV1.y),s=t.position.y+(n.col1.y*this.m_coreV1.x+n.col2.y*this.m_coreV1.y),r=t.position.x+(n.col1.x*this.m_coreV2.x+n.col2.x*this.m_coreV2.y),a=t.position.y+(n.col1.y*this.m_coreV2.x+n.col2.y*this.m_coreV2.y);return o*e+s*i>r*e+a*i?(this.s_supportVec.x=o,this.s_supportVec.y=s):(this.s_supportVec.x=r,this.s_supportVec.y=a),this.s_supportVec},r.prototype.b2EdgeShape=function(e,i){this.__super.b2Shape.call(this),this.m_type=c.e_edgeShape,this.m_prevEdge=null,this.m_nextEdge=null,this.m_v1=e,this.m_v2=i,this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.Normalize(),this.m_normal.Set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.Set(-t.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-t.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.Set(-t.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-t.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)},r.prototype.SetPrevEdge=function(t,e,i,n){this.m_prevEdge=t,this.m_coreV1=e,this.m_cornerDir1=i,this.m_cornerConvex1=n},r.prototype.SetNextEdge=function(t,e,i,n){this.m_nextEdge=t,this.m_coreV2=e,this.m_cornerDir2=i,this.m_cornerConvex2=n},a.b2MassData=function(){this.mass=0,this.center=new p(0,0),this.I=0},n.inherit(l,n.Collision.Shapes.b2Shape),l.prototype.__super=n.Collision.Shapes.b2Shape.prototype,l.b2PolygonShape=function(){n.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments)},l.prototype.Copy=function(){var t=new l;return t.Set(this),t},l.prototype.Set=function(t){if(this.__super.Set.call(this,t),n.is(t,l)){var e=t instanceof l?t:null;this.m_centroid.SetV(e.m_centroid),this.m_vertexCount=e.m_vertexCount,this.Reserve(this.m_vertexCount);for(var i=0;i<this.m_vertexCount;i++)this.m_vertices[i].SetV(e.m_vertices[i]),this.m_normals[i].SetV(e.m_normals[i])}},l.prototype.SetAsArray=function(t,e){void 0===e&&(e=0);var i,n=new o,s=0;for(s=0;s<t.length;++s)i=t[s],n.push(i);this.SetAsVector(n,e)},l.AsArray=function(t,e){void 0===e&&(e=0);var i=new l;return i.SetAsArray(t,e),i},l.prototype.SetAsVector=function(e,i){void 0===i&&(i=0),0==i&&(i=e.length),t.b2Assert(2<=i),this.m_vertexCount=i,this.Reserve(i);var n=0;for(n=0;n<this.m_vertexCount;n++)this.m_vertices[n].SetV(e[n]);for(n=0;n<this.m_vertexCount;++n){var o=parseInt(n),s=parseInt(n+1<this.m_vertexCount?n+1:0),r=u.SubtractVV(this.m_vertices[s],this.m_vertices[o]);t.b2Assert(r.LengthSquared()>Number.MIN_VALUE),this.m_normals[n].SetV(u.CrossVF(r,1)),this.m_normals[n].Normalize()}this.m_centroid=l.ComputeCentroid(this.m_vertices,this.m_vertexCount)},l.AsVector=function(t,e){void 0===e&&(e=0);var i=new l;return i.SetAsVector(t,e),i},l.prototype.SetAsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},l.AsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=new l;return i.SetAsBox(t,e),i},l.prototype.SetAsOrientedBox=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),void 0===n&&(n=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=i;var o=new m;o.position=i,o.R.Set(n);for(var s=0;s<this.m_vertexCount;++s)this.m_vertices[s]=u.MulX(o,this.m_vertices[s]),this.m_normals[s]=u.MulMV(o.R,this.m_normals[s])},l.AsOrientedBox=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),void 0===n&&(n=0);var o=new l;return o.SetAsOrientedBox(t,e,i,n),o},l.prototype.SetAsEdge=function(t,e){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(t),this.m_vertices[1].SetV(e),this.m_centroid.x=.5*(t.x+e.x),this.m_centroid.y=.5*(t.y+e.y),this.m_normals[0]=u.CrossVF(u.SubtractVV(e,t),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},l.AsEdge=function(t,e){var i=new l;return i.SetAsEdge(t,e),i},l.prototype.TestPoint=function(t,e){for(var i,n=t.R,o=e.x-t.position.x,s=e.y-t.position.y,r=o*n.col1.x+s*n.col1.y,a=o*n.col2.x+s*n.col2.y,l=0;l<this.m_vertexCount;++l){i=this.m_vertices[l],o=r-i.x,s=a-i.y,i=this.m_normals[l];if(i.x*o+i.y*s>0)return!1}return!0},l.prototype.RayCast=function(t,e,i){var n,o,s=0,r=e.maxFraction,a=0,l=0;a=e.p1.x-i.position.x,l=e.p1.y-i.position.y,n=i.R;var c=a*n.col1.x+l*n.col1.y,h=a*n.col2.x+l*n.col2.y;a=e.p2.x-i.position.x,l=e.p2.y-i.position.y,n=i.R;for(var u=a*n.col1.x+l*n.col1.y,m=a*n.col2.x+l*n.col2.y,p=u-c,f=m-h,_=parseInt(-1),y=0;y<this.m_vertexCount;++y){o=this.m_vertices[y],a=o.x-c,l=o.y-h,o=this.m_normals[y];var d=o.x*a+o.y*l,x=o.x*p+o.y*f;if(0==x){if(d<0)return!1}else x<0&&d<s*x?(s=d/x,_=y):x>0&&d<r*x&&(r=d/x);if(r<s-Number.MIN_VALUE)return!1}return _>=0&&(t.fraction=s,n=i.R,o=this.m_normals[_],t.normal.x=n.col1.x*o.x+n.col2.x*o.y,t.normal.y=n.col1.y*o.x+n.col2.y*o.y,!0)},l.prototype.ComputeAABB=function(t,e){for(var i=e.R,n=this.m_vertices[0],o=e.position.x+(i.col1.x*n.x+i.col2.x*n.y),s=e.position.y+(i.col1.y*n.x+i.col2.y*n.y),r=o,a=s,l=1;l<this.m_vertexCount;++l){n=this.m_vertices[l];var c=e.position.x+(i.col1.x*n.x+i.col2.x*n.y),h=e.position.y+(i.col1.y*n.x+i.col2.y*n.y);o=o<c?o:c,s=s<h?s:h,r=r>c?r:c,a=a>h?a:h}t.lowerBound.x=o-this.m_radius,t.lowerBound.y=s-this.m_radius,t.upperBound.x=r+this.m_radius,t.upperBound.y=a+this.m_radius},l.prototype.ComputeMass=function(t,e){if(void 0===e&&(e=0),2==this.m_vertexCount)return t.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),t.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),t.mass=0,void(t.I=0);for(var i=0,n=0,o=0,s=0,r=0;r<this.m_vertexCount;++r){var a=this.m_vertices[r],l=r+1<this.m_vertexCount?this.m_vertices[parseInt(r+1)]:this.m_vertices[0],c=a.x-0,h=a.y-0,u=l.x-0,m=l.y-0,p=c*m-h*u,f=.5*p;o+=f,i+=f*(1/3)*(0+a.x+l.x),n+=f*(1/3)*(0+a.y+l.y);var _=c,y=h,d=u,x=m;s+=p*(1/3*(.25*(_*_+d*_+d*d)+(0*_+0*d))+0+(1/3*(.25*(y*y+x*y+x*x)+(0*y+0*x))+0))}t.mass=e*o,i*=1/o,n*=1/o,t.center.Set(i,n),t.I=e*s},l.prototype.ComputeSubmergedArea=function(t,e,i,n){void 0===e&&(e=0);var o=u.MulTMV(i.R,t),r=e-u.Dot(t,i.position),l=new s,c=0,h=parseInt(-1),m=parseInt(-1),f=!1,_=0;for(_=0;_<this.m_vertexCount;++_){l[_]=u.Dot(o,this.m_vertices[_])-r;var y=l[_]<-Number.MIN_VALUE;_>0&&(y?f||(h=_-1,c++):f&&(m=_-1,c++)),f=y}switch(c){case 0:if(f){var d=new a;return this.ComputeMass(d,1),n.SetV(u.MulX(i,d.center)),d.mass}return 0;case 1:-1==h?h=this.m_vertexCount-1:m=this.m_vertexCount-1}var x,v=parseInt((h+1)%this.m_vertexCount),b=parseInt((m+1)%this.m_vertexCount),g=(0-l[h])/(l[v]-l[h]),C=(0-l[m])/(l[b]-l[m]),w=new p(this.m_vertices[h].x*(1-g)+this.m_vertices[v].x*g,this.m_vertices[h].y*(1-g)+this.m_vertices[v].y*g),S=new p(this.m_vertices[m].x*(1-C)+this.m_vertices[b].x*C,this.m_vertices[m].y*(1-C)+this.m_vertices[b].y*C),A=0,D=new p,B=this.m_vertices[v];for(_=v;_!=b;){_=(_+1)%this.m_vertexCount,x=_==b?S:this.m_vertices[_];var M=.5*((B.x-w.x)*(x.y-w.y)-(B.y-w.y)*(x.x-w.x));A+=M,D.x+=M*(w.x+B.x+x.x)/3,D.y+=M*(w.y+B.y+x.y)/3,B=x}return D.Multiply(1/A),n.SetV(u.MulX(i,D)),A},l.prototype.GetVertexCount=function(){return this.m_vertexCount},l.prototype.GetVertices=function(){return this.m_vertices},l.prototype.GetNormals=function(){return this.m_normals},l.prototype.GetSupport=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_vertexCount;++n){var o=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;o>i&&(e=n,i=o)}return e},l.prototype.GetSupportVertex=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_vertexCount;++n){var o=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;o>i&&(e=n,i=o)}return this.m_vertices[e]},l.prototype.Validate=function(){return!1},l.prototype.b2PolygonShape=function(){this.__super.b2Shape.call(this),this.m_type=c.e_polygonShape,this.m_centroid=new p,this.m_vertices=new o,this.m_normals=new o},l.prototype.Reserve=function(t){void 0===t&&(t=0);for(var e=parseInt(this.m_vertices.length);e<t;e++)this.m_vertices[e]=new p,this.m_normals[e]=new p},l.ComputeCentroid=function(t,e){void 0===e&&(e=0);for(var i=new p,n=0,o=0;o<e;++o){var s=t[o],r=o+1<e?t[parseInt(o+1)]:t[0],a=s.x-0,l=s.y-0,c=r.x-0,h=r.y-0,u=a*h-l*c,m=.5*u;n+=m,i.x+=m*(1/3)*(0+s.x+r.x),i.y+=m*(1/3)*(0+s.y+r.y)}return i.x*=1/n,i.y*=1/n,i},l.ComputeOBB=function(t,e,i){void 0===i&&(i=0);var n=0,s=new o(i+1);for(n=0;n<i;++n)s[n]=e[n];s[i]=s[0];var r=Number.MAX_VALUE;for(n=1;n<=i;++n){var a=s[parseInt(n-1)],l=s[n].x-a.x,c=s[n].y-a.y,h=Math.sqrt(l*l+c*c);l/=h,c/=h;for(var u=-c,m=l,p=Number.MAX_VALUE,f=Number.MAX_VALUE,_=-Number.MAX_VALUE,y=-Number.MAX_VALUE,d=0;d<i;++d){var x=s[d].x-a.x,v=s[d].y-a.y,b=l*x+c*v,g=u*x+m*v;b<p&&(p=b),g<f&&(f=g),b>_&&(_=b),g>y&&(y=g)}var C=(_-p)*(y-f);if(C<.95*r){r=C,t.R.col1.x=l,t.R.col1.y=c,t.R.col2.x=u,t.R.col2.y=m;var w=.5*(p+_),S=.5*(f+y),A=t.R;t.center.x=a.x+(A.col1.x*w+A.col2.x*S),t.center.y=a.y+(A.col1.y*w+A.col2.y*S),t.extents.x=.5*(_-p),t.extents.y=.5*(y-f)}}},n.postDefs.push(function(){n.Collision.Shapes.b2PolygonShape.s_mat=new h}),c.b2Shape=function(){},c.prototype.Copy=function(){return null},c.prototype.Set=function(t){this.m_radius=t.m_radius},c.prototype.GetType=function(){return this.m_type},c.prototype.TestPoint=function(t,e){return!1},c.prototype.RayCast=function(t,e,i){return!1},c.prototype.ComputeAABB=function(t,e){},c.prototype.ComputeMass=function(t,e){void 0===e&&(e=0)},c.prototype.ComputeSubmergedArea=function(t,e,i,n){return void 0===e&&(e=0),0},c.TestOverlap=function(t,e,i,n){var o=new _;o.proxyA=new d,o.proxyA.Set(t),o.proxyB=new d,o.proxyB.Set(i),o.transformA=e,o.transformB=n,o.useRadii=!0;var s=new x;s.count=0;var r=new y;return f.Distance(r,s,o),r.distance<10*Number.MIN_VALUE},c.prototype.b2Shape=function(){this.m_type=c.e_unknownShape,this.m_radius=t.b2_linearSlop},n.postDefs.push(function(){n.Collision.Shapes.b2Shape.e_unknownShape=parseInt(-1),n.Collision.Shapes.b2Shape.e_circleShape=0,n.Collision.Shapes.b2Shape.e_polygonShape=1,n.Collision.Shapes.b2Shape.e_edgeShape=2,n.Collision.Shapes.b2Shape.e_shapeTypeCount=3,n.Collision.Shapes.b2Shape.e_hitCollide=1,n.Collision.Shapes.b2Shape.e_missCollide=0,n.Collision.Shapes.b2Shape.e_startsInsideCollide=parseInt(-1)})}(),function(){var t=n.Common.b2Color,e=(n.Common.b2internal,n.Common.b2Settings),i=(n.Common.Math.b2Mat22,n.Common.Math.b2Mat33,n.Common.Math.b2Math);n.Common.Math.b2Sweep,n.Common.Math.b2Transform,n.Common.Math.b2Vec2,n.Common.Math.b2Vec3;t.b2Color=function(){this._r=0,this._g=0,this._b=0},t.prototype.b2Color=function(t,e,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o=0),this._r=n.parseUInt(255*i.Clamp(t,0,1)),this._g=n.parseUInt(255*i.Clamp(e,0,1)),this._b=n.parseUInt(255*i.Clamp(o,0,1))},t.prototype.Set=function(t,e,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o=0),this._r=n.parseUInt(255*i.Clamp(t,0,1)),this._g=n.parseUInt(255*i.Clamp(e,0,1)),this._b=n.parseUInt(255*i.Clamp(o,0,1))},Object.defineProperty(t.prototype,"r",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._r=n.parseUInt(255*i.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"g",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._g=n.parseUInt(255*i.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"b",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._b=n.parseUInt(255*i.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}),e.b2Settings=function(){},e.b2MixFriction=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),Math.sqrt(t*e)},e.b2MixRestitution=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},e.b2Assert=function(t){if(!t)throw"Assertion Failed"},n.postDefs.push(function(){n.Common.b2Settings.VERSION="2.1alpha",n.Common.b2Settings.USHRT_MAX=65535,n.Common.b2Settings.b2_pi=Math.PI,n.Common.b2Settings.b2_maxManifoldPoints=2,n.Common.b2Settings.b2_aabbExtension=.1,n.Common.b2Settings.b2_aabbMultiplier=2,n.Common.b2Settings.b2_polygonRadius=2*e.b2_linearSlop,n.Common.b2Settings.b2_linearSlop=.005,n.Common.b2Settings.b2_angularSlop=2/180*e.b2_pi,n.Common.b2Settings.b2_toiSlop=8*e.b2_linearSlop,n.Common.b2Settings.b2_maxTOIContactsPerIsland=32,n.Common.b2Settings.b2_maxTOIJointsPerIsland=32,n.Common.b2Settings.b2_velocityThreshold=1,n.Common.b2Settings.b2_maxLinearCorrection=.2,n.Common.b2Settings.b2_maxAngularCorrection=8/180*e.b2_pi,n.Common.b2Settings.b2_maxTranslation=2,n.Common.b2Settings.b2_maxTranslationSquared=e.b2_maxTranslation*e.b2_maxTranslation,n.Common.b2Settings.b2_maxRotation=.5*e.b2_pi,n.Common.b2Settings.b2_maxRotationSquared=e.b2_maxRotation*e.b2_maxRotation,n.Common.b2Settings.b2_contactBaumgarte=.2,n.Common.b2Settings.b2_timeToSleep=.5,n.Common.b2Settings.b2_linearSleepTolerance=.01,n.Common.b2Settings.b2_angularSleepTolerance=2/180*e.b2_pi})}(),function(){var t=(n.Collision.b2AABB,n.Common.b2Color,n.Common.b2internal,n.Common.b2Settings,n.Common.Math.b2Mat22),e=n.Common.Math.b2Mat33,i=n.Common.Math.b2Math,o=n.Common.Math.b2Sweep,s=n.Common.Math.b2Transform,r=n.Common.Math.b2Vec2,a=n.Common.Math.b2Vec3;t.b2Mat22=function(){this.col1=new r,this.col2=new r},t.prototype.b2Mat22=function(){this.SetIdentity()},t.FromAngle=function(e){void 0===e&&(e=0);var i=new t;return i.Set(e),i},t.FromVV=function(e,i){var n=new t;return n.SetVV(e,i),n},t.prototype.Set=function(t){void 0===t&&(t=0);var e=Math.cos(t),i=Math.sin(t);this.col1.x=e,this.col2.x=-i,this.col1.y=i,this.col2.y=e},t.prototype.SetVV=function(t,e){this.col1.SetV(t),this.col2.SetV(e)},t.prototype.Copy=function(){var e=new t;return e.SetM(this),e},t.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2)},t.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y},t.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},t.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},t.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},t.prototype.GetInverse=function(t){var e=this.col1.x,i=this.col2.x,n=this.col1.y,o=this.col2.y,s=e*o-i*n;return 0!=s&&(s=1/s),t.col1.x=s*o,t.col2.x=-s*i,t.col1.y=-s*n,t.col2.y=s*e,t},t.prototype.Solve=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=this.col1.x,o=this.col2.x,s=this.col1.y,r=this.col2.y,a=n*r-o*s;return 0!=a&&(a=1/a),t.x=a*(r*e-o*i),t.y=a*(n*i-s*e),t},t.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},e.b2Mat33=function(){this.col1=new a,this.col2=new a,this.col3=new a},e.prototype.b2Mat33=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),t||e||i?(this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(i)):(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero())},e.prototype.SetVVV=function(t,e,i){this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(i)},e.prototype.Copy=function(){return new e(this.col1,this.col2,this.col3)},e.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2),this.col3.SetV(t.col3)},e.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col1.z+=t.col1.z,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y,this.col2.z+=t.col2.z,this.col3.x+=t.col3.x,this.col3.y+=t.col3.y,this.col3.z+=t.col3.z},e.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},e.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},e.prototype.Solve22=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=this.col1.x,o=this.col2.x,s=this.col1.y,r=this.col2.y,a=n*r-o*s;return 0!=a&&(a=1/a),t.x=a*(r*e-o*i),t.y=a*(n*i-s*e),t},e.prototype.Solve33=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=this.col1.x,s=this.col1.y,r=this.col1.z,a=this.col2.x,l=this.col2.y,c=this.col2.z,h=this.col3.x,u=this.col3.y,m=this.col3.z,p=o*(l*m-c*u)+s*(c*h-a*m)+r*(a*u-l*h);return 0!=p&&(p=1/p),t.x=p*(e*(l*m-c*u)+i*(c*h-a*m)+n*(a*u-l*h)),t.y=p*(o*(i*m-n*u)+s*(n*h-e*m)+r*(e*u-i*h)),t.z=p*(o*(l*n-c*i)+s*(c*e-a*n)+r*(a*i-l*e)),t},i.b2Math=function(){},i.IsValid=function(t){return void 0===t&&(t=0),isFinite(t)},i.Dot=function(t,e){return t.x*e.x+t.y*e.y},i.CrossVV=function(t,e){return t.x*e.y-t.y*e.x},i.CrossVF=function(t,e){return void 0===e&&(e=0),new r(e*t.y,-e*t.x)},i.CrossFV=function(t,e){return void 0===t&&(t=0),new r(-t*e.y,t*e.x)},i.MulMV=function(t,e){return new r(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y)},i.MulTMV=function(t,e){return new r(i.Dot(e,t.col1),i.Dot(e,t.col2))},i.MulX=function(t,e){var n=i.MulMV(t.R,e);return n.x+=t.position.x,n.y+=t.position.y,n},i.MulXT=function(t,e){var n=i.SubtractVV(e,t.position),o=n.x*t.R.col1.x+n.y*t.R.col1.y;return n.y=n.x*t.R.col2.x+n.y*t.R.col2.y,n.x=o,n},i.AddVV=function(t,e){return new r(t.x+e.x,t.y+e.y)},i.SubtractVV=function(t,e){return new r(t.x-e.x,t.y-e.y)},i.Distance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},i.DistanceSquared=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},i.MulFV=function(t,e){return void 0===t&&(t=0),new r(t*e.x,t*e.y)},i.AddMM=function(e,n){return t.FromVV(i.AddVV(e.col1,n.col1),i.AddVV(e.col2,n.col2))},i.MulMM=function(e,n){return t.FromVV(i.MulMV(e,n.col1),i.MulMV(e,n.col2))},i.MulTMM=function(e,n){var o=new r(i.Dot(e.col1,n.col1),i.Dot(e.col2,n.col1)),s=new r(i.Dot(e.col1,n.col2),i.Dot(e.col2,n.col2));return t.FromVV(o,s)},i.Abs=function(t){return void 0===t&&(t=0),t>0?t:-t},i.AbsV=function(t){return new r(i.Abs(t.x),i.Abs(t.y))},i.AbsM=function(e){return t.FromVV(i.AbsV(e.col1),i.AbsV(e.col2))},i.Min=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t<e?t:e},i.MinV=function(t,e){return new r(i.Min(t.x,e.x),i.Min(t.y,e.y))},i.Max=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},i.MaxV=function(t,e){return new r(i.Max(t.x,e.x),i.Max(t.y,e.y))},i.Clamp=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),t<e?e:t>i?i:t},i.ClampV=function(t,e,n){return i.MaxV(e,i.MinV(t,n))},i.Swap=function(t,e){var i=t[0];t[0]=e[0],e[0]=i},i.Random=function(){return 2*Math.random()-1},i.RandomRange=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=Math.random();return i=(e-t)*i+t},i.NextPowerOfTwo=function(t){return void 0===t&&(t=0),t|=t>>1&2147483647,t|=t>>2&1073741823,t|=t>>4&268435455,t|=t>>8&16777215,(t|=t>>16&65535)+1},i.IsPowerOfTwo=function(t){return void 0===t&&(t=0),t>0&&0==(t&t-1)},n.postDefs.push(function(){n.Common.Math.b2Math.b2Vec2_zero=new r(0,0),n.Common.Math.b2Math.b2Mat22_identity=t.FromVV(new r(1,0),new r(0,1)),n.Common.Math.b2Math.b2Transform_identity=new s(i.b2Vec2_zero,i.b2Mat22_identity)}),o.b2Sweep=function(){this.localCenter=new r,this.c0=new r,this.c=new r},o.prototype.Set=function(t){this.localCenter.SetV(t.localCenter),this.c0.SetV(t.c0),this.c.SetV(t.c),this.a0=t.a0,this.a=t.a,this.t0=t.t0},o.prototype.Copy=function(){var t=new o;return t.localCenter.SetV(this.localCenter),t.c0.SetV(this.c0),t.c.SetV(this.c),t.a0=this.a0,t.a=this.a,t.t0=this.t0,t},o.prototype.GetTransform=function(t,e){void 0===e&&(e=0),t.position.x=(1-e)*this.c0.x+e*this.c.x,t.position.y=(1-e)*this.c0.y+e*this.c.y;var i=(1-e)*this.a0+e*this.a;t.R.Set(i);var n=t.R;t.position.x-=n.col1.x*this.localCenter.x+n.col2.x*this.localCenter.y,t.position.y-=n.col1.y*this.localCenter.x+n.col2.y*this.localCenter.y},o.prototype.Advance=function(t){if(void 0===t&&(t=0),this.t0<t&&1-this.t0>Number.MIN_VALUE){var e=(t-this.t0)/(1-this.t0);this.c0.x=(1-e)*this.c0.x+e*this.c.x,this.c0.y=(1-e)*this.c0.y+e*this.c.y,this.a0=(1-e)*this.a0+e*this.a,this.t0=t}},s.b2Transform=function(){this.position=new r,this.R=new t},s.prototype.b2Transform=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&(this.position.SetV(t),this.R.SetM(e))},s.prototype.Initialize=function(t,e){this.position.SetV(t),this.R.SetM(e)},s.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},s.prototype.Set=function(t){this.position.SetV(t.position),this.R.SetM(t.R)},s.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},r.b2Vec2=function(){},r.prototype.b2Vec2=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},r.prototype.SetZero=function(){this.x=0,this.y=0},r.prototype.Set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},r.prototype.SetV=function(t){this.x=t.x,this.y=t.y},r.prototype.GetNegative=function(){return new r(-this.x,-this.y)},r.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},r.Make=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new r(t,e)},r.prototype.Copy=function(){return new r(this.x,this.y)},r.prototype.Add=function(t){this.x+=t.x,this.y+=t.y},r.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y},r.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t},r.prototype.MulM=function(t){var e=this.x;this.x=t.col1.x*e+t.col2.x*this.y,this.y=t.col1.y*e+t.col2.y*this.y},r.prototype.MulTM=function(t){var e=i.Dot(this,t.col1);this.y=i.Dot(this,t.col2),this.x=e},r.prototype.CrossVF=function(t){void 0===t&&(t=0);var e=this.x;this.x=t*this.y,this.y=-t*e},r.prototype.CrossFV=function(t){void 0===t&&(t=0);var e=this.x;this.x=-t*this.y,this.y=t*e},r.prototype.MinV=function(t){this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y},r.prototype.MaxV=function(t){this.x=this.x>t.x?this.x:t.x,this.y=this.y>t.y?this.y:t.y},r.prototype.Abs=function(){this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y)},r.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},r.prototype.Normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t<Number.MIN_VALUE)return 0;var e=1/t;return this.x*=e,this.y*=e,t},r.prototype.IsValid=function(){return i.IsValid(this.x)&&i.IsValid(this.y)},a.b2Vec3=function(){},a.prototype.b2Vec3=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i},a.prototype.SetZero=function(){this.x=this.y=this.z=0},a.prototype.Set=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i},a.prototype.SetV=function(t){this.x=t.x,this.y=t.y,this.z=t.z},a.prototype.GetNegative=function(){return new a(-this.x,-this.y,-this.z)},a.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},a.prototype.Copy=function(){return new a(this.x,this.y,this.z)},a.prototype.Add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},a.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},a.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t,this.z*=t}}(),function(){var t=(n.Dynamics.Controllers.b2ControllerEdge,n.Common.Math.b2Mat22,n.Common.Math.b2Mat33,n.Common.Math.b2Math),e=n.Common.Math.b2Sweep,i=n.Common.Math.b2Transform,r=n.Common.Math.b2Vec2,a=(n.Common.Math.b2Vec3,n.Common.b2Color),l=(n.Common.b2internal,n.Common.b2Settings),c=n.Collision.b2AABB,h=(n.Collision.b2Bound,n.Collision.b2BoundValues,n.Collision.b2Collision,n.Collision.b2ContactID,n.Collision.b2ContactPoint),u=(n.Collision.b2Distance,n.Collision.b2DistanceInput,n.Collision.b2DistanceOutput,n.Collision.b2DistanceProxy,n.Collision.b2DynamicTree,n.Collision.b2DynamicTreeBroadPhase),m=(n.Collision.b2DynamicTreeNode,n.Collision.b2DynamicTreePair,n.Collision.b2Manifold,n.Collision.b2ManifoldPoint,n.Collision.b2Point,n.Collision.b2RayCastInput),p=n.Collision.b2RayCastOutput,f=(n.Collision.b2Segment,n.Collision.b2SeparationFunction,n.Collision.b2Simplex,n.Collision.b2SimplexCache,n.Collision.b2SimplexVertex,n.Collision.b2TimeOfImpact,n.Collision.b2TOIInput,n.Collision.b2WorldManifold,n.Collision.ClipVertex,n.Collision.Features,n.Collision.IBroadPhase,n.Collision.Shapes.b2CircleShape),_=(n.Collision.Shapes.b2EdgeChainDef,n.Collision.Shapes.b2EdgeShape),y=n.Collision.Shapes.b2MassData,d=n.Collision.Shapes.b2PolygonShape,x=n.Collision.Shapes.b2Shape,v=n.Dynamics.b2Body,b=n.Dynamics.b2BodyDef,g=n.Dynamics.b2ContactFilter,C=n.Dynamics.b2ContactImpulse,w=n.Dynamics.b2ContactListener,S=n.Dynamics.b2ContactManager,A=n.Dynamics.b2DebugDraw,D=n.Dynamics.b2DestructionListener,B=n.Dynamics.b2FilterData,M=n.Dynamics.b2Fixture,I=n.Dynamics.b2FixtureDef,P=n.Dynamics.b2Island,V=n.Dynamics.b2TimeStep,k=n.Dynamics.b2World,T=(n.Dynamics.Contacts.b2CircleContact,n.Dynamics.Contacts.b2Contact),L=(n.Dynamics.Contacts.b2ContactConstraint,n.Dynamics.Contacts.b2ContactConstraintPoint,n.Dynamics.Contacts.b2ContactEdge,n.Dynamics.Contacts.b2ContactFactory),E=(n.Dynamics.Contacts.b2ContactRegister,n.Dynamics.Contacts.b2ContactResult,n.Dynamics.Contacts.b2ContactSolver),F=(n.Dynamics.Contacts.b2EdgeAndCircleContact,n.Dynamics.Contacts.b2NullContact,n.Dynamics.Contacts.b2PolyAndCircleContact,n.Dynamics.Contacts.b2PolyAndEdgeContact,n.Dynamics.Contacts.b2PolygonContact,n.Dynamics.Contacts.b2PositionSolverManifold,n.Dynamics.Controllers.b2Controller,n.Dynamics.Joints.b2DistanceJoint,n.Dynamics.Joints.b2DistanceJointDef,n.Dynamics.Joints.b2FrictionJoint,n.Dynamics.Joints.b2FrictionJointDef,n.Dynamics.Joints.b2GearJoint,n.Dynamics.Joints.b2GearJointDef,n.Dynamics.Joints.b2Jacobian,n.Dynamics.Joints.b2Joint),R=(n.Dynamics.Joints.b2JointDef,n.Dynamics.Joints.b2JointEdge,n.Dynamics.Joints.b2LineJoint,n.Dynamics.Joints.b2LineJointDef,n.Dynamics.Joints.b2MouseJoint,n.Dynamics.Joints.b2MouseJointDef,n.Dynamics.Joints.b2PrismaticJoint,n.Dynamics.Joints.b2PrismaticJointDef,n.Dynamics.Joints.b2PulleyJoint);n.Dynamics.Joints.b2PulleyJointDef,n.Dynamics.Joints.b2RevoluteJoint,n.Dynamics.Joints.b2RevoluteJointDef,n.Dynamics.Joints.b2WeldJoint,n.Dynamics.Joints.b2WeldJointDef;v.b2Body=function(){this.m_xf=new i,this.m_sweep=new e,this.m_linearVelocity=new r,this.m_force=new r},v.prototype.connectEdges=function(e,i,n){void 0===n&&(n=0);var o=Math.atan2(i.GetDirectionVector().y,i.GetDirectionVector().x),s=Math.tan(.5*(o-n)),r=t.MulFV(s,i.GetDirectionVector());r=t.SubtractVV(r,i.GetNormalVector()),r=t.MulFV(l.b2_toiSlop,r),r=t.AddVV(r,i.GetVertex1());var a=t.AddVV(e.GetDirectionVector(),i.GetDirectionVector());a.Normalize();var c=t.Dot(e.GetDirectionVector(),i.GetNormalVector())>0;return e.SetNextEdge(i,r,a,c),i.SetPrevEdge(e,r,a,c),o},v.prototype.CreateFixture=function(t){if(1==this.m_world.IsLocked())return null;var e=new M;if(e.Create(this,this.m_xf,t),this.m_flags&v.e_activeFlag){var i=this.m_world.m_contactManager.m_broadPhase;e.CreateProxy(i,this.m_xf)}return e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_body=this,e.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=k.e_newFixture,e},v.prototype.CreateFixture2=function(t,e){void 0===e&&(e=0);var i=new I;return i.shape=t,i.density=e,this.CreateFixture(i)},v.prototype.DestroyFixture=function(t){if(1!=this.m_world.IsLocked()){for(var e=this.m_fixtureList,i=null;null!=e;){if(e==t){i?i.m_next=t.m_next:this.m_fixtureList=t.m_next,!0;break}i=e,e=e.m_next}for(var n=this.m_contactList;n;){var o=n.contact;n=n.next;var s=o.GetFixtureA(),r=o.GetFixtureB();t!=s&&t!=r||this.m_world.m_contactManager.Destroy(o)}if(this.m_flags&v.e_activeFlag){var a=this.m_world.m_contactManager.m_broadPhase;t.DestroyProxy(a)}t.Destroy(),t.m_body=null,t.m_next=null,--this.m_fixtureCount,this.ResetMassData()}},v.prototype.SetPositionAndAngle=function(t,e){void 0===e&&(e=0);var i;if(1!=this.m_world.IsLocked()){this.m_xf.R.Set(e),this.m_xf.position.SetV(t);var n=this.m_xf.R,o=this.m_sweep.localCenter;this.m_sweep.c.x=n.col1.x*o.x+n.col2.x*o.y,this.m_sweep.c.y=n.col1.y*o.x+n.col2.y*o.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=e;var s=this.m_world.m_contactManager.m_broadPhase;for(i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(s,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}},v.prototype.SetTransform=function(t){this.SetPositionAndAngle(t.position,t.GetAngle())},v.prototype.GetTransform=function(){return this.m_xf},v.prototype.GetPosition=function(){return this.m_xf.position},v.prototype.SetPosition=function(t){this.SetPositionAndAngle(t,this.GetAngle())},v.prototype.GetAngle=function(){return this.m_sweep.a},v.prototype.SetAngle=function(t){void 0===t&&(t=0),this.SetPositionAndAngle(this.GetPosition(),t)},v.prototype.GetWorldCenter=function(){return this.m_sweep.c},v.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},v.prototype.SetLinearVelocity=function(t){this.m_type!=v.b2_staticBody&&this.m_linearVelocity.SetV(t)},v.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},v.prototype.SetAngularVelocity=function(t){void 0===t&&(t=0),this.m_type!=v.b2_staticBody&&(this.m_angularVelocity=t)},v.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},v.prototype.GetDefinition=function(){var t=new b;return t.type=this.GetType(),t.allowSleep=(this.m_flags&v.e_allowSleepFlag)==v.e_allowSleepFlag,t.angle=this.GetAngle(),t.angularDamping=this.m_angularDamping,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=(this.m_flags&v.e_fixedRotationFlag)==v.e_fixedRotationFlag,t.bullet=(this.m_flags&v.e_bulletFlag)==v.e_bulletFlag,t.awake=(this.m_flags&v.e_awakeFlag)==v.e_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.SetV(this.GetLinearVelocity()),t.position=this.GetPosition(),t.userData=this.GetUserData(),t},v.prototype.ApplyForce=function(t,e){this.m_type==v.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)},v.prototype.ApplyTorque=function(t){void 0===t&&(t=0),this.m_type==v.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_torque+=t)},v.prototype.ApplyImpulse=function(t,e){this.m_type==v.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))},v.prototype.Split=function(e){for(var i,n=this.GetLinearVelocity().Copy(),o=this.GetAngularVelocity(),s=this.GetWorldCenter(),r=this,a=this.m_world.CreateBody(this.GetDefinition()),l=r.m_fixtureList;l;)if(e(l)){var c=l.m_next;i?i.m_next=c:r.m_fixtureList=c,r.m_fixtureCount--,l.m_next=a.m_fixtureList,a.m_fixtureList=l,a.m_fixtureCount++,l.m_body=a,l=c}else i=l,l=l.m_next;r.ResetMassData(),a.ResetMassData();var h=r.GetWorldCenter(),u=a.GetWorldCenter(),m=t.AddVV(n,t.CrossFV(o,t.SubtractVV(h,s))),p=t.AddVV(n,t.CrossFV(o,t.SubtractVV(u,s)));return r.SetLinearVelocity(m),a.SetLinearVelocity(p),r.SetAngularVelocity(o),a.SetAngularVelocity(o),r.SynchronizeFixtures(),a.SynchronizeFixtures(),a},v.prototype.Merge=function(t){var e;for(e=t.m_fixtureList;e;){var i=e.m_next;t.m_fixtureCount--,e.m_next=this.m_fixtureList,this.m_fixtureList=e,this.m_fixtureCount++,e.m_body=o,e=i}n.m_fixtureCount=0;var n=this,o=t;n.GetWorldCenter(),o.GetWorldCenter(),n.GetLinearVelocity().Copy(),o.GetLinearVelocity().Copy(),n.GetAngularVelocity(),o.GetAngularVelocity();n.ResetMassData(),this.SynchronizeFixtures()},v.prototype.GetMass=function(){return this.m_mass},v.prototype.GetInertia=function(){return this.m_I},v.prototype.GetMassData=function(t){t.mass=this.m_mass,t.I=this.m_I,t.center.SetV(this.m_sweep.localCenter)},v.prototype.SetMassData=function(e){if(l.b2Assert(0==this.m_world.IsLocked()),1!=this.m_world.IsLocked()&&this.m_type==v.b2_dynamicBody){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&0==(this.m_flags&v.e_fixedRotationFlag)&&(this.m_I=e.I-this.m_mass*(e.center.x*e.center.x+e.center.y*e.center.y),this.m_invI=1/this.m_I);var i=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e.center),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-i.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-i.x)}},v.prototype.ResetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type!=v.b2_staticBody&&this.m_type!=v.b2_kinematicBody){for(var e=r.Make(0,0),i=this.m_fixtureList;i;i=i.m_next)if(0!=i.m_density){var n=i.GetMassData();this.m_mass+=n.mass,e.x+=n.center.x*n.mass,e.y+=n.center.y*n.mass,this.m_I+=n.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==(this.m_flags&v.e_fixedRotationFlag)?(this.m_I-=this.m_mass*(e.x*e.x+e.y*e.y),this.m_I*=this.m_inertiaScale,l.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var o=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-o.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-o.x)}},v.prototype.GetWorldPoint=function(t){var e=this.m_xf.R,i=new r(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return i.x+=this.m_xf.position.x,i.y+=this.m_xf.position.y,i},v.prototype.GetWorldVector=function(e){return t.MulMV(this.m_xf.R,e)},v.prototype.GetLocalPoint=function(e){return t.MulXT(this.m_xf,e)},v.prototype.GetLocalVector=function(e){return t.MulTMV(this.m_xf.R,e)},v.prototype.GetLinearVelocityFromWorldPoint=function(t){return new r(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},v.prototype.GetLinearVelocityFromLocalPoint=function(t){var e=this.m_xf.R,i=new r(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return i.x+=this.m_xf.position.x,i.y+=this.m_xf.position.y,new r(this.m_linearVelocity.x-this.m_angularVelocity*(i.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(i.x-this.m_sweep.c.x))},v.prototype.GetLinearDamping=function(){return this.m_linearDamping},v.prototype.SetLinearDamping=function(t){void 0===t&&(t=0),this.m_linearDamping=t},v.prototype.GetAngularDamping=function(){return this.m_angularDamping},v.prototype.SetAngularDamping=function(t){void 0===t&&(t=0),this.m_angularDamping=t},v.prototype.SetType=function(t){if(void 0===t&&(t=0),this.m_type!=t){this.m_type=t,this.ResetMassData(),this.m_type==v.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var e=this.m_contactList;e;e=e.next)e.contact.FlagForFiltering()}},v.prototype.GetType=function(){return this.m_type},v.prototype.SetBullet=function(t){t?this.m_flags|=v.e_bulletFlag:this.m_flags&=~v.e_bulletFlag},v.prototype.IsBullet=function(){return(this.m_flags&v.e_bulletFlag)==v.e_bulletFlag},v.prototype.SetSleepingAllowed=function(t){t?this.m_flags|=v.e_allowSleepFlag:(this.m_flags&=~v.e_allowSleepFlag,this.SetAwake(!0))},v.prototype.SetAwake=function(t){t?(this.m_flags|=v.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~v.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},v.prototype.IsAwake=function(){return(this.m_flags&v.e_awakeFlag)==v.e_awakeFlag},v.prototype.SetFixedRotation=function(t){t?this.m_flags|=v.e_fixedRotationFlag:this.m_flags&=~v.e_fixedRotationFlag,this.ResetMassData()},v.prototype.IsFixedRotation=function(){return(this.m_flags&v.e_fixedRotationFlag)==v.e_fixedRotationFlag},v.prototype.SetActive=function(t){if(t!=this.IsActive()){var e,i;if(t)for(this.m_flags|=v.e_activeFlag,e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.CreateProxy(e,this.m_xf);else{for(this.m_flags&=~v.e_activeFlag,e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.DestroyProxy(e);for(var n=this.m_contactList;n;){var o=n;n=n.next,this.m_world.m_contactManager.Destroy(o.contact)}this.m_contactList=null}}},v.prototype.IsActive=function(){return(this.m_flags&v.e_activeFlag)==v.e_activeFlag},v.prototype.IsSleepingAllowed=function(){return(this.m_flags&v.e_allowSleepFlag)==v.e_allowSleepFlag},v.prototype.GetFixtureList=function(){return this.m_fixtureList},v.prototype.GetJointList=function(){return this.m_jointList},v.prototype.GetControllerList=function(){return this.m_controllerList},v.prototype.GetContactList=function(){return this.m_contactList},v.prototype.GetNext=function(){return this.m_next},v.prototype.GetUserData=function(){return this.m_userData},v.prototype.SetUserData=function(t){this.m_userData=t},v.prototype.GetWorld=function(){return this.m_world},v.prototype.b2Body=function(t,e){this.m_flags=0,t.bullet&&(this.m_flags|=v.e_bulletFlag),t.fixedRotation&&(this.m_flags|=v.e_fixedRotationFlag),t.allowSleep&&(this.m_flags|=v.e_allowSleepFlag),t.awake&&(this.m_flags|=v.e_awakeFlag),t.active&&(this.m_flags|=v.e_activeFlag),this.m_world=e,this.m_xf.position.SetV(t.position),this.m_xf.R.Set(t.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=t.angle;var i=this.m_xf.R,n=this.m_sweep.localCenter;this.m_sweep.c.x=i.col1.x*n.x+i.col2.x*n.y,this.m_sweep.c.y=i.col1.y*n.x+i.col2.y*n.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_jointList=null,this.m_controllerList=null,this.m_contactList=null,this.m_controllerCount=0,this.m_prev=null,this.m_next=null,this.m_linearVelocity.SetV(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_force.Set(0,0),this.m_torque=0,this.m_sleepTime=0,this.m_type=t.type,this.m_type==v.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_inertiaScale=t.inertiaScale,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0},v.prototype.SynchronizeFixtures=function(){var t=v.s_xf1;t.R.Set(this.m_sweep.a0);var e=t.R,i=this.m_sweep.localCenter;t.position.x=this.m_sweep.c0.x-(e.col1.x*i.x+e.col2.x*i.y),t.position.y=this.m_sweep.c0.y-(e.col1.y*i.x+e.col2.y*i.y);var n,o=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.Synchronize(o,t,this.m_xf)},v.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var t=this.m_xf.R,e=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(t.col1.x*e.x+t.col2.x*e.y),this.m_xf.position.y=this.m_sweep.c.y-(t.col1.y*e.x+t.col2.y*e.y)},v.prototype.ShouldCollide=function(t){if(this.m_type!=v.b2_dynamicBody&&t.m_type!=v.b2_dynamicBody)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},v.prototype.Advance=function(t){void 0===t&&(t=0),this.m_sweep.Advance(t),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},n.postDefs.push(function(){n.Dynamics.b2Body.s_xf1=new i,n.Dynamics.b2Body.e_islandFlag=1,n.Dynamics.b2Body.e_awakeFlag=2,n.Dynamics.b2Body.e_allowSleepFlag=4,n.Dynamics.b2Body.e_bulletFlag=8,n.Dynamics.b2Body.e_fixedRotationFlag=16,n.Dynamics.b2Body.e_activeFlag=32,n.Dynamics.b2Body.b2_staticBody=0,n.Dynamics.b2Body.b2_kinematicBody=1,n.Dynamics.b2Body.b2_dynamicBody=2}),b.b2BodyDef=function(){this.position=new r,this.linearVelocity=new r},b.prototype.b2BodyDef=function(){this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.Set(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.type=v.b2_staticBody,this.active=!0,this.inertiaScale=1},g.b2ContactFilter=function(){},g.prototype.ShouldCollide=function(t,e){var i=t.GetFilterData(),n=e.GetFilterData();return i.groupIndex==n.groupIndex&&0!=i.groupIndex?i.groupIndex>0:0!=(i.maskBits&n.categoryBits)&&0!=(i.categoryBits&n.maskBits)},g.prototype.RayCollide=function(t,e){return!t||this.ShouldCollide(t instanceof M?t:null,e)},n.postDefs.push(function(){n.Dynamics.b2ContactFilter.b2_defaultFilter=new g}),C.b2ContactImpulse=function(){this.normalImpulses=new s(l.b2_maxManifoldPoints),this.tangentImpulses=new s(l.b2_maxManifoldPoints)},w.b2ContactListener=function(){},w.prototype.BeginContact=function(t){},w.prototype.EndContact=function(t){},w.prototype.PreSolve=function(t,e){},w.prototype.PostSolve=function(t,e){},n.postDefs.push(function(){n.Dynamics.b2ContactListener.b2_defaultListener=new w}),S.b2ContactManager=function(){},S.prototype.b2ContactManager=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=g.b2_defaultFilter,this.m_contactListener=w.b2_defaultListener,this.m_contactFactory=new L(this.m_allocator),this.m_broadPhase=new u},S.prototype.AddPair=function(t,e){var i=t instanceof M?t:null,n=e instanceof M?e:null,o=i.GetBody(),s=n.GetBody();if(o!=s){for(var r=s.GetContactList();r;){if(r.other==o){var a=r.contact.GetFixtureA(),l=r.contact.GetFixtureB();if(a==i&&l==n)return;if(a==n&&l==i)return}r=r.next}if(0!=s.ShouldCollide(o)&&0!=this.m_contactFilter.ShouldCollide(i,n)){var c=this.m_contactFactory.Create(i,n);i=c.GetFixtureA(),n=c.GetFixtureB(),o=i.m_body,s=n.m_body,c.m_prev=null,c.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=c),this.m_world.m_contactList=c,c.m_nodeA.contact=c,c.m_nodeA.other=s,c.m_nodeA.prev=null,c.m_nodeA.next=o.m_contactList,null!=o.m_contactList&&(o.m_contactList.prev=c.m_nodeA),o.m_contactList=c.m_nodeA,c.m_nodeB.contact=c,c.m_nodeB.other=o,c.m_nodeB.prev=null,c.m_nodeB.next=s.m_contactList,null!=s.m_contactList&&(s.m_contactList.prev=c.m_nodeB),s.m_contactList=c.m_nodeB,++this.m_world.m_contactCount}}},S.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(n.generateCallback(this,this.AddPair))},S.prototype.Destroy=function(t){var e=t.GetFixtureA(),i=t.GetFixtureB(),n=e.GetBody(),o=i.GetBody();t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_world.m_contactList&&(this.m_world.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==n.m_contactList&&(n.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==o.m_contactList&&(o.m_contactList=t.m_nodeB.next),this.m_contactFactory.Destroy(t),--this.m_contactCount},S.prototype.Collide=function(){for(var t=this.m_world.m_contactList;t;){var e=t.GetFixtureA(),i=t.GetFixtureB(),n=e.GetBody(),o=i.GetBody();if(0!=n.IsAwake()||0!=o.IsAwake()){if(t.m_flags&T.e_filterFlag){if(0==o.ShouldCollide(n)){var s=t;t=s.GetNext(),this.Destroy(s);continue}if(0==this.m_contactFilter.ShouldCollide(e,i)){s=t,t=s.GetNext(),this.Destroy(s);continue}t.m_flags&=~T.e_filterFlag}var r=e.m_proxy,a=i.m_proxy;0!=this.m_broadPhase.TestOverlap(r,a)?(t.Update(this.m_contactListener),t=t.GetNext()):(s=t,t=s.GetNext(),this.Destroy(s))}else t=t.GetNext()}},n.postDefs.push(function(){n.Dynamics.b2ContactManager.s_evalCP=new h}),A.b2DebugDraw=function(){},A.prototype.b2DebugDraw=function(){},A.prototype.SetFlags=function(t){void 0===t&&(t=0)},A.prototype.GetFlags=function(){},A.prototype.AppendFlags=function(t){void 0===t&&(t=0)},A.prototype.ClearFlags=function(t){void 0===t&&(t=0)},A.prototype.SetSprite=function(t){},A.prototype.GetSprite=function(){},A.prototype.SetDrawScale=function(t){void 0===t&&(t=0)},A.prototype.GetDrawScale=function(){},A.prototype.SetLineThickness=function(t){void 0===t&&(t=0)},A.prototype.GetLineThickness=function(){},A.prototype.SetAlpha=function(t){void 0===t&&(t=0)},A.prototype.GetAlpha=function(){},A.prototype.SetFillAlpha=function(t){void 0===t&&(t=0)},A.prototype.GetFillAlpha=function(){},A.prototype.SetXFormScale=function(t){void 0===t&&(t=0)},A.prototype.GetXFormScale=function(){},A.prototype.DrawPolygon=function(t,e,i){void 0===e&&(e=0)},A.prototype.DrawSolidPolygon=function(t,e,i){void 0===e&&(e=0)},A.prototype.DrawCircle=function(t,e,i){void 0===e&&(e=0)},A.prototype.DrawSolidCircle=function(t,e,i,n){void 0===e&&(e=0)},A.prototype.DrawSegment=function(t,e,i){},A.prototype.DrawTransform=function(t){},n.postDefs.push(function(){n.Dynamics.b2DebugDraw.e_shapeBit=1,n.Dynamics.b2DebugDraw.e_jointBit=2,n.Dynamics.b2DebugDraw.e_aabbBit=4,n.Dynamics.b2DebugDraw.e_pairBit=8,n.Dynamics.b2DebugDraw.e_centerOfMassBit=16,n.Dynamics.b2DebugDraw.e_controllerBit=32}),D.b2DestructionListener=function(){},D.prototype.SayGoodbyeJoint=function(t){},D.prototype.SayGoodbyeFixture=function(t){},B.b2FilterData=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0},B.prototype.Copy=function(){var t=new B;return t.categoryBits=this.categoryBits,t.maskBits=this.maskBits,t.groupIndex=this.groupIndex,t},M.b2Fixture=function(){this.m_filter=new B},M.prototype.GetType=function(){return this.m_shape.GetType()},M.prototype.GetShape=function(){return this.m_shape},M.prototype.SetSensor=function(t){if(this.m_isSensor!=t&&(this.m_isSensor=t,null!=this.m_body))for(var e=this.m_body.GetContactList();e;){var i=e.contact,n=i.GetFixtureA(),o=i.GetFixtureB();n!=this&&o!=this||i.SetSensor(n.IsSensor()||o.IsSensor()),e=e.next}},M.prototype.IsSensor=function(){return this.m_isSensor},M.prototype.SetFilterData=function(t){if(this.m_filter=t.Copy(),!this.m_body)for(var e=this.m_body.GetContactList();e;){var i=e.contact,n=i.GetFixtureA(),o=i.GetFixtureB();n!=this&&o!=this||i.FlagForFiltering(),e=e.next}},M.prototype.GetFilterData=function(){return this.m_filter.Copy()},M.prototype.GetBody=function(){return this.m_body},M.prototype.GetNext=function(){return this.m_next},M.prototype.GetUserData=function(){return this.m_userData},M.prototype.SetUserData=function(t){this.m_userData=t},M.prototype.TestPoint=function(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)},M.prototype.RayCast=function(t,e){return this.m_shape.RayCast(t,e,this.m_body.GetTransform())},M.prototype.GetMassData=function(t){return void 0===t&&(t=null),null==t&&(t=new y),this.m_shape.ComputeMass(t,this.m_density),t},M.prototype.SetDensity=function(t){void 0===t&&(t=0),this.m_density=t},M.prototype.GetDensity=function(){return this.m_density},M.prototype.GetFriction=function(){return this.m_friction},M.prototype.SetFriction=function(t){void 0===t&&(t=0),this.m_friction=t},M.prototype.GetRestitution=function(){return this.m_restitution},M.prototype.SetRestitution=function(t){void 0===t&&(t=0),this.m_restitution=t},M.prototype.GetAABB=function(){return this.m_aabb},M.prototype.b2Fixture=function(){this.m_aabb=new c,this.m_userData=null,this.m_body=null,this.m_next=null,this.m_shape=null,this.m_density=0,this.m_friction=0,this.m_restitution=0},M.prototype.Create=function(t,e,i){this.m_userData=i.userData,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_body=t,this.m_next=null,this.m_filter=i.filter.Copy(),this.m_isSensor=i.isSensor,this.m_shape=i.shape.Copy(),this.m_density=i.density},M.prototype.Destroy=function(){this.m_shape=null},M.prototype.CreateProxy=function(t,e){this.m_shape.ComputeAABB(this.m_aabb,e),this.m_proxy=t.CreateProxy(this.m_aabb,this)},M.prototype.DestroyProxy=function(t){null!=this.m_proxy&&(t.DestroyProxy(this.m_proxy),this.m_proxy=null)},M.prototype.Synchronize=function(e,i,n){if(this.m_proxy){var o=new c,s=new c;this.m_shape.ComputeAABB(o,i),this.m_shape.ComputeAABB(s,n),this.m_aabb.Combine(o,s);var r=t.SubtractVV(n.position,i.position);e.MoveProxy(this.m_proxy,this.m_aabb,r)}},I.b2FixtureDef=function(){this.filter=new B},I.prototype.b2FixtureDef=function(){this.shape=null,this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1},P.b2Island=function(){},P.prototype.b2Island=function(){this.m_bodies=new o,this.m_contacts=new o,this.m_joints=new o},P.prototype.Initialize=function(t,e,i,n,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var r=0;for(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=i,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=n,this.m_listener=o,this.m_contactSolver=s,r=this.m_bodies.length;r<t;r++)this.m_bodies[r]=null;for(r=this.m_contacts.length;r<e;r++)this.m_contacts[r]=null;for(r=this.m_joints.length;r<i;r++)this.m_joints[r]=null},P.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},P.prototype.Solve=function(e,i,n){var o,s,r=0,a=0;for(r=0;r<this.m_bodyCount;++r)o=this.m_bodies[r],o.GetType()==v.b2_dynamicBody&&(o.m_linearVelocity.x+=e.dt*(i.x+o.m_invMass*o.m_force.x),o.m_linearVelocity.y+=e.dt*(i.y+o.m_invMass*o.m_force.y),o.m_angularVelocity+=e.dt*o.m_invI*o.m_torque,o.m_linearVelocity.Multiply(t.Clamp(1-e.dt*o.m_linearDamping,0,1)),o.m_angularVelocity*=t.Clamp(1-e.dt*o.m_angularDamping,0,1));this.m_contactSolver.Initialize(e,this.m_contacts,this.m_contactCount,this.m_allocator);var c=this.m_contactSolver;for(c.InitVelocityConstraints(e),r=0;r<this.m_jointCount;++r)s=this.m_joints[r],s.InitVelocityConstraints(e);for(r=0;r<e.velocityIterations;++r){for(a=0;a<this.m_jointCount;++a)s=this.m_joints[a],s.SolveVelocityConstraints(e);c.SolveVelocityConstraints()}for(r=0;r<this.m_jointCount;++r)s=this.m_joints[r],s.FinalizeVelocityConstraints();for(c.FinalizeVelocityConstraints(),r=0;r<this.m_bodyCount;++r)if(o=this.m_bodies[r],o.GetType()!=v.b2_staticBody){var h=e.dt*o.m_linearVelocity.x,u=e.dt*o.m_linearVelocity.y;h*h+u*u>l.b2_maxTranslationSquared&&(o.m_linearVelocity.Normalize(),o.m_linearVelocity.x*=l.b2_maxTranslation*e.inv_dt,o.m_linearVelocity.y*=l.b2_maxTranslation*e.inv_dt);var m=e.dt*o.m_angularVelocity;m*m>l.b2_maxRotationSquared&&(o.m_angularVelocity<0?o.m_angularVelocity=-l.b2_maxRotation*e.inv_dt:o.m_angularVelocity=l.b2_maxRotation*e.inv_dt),o.m_sweep.c0.SetV(o.m_sweep.c),o.m_sweep.a0=o.m_sweep.a,o.m_sweep.c.x+=e.dt*o.m_linearVelocity.x,o.m_sweep.c.y+=e.dt*o.m_linearVelocity.y,o.m_sweep.a+=e.dt*o.m_angularVelocity,o.SynchronizeTransform()}for(r=0;r<e.positionIterations;++r){var p=c.SolvePositionConstraints(l.b2_contactBaumgarte),f=!0;for(a=0;a<this.m_jointCount;++a){s=this.m_joints[a];var _=s.SolvePositionConstraints(l.b2_contactBaumgarte);f=f&&_}if(p&&f)break}if(this.Report(c.m_constraints),n){var y=Number.MAX_VALUE,d=l.b2_linearSleepTolerance*l.b2_linearSleepTolerance,x=l.b2_angularSleepTolerance*l.b2_angularSleepTolerance;for(r=0;r<this.m_bodyCount;++r)o=this.m_bodies[r],o.GetType()!=v.b2_staticBody&&(0==(o.m_flags&v.e_allowSleepFlag)&&(o.m_sleepTime=0,y=0),0==(o.m_flags&v.e_allowSleepFlag)||o.m_angularVelocity*o.m_angularVelocity>x||t.Dot(o.m_linearVelocity,o.m_linearVelocity)>d?(o.m_sleepTime=0,y=0):(o.m_sleepTime+=e.dt,y=t.Min(y,o.m_sleepTime)));if(y>=l.b2_timeToSleep)for(r=0;r<this.m_bodyCount;++r)o=this.m_bodies[r],o.SetAwake(!1)}},P.prototype.SolveTOI=function(t){var e=0,i=0;this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var n=this.m_contactSolver;for(e=0;e<this.m_jointCount;++e)this.m_joints[e].InitVelocityConstraints(t);for(e=0;e<t.velocityIterations;++e)for(n.SolveVelocityConstraints(),i=0;i<this.m_jointCount;++i)this.m_joints[i].SolveVelocityConstraints(t);for(e=0;e<this.m_bodyCount;++e){var o=this.m_bodies[e];if(o.GetType()!=v.b2_staticBody){var s=t.dt*o.m_linearVelocity.x,r=t.dt*o.m_linearVelocity.y;s*s+r*r>l.b2_maxTranslationSquared&&(o.m_linearVelocity.Normalize(),o.m_linearVelocity.x*=l.b2_maxTranslation*t.inv_dt,o.m_linearVelocity.y*=l.b2_maxTranslation*t.inv_dt);var a=t.dt*o.m_angularVelocity;a*a>l.b2_maxRotationSquared&&(o.m_angularVelocity<0?o.m_angularVelocity=-l.b2_maxRotation*t.inv_dt:o.m_angularVelocity=l.b2_maxRotation*t.inv_dt),o.m_sweep.c0.SetV(o.m_sweep.c),o.m_sweep.a0=o.m_sweep.a,o.m_sweep.c.x+=t.dt*o.m_linearVelocity.x,o.m_sweep.c.y+=t.dt*o.m_linearVelocity.y,o.m_sweep.a+=t.dt*o.m_angularVelocity,o.SynchronizeTransform()}}for(e=0;e<t.positionIterations;++e){var c=n.SolvePositionConstraints(.75),h=!0;for(i=0;i<this.m_jointCount;++i){var u=this.m_joints[i].SolvePositionConstraints(l.b2_contactBaumgarte);h=h&&u}if(c&&h)break}this.Report(n.m_constraints)},P.prototype.Report=function(t){if(null!=this.m_listener)for(var e=0;e<this.m_contactCount;++e){for(var i=this.m_contacts[e],n=t[e],o=0;o<n.pointCount;++o)P.s_impulse.normalImpulses[o]=n.points[o].normalImpulse,P.s_impulse.tangentImpulses[o]=n.points[o].tangentImpulse;this.m_listener.PostSolve(i,P.s_impulse)}},P.prototype.AddBody=function(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},P.prototype.AddContact=function(t){this.m_contacts[this.m_contactCount++]=t},P.prototype.AddJoint=function(t){this.m_joints[this.m_jointCount++]=t},n.postDefs.push(function(){n.Dynamics.b2Island.s_impulse=new C}),V.b2TimeStep=function(){},V.prototype.Set=function(t){this.dt=t.dt,this.inv_dt=t.inv_dt,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting},k.b2World=function(){this.s_stack=new o,this.m_contactManager=new S,this.m_contactSolver=new E,this.m_island=new P},k.prototype.b2World=function(t,e){this.m_destructionListener=null,this.m_debugDraw=null,this.m_bodyList=null,this.m_contactList=null,this.m_jointList=null,this.m_controllerList=null,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_controllerCount=0,k.m_warmStarting=!0,k.m_continuousPhysics=!0,this.m_allowSleep=e,this.m_gravity=t,this.m_inv_dt0=0,this.m_contactManager.m_world=this;var i=new b;this.m_groundBody=this.CreateBody(i)},k.prototype.SetDestructionListener=function(t){this.m_destructionListener=t},k.prototype.SetContactFilter=function(t){this.m_contactManager.m_contactFilter=t},k.prototype.SetContactListener=function(t){this.m_contactManager.m_contactListener=t},k.prototype.SetDebugDraw=function(t){this.m_debugDraw=t},k.prototype.SetBroadPhase=function(t){var e=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var i=this.m_bodyList;i;i=i.m_next)for(var n=i.m_fixtureList;n;n=n.m_next)n.m_proxy=t.CreateProxy(e.GetFatAABB(n.m_proxy),n)},k.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},k.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},k.prototype.CreateBody=function(t){if(1==this.IsLocked())return null;var e=new v(t,this);return e.m_prev=null,e.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount,e},k.prototype.DestroyBody=function(t){if(1!=this.IsLocked()){for(var e=t.m_jointList;e;){var i=e;e=e.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(i.joint),this.DestroyJoint(i.joint)}for(var n=t.m_controllerList;n;){var o=n;n=n.nextController,o.controller.RemoveBody(t)}for(var s=t.m_contactList;s;){var r=s;s=s.next,this.m_contactManager.Destroy(r.contact)}t.m_contactList=null;for(var a=t.m_fixtureList;a;){var l=a;a=a.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(l),l.DestroyProxy(this.m_contactManager.m_broadPhase),l.Destroy()}t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}},k.prototype.CreateJoint=function(t){var e=F.Create(t,null);e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.joint=e,e.m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.joint=e,e.m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;var i=t.bodyA,n=t.bodyB;if(0==t.collideConnected)for(var o=n.GetContactList();o;)o.other==i&&o.contact.FlagForFiltering(),o=o.next;return e},k.prototype.DestroyJoint=function(t){var e=t.m_collideConnected;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var i=t.m_bodyA,n=t.m_bodyB;if(i.SetAwake(!0),n.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==i.m_jointList&&(i.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==n.m_jointList&&(n.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,F.Destroy(t,null),--this.m_jointCount,0==e)for(var o=n.GetContactList();o;)o.other==i&&o.contact.FlagForFiltering(),o=o.next},k.prototype.AddController=function(t){return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList=t,t.m_world=this,this.m_controllerCount++,t},k.prototype.RemoveController=function(t){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList==t&&(this.m_controllerList=t.m_next),this.m_controllerCount--},k.prototype.CreateController=function(t){if(t.m_world!=this)throw new Error("Controller can only be a member of one world");return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t.m_world=this,t},k.prototype.DestroyController=function(t){t.Clear(),t.m_next&&(t.m_next.m_prev=t.m_prev),t.m_prev&&(t.m_prev.m_next=t.m_next),t==this.m_controllerList&&(this.m_controllerList=t.m_next),--this.m_controllerCount},k.prototype.SetWarmStarting=function(t){k.m_warmStarting=t},k.prototype.SetContinuousPhysics=function(t){k.m_continuousPhysics=t},k.prototype.GetBodyCount=function(){return this.m_bodyCount},k.prototype.GetJointCount=function(){return this.m_jointCount},k.prototype.GetContactCount=function(){return this.m_contactCount},k.prototype.SetGravity=function(t){this.m_gravity=t},k.prototype.GetGravity=function(){return this.m_gravity},k.prototype.GetGroundBody=function(){return this.m_groundBody},k.prototype.Step=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.m_flags&k.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~k.e_newFixture),this.m_flags|=k.e_locked;var n=k.s_timestep2;n.dt=t,n.velocityIterations=e,n.positionIterations=i,n.inv_dt=t>0?1/t:0,n.dtRatio=this.m_inv_dt0*t,n.warmStarting=k.m_warmStarting,this.m_contactManager.Collide(),n.dt>0&&this.Solve(n),k.m_continuousPhysics&&n.dt>0&&this.SolveTOI(n),n.dt>0&&(this.m_inv_dt0=n.inv_dt),this.m_flags&=~k.e_locked},k.prototype.ClearForces=function(){for(var t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0},k.prototype.DrawDebugData=function(){if(null!=this.m_debugDraw){this.m_debugDraw.m_sprite.graphics.clear();var t,e,i,n,o,s,l=this.m_debugDraw.GetFlags(),h=(new r,new r,new r,new c,new c,[new r,new r,new r,new r]),u=new a(0,0,0);if(l&A.e_shapeBit)for(t=this.m_bodyList;t;t=t.m_next)for(s=t.m_xf,e=t.GetFixtureList();e;e=e.m_next)i=e.GetShape(),0==t.IsActive()?(u.Set(.5,.5,.3),this.DrawShape(i,s,u)):t.GetType()==v.b2_staticBody?(u.Set(.5,.9,.5),this.DrawShape(i,s,u)):t.GetType()==v.b2_kinematicBody?(u.Set(.5,.5,.9),this.DrawShape(i,s,u)):0==t.IsAwake()?(u.Set(.6,.6,.6),this.DrawShape(i,s,u)):(u.Set(.9,.7,.7),this.DrawShape(i,s,u));if(l&A.e_jointBit)for(n=this.m_jointList;n;n=n.m_next)this.DrawJoint(n);if(l&A.e_controllerBit)for(var m=this.m_controllerList;m;m=m.m_next)m.Draw(this.m_debugDraw);if(l&A.e_pairBit){u.Set(.3,.9,.9);for(var p=this.m_contactManager.m_contactList;p;p=p.GetNext()){var f=p.GetFixtureA(),_=p.GetFixtureB(),y=f.GetAABB().GetCenter(),d=_.GetAABB().GetCenter();this.m_debugDraw.DrawSegment(y,d,u)}}if(l&A.e_aabbBit)for(o=this.m_contactManager.m_broadPhase,h=[new r,new r,new r,new r],t=this.m_bodyList;t;t=t.GetNext())if(0!=t.IsActive())for(e=t.GetFixtureList();e;e=e.GetNext()){var x=o.GetFatAABB(e.m_proxy);h[0].Set(x.lowerBound.x,x.lowerBound.y),h[1].Set(x.upperBound.x,x.lowerBound.y),h[2].Set(x.upperBound.x,x.upperBound.y),h[3].Set(x.lowerBound.x,x.upperBound.y),this.m_debugDraw.DrawPolygon(h,4,u)}if(l&A.e_centerOfMassBit)for(t=this.m_bodyList;t;t=t.m_next)s=k.s_xf,s.R=t.m_xf.R,s.position=t.GetWorldCenter(),this.m_debugDraw.DrawTransform(s)}},k.prototype.QueryAABB=function(t,e){function i(e){return t(o.GetUserData(e))}var n=this,o=n.m_contactManager.m_broadPhase;o.Query(i,e)},k.prototype.QueryShape=function(t,e,n){function o(i){var o=r.GetUserData(i)instanceof M?r.GetUserData(i):null;return!x.TestOverlap(e,n,o.GetShape(),o.GetBody().GetTransform())||t(o)}var s=this;void 0===n&&(n=null),null==n&&(n=new i,n.SetIdentity());var r=s.m_contactManager.m_broadPhase,a=new c;e.ComputeAABB(a,n),r.Query(o,a)},k.prototype.QueryPoint=function(t,e){function i(i){var n=o.GetUserData(i)instanceof M?o.GetUserData(i):null;return!n.TestPoint(e)||t(n)}var n=this,o=n.m_contactManager.m_broadPhase,s=new c;s.lowerBound.Set(e.x-l.b2_linearSlop,e.y-l.b2_linearSlop),s.upperBound.Set(e.x+l.b2_linearSlop,e.y+l.b2_linearSlop),o.Query(i,s)},k.prototype.RayCast=function(t,e,i){function n(n,o){var l=s.GetUserData(o),c=l instanceof M?l:null;if(c.RayCast(a,n)){var h=a.fraction,u=new r((1-h)*e.x+h*i.x,(1-h)*e.y+h*i.y);return t(c,u,a.normal,h)}return n.maxFraction}var o=this,s=o.m_contactManager.m_broadPhase,a=new p,l=new m(e,i);s.RayCast(n,l)},k.prototype.RayCastOne=function(t,e){function i(t,e,i,o){return void 0===o&&(o=0),n=t,o}var n,o=this;return o.RayCast(i,t,e),n},k.prototype.RayCastAll=function(t,e){function i(t,e,i,n){return void 0===n&&(n=0),s[s.length]=t,1}var n=this,s=new o;return n.RayCast(i,t,e),s},k.prototype.GetBodyList=function(){return this.m_bodyList},k.prototype.GetJointList=function(){return this.m_jointList},k.prototype.GetContactList=function(){return this.m_contactList},k.prototype.IsLocked=function(){return(this.m_flags&k.e_locked)>0},k.prototype.Solve=function(t){for(var e,i=this.m_controllerList;i;i=i.m_next)i.Step(t);var n=this.m_island;for(n.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver),e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~v.e_islandFlag;for(var o=this.m_contactList;o;o=o.m_next)o.m_flags&=~T.e_islandFlag;for(var s=this.m_jointList;s;s=s.m_next)s.m_islandFlag=!1;for(var r=(parseInt(this.m_bodyCount),this.s_stack),a=this.m_bodyList;a;a=a.m_next)if(!(a.m_flags&v.e_islandFlag)&&0!=a.IsAwake()&&0!=a.IsActive()&&a.GetType()!=v.b2_staticBody){n.Clear();var l=0;for(r[l++]=a,a.m_flags|=v.e_islandFlag;l>0;)if(e=r[--l],n.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()!=v.b2_staticBody){for(var c,h=e.m_contactList;h;h=h.next)h.contact.m_flags&T.e_islandFlag||1!=h.contact.IsSensor()&&0!=h.contact.IsEnabled()&&0!=h.contact.IsTouching()&&(n.AddContact(h.contact),h.contact.m_flags|=T.e_islandFlag,c=h.other,c.m_flags&v.e_islandFlag||(r[l++]=c,c.m_flags|=v.e_islandFlag));for(var u=e.m_jointList;u;u=u.next)1!=u.joint.m_islandFlag&&(c=u.other,0!=c.IsActive()&&(n.AddJoint(u.joint),u.joint.m_islandFlag=!0,c.m_flags&v.e_islandFlag||(r[l++]=c,c.m_flags|=v.e_islandFlag)))}n.Solve(t,this.m_gravity,this.m_allowSleep);for(var m=0;m<n.m_bodyCount;++m)e=n.m_bodies[m],e.GetType()==v.b2_staticBody&&(e.m_flags&=~v.e_islandFlag)}for(m=0;m<r.length&&r[m];++m)r[m]=null;for(e=this.m_bodyList;e;e=e.m_next)0!=e.IsAwake()&&0!=e.IsActive()&&e.GetType()!=v.b2_staticBody&&e.SynchronizeFixtures();this.m_contactManager.FindNewContacts()},k.prototype.SolveTOI=function(t){var e,i,n,o,s,r,a,c=this.m_island;c.Initialize(this.m_bodyCount,l.b2_maxTOIContactsPerIsland,l.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var h=k.s_queue;for(e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~v.e_islandFlag,e.m_sweep.t0=0;var u;for(u=this.m_contactList;u;u=u.m_next)u.m_flags&=~(T.e_toiFlag|T.e_islandFlag);for(a=this.m_jointList;a;a=a.m_next)a.m_islandFlag=!1;for(;;){var m=null,p=1;for(u=this.m_contactList;u;u=u.m_next)if(1!=u.IsSensor()&&0!=u.IsEnabled()&&0!=u.IsContinuous()){var f=1;if(u.m_flags&T.e_toiFlag)f=u.m_toi;else{if(i=u.m_fixtureA,n=u.m_fixtureB,o=i.m_body,s=n.m_body,!(o.GetType()==v.b2_dynamicBody&&0!=o.IsAwake()||s.GetType()==v.b2_dynamicBody&&0!=s.IsAwake()))continue;var _=o.m_sweep.t0;o.m_sweep.t0<s.m_sweep.t0?(_=s.m_sweep.t0,o.m_sweep.Advance(_)):s.m_sweep.t0<o.m_sweep.t0&&(_=o.m_sweep.t0,s.m_sweep.Advance(_)),f=u.ComputeTOI(o.m_sweep,s.m_sweep),l.b2Assert(0<=f&&f<=1),f>0&&f<1&&(f=(1-f)*_+f)>1&&(f=1),u.m_toi=f,u.m_flags|=T.e_toiFlag}Number.MIN_VALUE<f&&f<p&&(m=u,p=f)}if(null==m||1-100*Number.MIN_VALUE<p)break;if(i=m.m_fixtureA,n=m.m_fixtureB,o=i.m_body,s=n.m_body,k.s_backupA.Set(o.m_sweep),k.s_backupB.Set(s.m_sweep),o.Advance(p),s.Advance(p),m.Update(this.m_contactManager.m_contactListener),m.m_flags&=~T.e_toiFlag,1!=m.IsSensor()&&0!=m.IsEnabled()){if(0!=m.IsTouching()){var y=o;y.GetType()!=v.b2_dynamicBody&&(y=s),c.Clear();var d=0,x=0;for(h[d+x++]=y,y.m_flags|=v.e_islandFlag;x>0;)if(e=h[d++],--x,c.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()==v.b2_dynamicBody){for(r=e.m_contactList;r&&c.m_contactCount!=c.m_contactCapacity;r=r.next)if(!(r.contact.m_flags&T.e_islandFlag)&&1!=r.contact.IsSensor()&&0!=r.contact.IsEnabled()&&0!=r.contact.IsTouching()){c.AddContact(r.contact),r.contact.m_flags|=T.e_islandFlag;var b=r.other;b.m_flags&v.e_islandFlag||(b.GetType()!=v.b2_staticBody&&(b.Advance(p),b.SetAwake(!0)),h[d+x]=b,++x,b.m_flags|=v.e_islandFlag)}for(var g=e.m_jointList;g;g=g.next)c.m_jointCount!=c.m_jointCapacity&&1!=g.joint.m_islandFlag&&(b=g.other,0!=b.IsActive()&&(c.AddJoint(g.joint),g.joint.m_islandFlag=!0,b.m_flags&v.e_islandFlag||(b.GetType()!=v.b2_staticBody&&(b.Advance(p),b.SetAwake(!0)),h[d+x]=b,++x,b.m_flags|=v.e_islandFlag)))}var C=k.s_timestep;C.warmStarting=!1,C.dt=(1-p)*t.dt,C.inv_dt=1/C.dt,C.dtRatio=0,C.velocityIterations=t.velocityIterations,C.positionIterations=t.positionIterations,c.SolveTOI(C);var w=0;for(w=0;w<c.m_bodyCount;++w)if(e=c.m_bodies[w],e.m_flags&=~v.e_islandFlag,0!=e.IsAwake()&&e.GetType()==v.b2_dynamicBody)for(e.SynchronizeFixtures(),r=e.m_contactList;r;r=r.next)r.contact.m_flags&=~T.e_toiFlag;for(w=0;w<c.m_contactCount;++w)u=c.m_contacts[w],u.m_flags&=~(T.e_toiFlag|T.e_islandFlag);for(w=0;w<c.m_jointCount;++w)a=c.m_joints[w],a.m_islandFlag=!1;this.m_contactManager.FindNewContacts()}}else o.m_sweep.Set(k.s_backupA),s.m_sweep.Set(k.s_backupB),o.SynchronizeTransform(),s.SynchronizeTransform()}},k.prototype.DrawJoint=function(t){var e=t.GetBodyA(),i=t.GetBodyB(),n=e.m_xf,o=i.m_xf,s=n.position,r=o.position,a=t.GetAnchorA(),l=t.GetAnchorB(),c=k.s_jointColor;switch(t.m_type){case F.e_distanceJoint:this.m_debugDraw.DrawSegment(a,l,c);break;case F.e_pulleyJoint:var h=t instanceof R?t:null,u=h.GetGroundAnchorA(),m=h.GetGroundAnchorB();this.m_debugDraw.DrawSegment(u,a,c),this.m_debugDraw.DrawSegment(m,l,c),this.m_debugDraw.DrawSegment(u,m,c);break;case F.e_mouseJoint:this.m_debugDraw.DrawSegment(a,l,c);break;default:e!=this.m_groundBody&&this.m_debugDraw.DrawSegment(s,a,c),this.m_debugDraw.DrawSegment(a,l,c),i!=this.m_groundBody&&this.m_debugDraw.DrawSegment(r,l,c)}},k.prototype.DrawShape=function(e,i,n){switch(e.m_type){case x.e_circleShape:var s=e instanceof f?e:null,r=t.MulX(i,s.m_p),a=s.m_radius,l=i.R.col1;this.m_debugDraw.DrawSolidCircle(r,a,l,n);break;case x.e_polygonShape:var c=0,h=e instanceof d?e:null,u=parseInt(h.GetVertexCount()),m=h.GetVertices(),p=new o(u);for(c=0;c<u;++c)p[c]=t.MulX(i,m[c]);this.m_debugDraw.DrawSolidPolygon(p,u,n);break;case x.e_edgeShape:var y=e instanceof _?e:null;this.m_debugDraw.DrawSegment(t.MulX(i,y.GetVertex1()),t.MulX(i,y.GetVertex2()),n)}},n.postDefs.push(function(){n.Dynamics.b2World.s_timestep2=new V,n.Dynamics.b2World.s_xf=new i,n.Dynamics.b2World.s_backupA=new e,n.Dynamics.b2World.s_backupB=new e,n.Dynamics.b2World.s_timestep=new V,n.Dynamics.b2World.s_queue=new o,n.Dynamics.b2World.s_jointColor=new a(.5,.8,.8),n.Dynamics.b2World.e_newFixture=1,n.Dynamics.b2World.e_locked=2})}(),function(){var t=n.Collision.Shapes.b2CircleShape,e=(n.Collision.Shapes.b2EdgeChainDef,n.Collision.Shapes.b2EdgeShape),i=(n.Collision.Shapes.b2MassData,n.Collision.Shapes.b2PolygonShape),r=n.Collision.Shapes.b2Shape,a=n.Dynamics.Contacts.b2CircleContact,l=n.Dynamics.Contacts.b2Contact,c=n.Dynamics.Contacts.b2ContactConstraint,h=n.Dynamics.Contacts.b2ContactConstraintPoint,u=n.Dynamics.Contacts.b2ContactEdge,m=n.Dynamics.Contacts.b2ContactFactory,p=n.Dynamics.Contacts.b2ContactRegister,f=n.Dynamics.Contacts.b2ContactResult,_=n.Dynamics.Contacts.b2ContactSolver,y=n.Dynamics.Contacts.b2EdgeAndCircleContact,d=n.Dynamics.Contacts.b2NullContact,x=n.Dynamics.Contacts.b2PolyAndCircleContact,v=n.Dynamics.Contacts.b2PolyAndEdgeContact,b=n.Dynamics.Contacts.b2PolygonContact,g=n.Dynamics.Contacts.b2PositionSolverManifold,C=n.Dynamics.b2Body,w=(n.Dynamics.b2BodyDef,n.Dynamics.b2ContactFilter,n.Dynamics.b2ContactImpulse,n.Dynamics.b2ContactListener,n.Dynamics.b2ContactManager,n.Dynamics.b2DebugDraw,n.Dynamics.b2DestructionListener,n.Dynamics.b2FilterData,n.Dynamics.b2Fixture,n.Dynamics.b2FixtureDef,n.Dynamics.b2Island,n.Dynamics.b2TimeStep),S=(n.Dynamics.b2World,n.Common.b2Color,n.Common.b2internal,n.Common.b2Settings),A=n.Common.Math.b2Mat22,D=(n.Common.Math.b2Mat33,n.Common.Math.b2Math),B=(n.Common.Math.b2Sweep,n.Common.Math.b2Transform,n.Common.Math.b2Vec2),M=(n.Common.Math.b2Vec3,n.Collision.b2AABB,n.Collision.b2Bound,n.Collision.b2BoundValues,n.Collision.b2Collision),I=n.Collision.b2ContactID,P=(n.Collision.b2ContactPoint,n.Collision.b2Distance,n.Collision.b2DistanceInput,n.Collision.b2DistanceOutput,n.Collision.b2DistanceProxy,n.Collision.b2DynamicTree,n.Collision.b2DynamicTreeBroadPhase,n.Collision.b2DynamicTreeNode,n.Collision.b2DynamicTreePair,n.Collision.b2Manifold),V=(n.Collision.b2ManifoldPoint,n.Collision.b2Point,n.Collision.b2RayCastInput,n.Collision.b2RayCastOutput,n.Collision.b2Segment,n.Collision.b2SeparationFunction,n.Collision.b2Simplex,n.Collision.b2SimplexCache,n.Collision.b2SimplexVertex,n.Collision.b2TimeOfImpact),k=n.Collision.b2TOIInput,T=n.Collision.b2WorldManifold;n.Collision.ClipVertex,n.Collision.Features,n.Collision.IBroadPhase;n.inherit(a,n.Dynamics.Contacts.b2Contact),a.prototype.__super=n.Dynamics.Contacts.b2Contact.prototype,a.b2CircleContact=function(){n.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},a.Create=function(t){return new a},a.Destroy=function(t,e){},a.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},a.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();M.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof t?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,i.m_xf)},l.b2Contact=function(){this.m_nodeA=new u,this.m_nodeB=new u,this.m_manifold=new P,this.m_oldManifold=new P},l.prototype.GetManifold=function(){return this.m_manifold},l.prototype.GetWorldManifold=function(t){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody(),n=this.m_fixtureA.GetShape(),o=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,e.GetTransform(),n.m_radius,i.GetTransform(),o.m_radius)},l.prototype.IsTouching=function(){return(this.m_flags&l.e_touchingFlag)==l.e_touchingFlag},l.prototype.IsContinuous=function(){return(this.m_flags&l.e_continuousFlag)==l.e_continuousFlag},l.prototype.SetSensor=function(t){t?this.m_flags|=l.e_sensorFlag:this.m_flags&=~l.e_sensorFlag},l.prototype.IsSensor=function(){return(this.m_flags&l.e_sensorFlag)==l.e_sensorFlag},l.prototype.SetEnabled=function(t){t?this.m_flags|=l.e_enabledFlag:this.m_flags&=~l.e_enabledFlag},l.prototype.IsEnabled=function(){return(this.m_flags&l.e_enabledFlag)==l.e_enabledFlag},l.prototype.GetNext=function(){return this.m_next},l.prototype.GetFixtureA=function(){return this.m_fixtureA},l.prototype.GetFixtureB=function(){return this.m_fixtureB},l.prototype.FlagForFiltering=function(){this.m_flags|=l.e_filterFlag},l.prototype.b2Contact=function(){},l.prototype.Reset=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.m_flags=l.e_enabledFlag,!t||!e)return this.m_fixtureA=null,void(this.m_fixtureB=null);(t.IsSensor()||e.IsSensor())&&(this.m_flags|=l.e_sensorFlag);var i=t.GetBody(),n=e.GetBody();(i.GetType()!=C.b2_dynamicBody||i.IsBullet()||n.GetType()!=C.b2_dynamicBody||n.IsBullet())&&(this.m_flags|=l.e_continuousFlag),this.m_fixtureA=t,this.m_fixtureB=e,this.m_manifold.m_pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null},l.prototype.Update=function(t){var e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_flags|=l.e_enabledFlag;var i=!1,n=(this.m_flags&l.e_touchingFlag)==l.e_touchingFlag,o=this.m_fixtureA.m_body,s=this.m_fixtureB.m_body,a=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&l.e_sensorFlag){if(a){var c=this.m_fixtureA.GetShape(),h=this.m_fixtureB.GetShape(),u=o.GetTransform(),m=s.GetTransform();i=r.TestOverlap(c,u,h,m)}this.m_manifold.m_pointCount=0}else{if(o.GetType()!=C.b2_dynamicBody||o.IsBullet()||s.GetType()!=C.b2_dynamicBody||s.IsBullet()?this.m_flags|=l.e_continuousFlag:this.m_flags&=~l.e_continuousFlag,a){this.Evaluate(),i=this.m_manifold.m_pointCount>0;for(var p=0;p<this.m_manifold.m_pointCount;++p){var f=this.m_manifold.m_points[p];f.m_normalImpulse=0,f.m_tangentImpulse=0;for(var _=f.m_id,y=0;y<this.m_oldManifold.m_pointCount;++y){var d=this.m_oldManifold.m_points[y];if(d.m_id.key==_.key){f.m_normalImpulse=d.m_normalImpulse,f.m_tangentImpulse=d.m_tangentImpulse;break}}}}else this.m_manifold.m_pointCount=0;i!=n&&(o.SetAwake(!0),s.SetAwake(!0))}i?this.m_flags|=l.e_touchingFlag:this.m_flags&=~l.e_touchingFlag,0==n&&1==i&&t.BeginContact(this),1==n&&0==i&&t.EndContact(this),0==(this.m_flags&l.e_sensorFlag)&&t.PreSolve(this,this.m_oldManifold)},l.prototype.Evaluate=function(){},l.prototype.ComputeTOI=function(t,e){return l.s_input.proxyA.Set(this.m_fixtureA.GetShape()),l.s_input.proxyB.Set(this.m_fixtureB.GetShape()),l.s_input.sweepA=t,l.s_input.sweepB=e,l.s_input.tolerance=S.b2_linearSlop,V.TimeOfImpact(l.s_input)},n.postDefs.push(function(){n.Dynamics.Contacts.b2Contact.e_sensorFlag=1,n.Dynamics.Contacts.b2Contact.e_continuousFlag=2,n.Dynamics.Contacts.b2Contact.e_islandFlag=4,n.Dynamics.Contacts.b2Contact.e_toiFlag=8,n.Dynamics.Contacts.b2Contact.e_touchingFlag=16,n.Dynamics.Contacts.b2Contact.e_enabledFlag=32,n.Dynamics.Contacts.b2Contact.e_filterFlag=64,n.Dynamics.Contacts.b2Contact.s_input=new k}),c.b2ContactConstraint=function(){this.localPlaneNormal=new B,this.localPoint=new B,this.normal=new B,this.normalMass=new A,this.K=new A},c.prototype.b2ContactConstraint=function(){this.points=new o(S.b2_maxManifoldPoints);for(var t=0;t<S.b2_maxManifoldPoints;t++)this.points[t]=new h},h.b2ContactConstraintPoint=function(){this.localPoint=new B,this.rA=new B,this.rB=new B},u.b2ContactEdge=function(){},m.b2ContactFactory=function(){},m.prototype.b2ContactFactory=function(t){this.m_allocator=t,this.InitializeRegisters()},m.prototype.AddType=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.m_registers[i][n].createFcn=t,this.m_registers[i][n].destroyFcn=e,this.m_registers[i][n].primary=!0,i!=n&&(this.m_registers[n][i].createFcn=t,this.m_registers[n][i].destroyFcn=e,this.m_registers[n][i].primary=!1)},m.prototype.InitializeRegisters=function(){this.m_registers=new o(r.e_shapeTypeCount);for(var t=0;t<r.e_shapeTypeCount;t++){this.m_registers[t]=new o(r.e_shapeTypeCount);for(var e=0;e<r.e_shapeTypeCount;e++)this.m_registers[t][e]=new p}this.AddType(a.Create,a.Destroy,r.e_circleShape,r.e_circleShape),this.AddType(x.Create,x.Destroy,r.e_polygonShape,r.e_circleShape),this.AddType(b.Create,b.Destroy,r.e_polygonShape,r.e_polygonShape),this.AddType(y.Create,y.Destroy,r.e_edgeShape,r.e_circleShape),this.AddType(v.Create,v.Destroy,r.e_polygonShape,r.e_edgeShape)},m.prototype.Create=function(t,e){var i,n=parseInt(t.GetType()),o=parseInt(e.GetType()),s=this.m_registers[n][o];if(s.pool)return i=s.pool,s.pool=i.m_next,s.poolCount--,i.Reset(t,e),i;var r=s.createFcn;return null!=r?s.primary?(i=r(this.m_allocator),i.Reset(t,e),i):(i=r(this.m_allocator),i.Reset(e,t),i):null},m.prototype.Destroy=function(t){t.m_manifold.m_pointCount>0&&(t.m_fixtureA.m_body.SetAwake(!0),t.m_fixtureB.m_body.SetAwake(!0));var e=parseInt(t.m_fixtureA.GetType()),i=parseInt(t.m_fixtureB.GetType()),n=this.m_registers[e][i];n.poolCount++,t.m_next=n.pool,n.pool=t,(0,n.destroyFcn)(t,this.m_allocator)},p.b2ContactRegister=function(){},f.b2ContactResult=function(){this.position=new B,this.normal=new B,this.id=new I},_.b2ContactSolver=function(){this.m_step=new w,this.m_constraints=new o},_.prototype.b2ContactSolver=function(){},_.prototype.Initialize=function(t,e,i,n){void 0===i&&(i=0);var o;this.m_step.Set(t),this.m_allocator=n;var s=0;for(this.m_constraintCount=i;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new c;for(s=0;s<i;++s){o=e[s];var r=o.m_fixtureA,a=o.m_fixtureB,l=r.m_shape,h=a.m_shape,u=l.m_radius,m=h.m_radius,p=r.m_body,f=a.m_body,y=o.GetManifold(),d=S.b2MixFriction(r.GetFriction(),a.GetFriction()),x=S.b2MixRestitution(r.GetRestitution(),a.GetRestitution()),v=p.m_linearVelocity.x,b=p.m_linearVelocity.y,g=f.m_linearVelocity.x,C=f.m_linearVelocity.y,w=p.m_angularVelocity,A=f.m_angularVelocity;S.b2Assert(y.m_pointCount>0),_.s_worldManifold.Initialize(y,p.m_xf,u,f.m_xf,m);var D=_.s_worldManifold.m_normal.x,B=_.s_worldManifold.m_normal.y,M=this.m_constraints[s];M.bodyA=p,M.bodyB=f,M.manifold=y,M.normal.x=D,M.normal.y=B,M.pointCount=y.m_pointCount,M.friction=d,M.restitution=x,M.localPlaneNormal.x=y.m_localPlaneNormal.x,M.localPlaneNormal.y=y.m_localPlaneNormal.y,M.localPoint.x=y.m_localPoint.x,M.localPoint.y=y.m_localPoint.y,M.radius=u+m,M.type=y.m_type;for(var I=0;I<M.pointCount;++I){var P=y.m_points[I],V=M.points[I];V.normalImpulse=P.m_normalImpulse,V.tangentImpulse=P.m_tangentImpulse,V.localPoint.SetV(P.m_localPoint);var k=V.rA.x=_.s_worldManifold.m_points[I].x-p.m_sweep.c.x,T=V.rA.y=_.s_worldManifold.m_points[I].y-p.m_sweep.c.y,L=V.rB.x=_.s_worldManifold.m_points[I].x-f.m_sweep.c.x,E=V.rB.y=_.s_worldManifold.m_points[I].y-f.m_sweep.c.y,F=k*B-T*D,R=L*B-E*D;F*=F,R*=R;var G=p.m_invMass+f.m_invMass+p.m_invI*F+f.m_invI*R;V.normalMass=1/G;var N=p.m_mass*p.m_invMass+f.m_mass*f.m_invMass;N+=p.m_mass*p.m_invI*F+f.m_mass*f.m_invI*R,V.equalizedMass=1/N;var J=B,O=-D,j=k*O-T*J,q=L*O-E*J;j*=j,q*=q;var z=p.m_invMass+f.m_invMass+p.m_invI*j+f.m_invI*q;V.tangentMass=1/z,V.velocityBias=0;var H=g+-A*E-v- -w*T,U=C+A*L-b-w*k,W=M.normal.x*H+M.normal.y*U;W<-S.b2_velocityThreshold&&(V.velocityBias+=-M.restitution*W)}if(2==M.pointCount){var $=M.points[0],K=M.points[1],X=p.m_invMass,Z=p.m_invI,Y=f.m_invMass,Q=f.m_invI,tt=$.rA.x*B-$.rA.y*D,et=$.rB.x*B-$.rB.y*D,it=K.rA.x*B-K.rA.y*D,nt=K.rB.x*B-K.rB.y*D,ot=X+Y+Z*tt*tt+Q*et*et,st=X+Y+Z*it*it+Q*nt*nt,rt=X+Y+Z*tt*it+Q*et*nt;ot*ot<100*(ot*st-rt*rt)?(M.K.col1.Set(ot,rt),M.K.col2.Set(rt,st),M.K.GetInverse(M.normalMass)):M.pointCount=1}}},_.prototype.InitVelocityConstraints=function(t){for(var e=0;e<this.m_constraintCount;++e){var i=this.m_constraints[e],n=i.bodyA,o=i.bodyB,s=n.m_invMass,r=n.m_invI,a=o.m_invMass,l=o.m_invI,c=i.normal.x,h=i.normal.y,u=h,m=-c,p=0,f=0;if(t.warmStarting)for(f=i.pointCount,p=0;p<f;++p){var _=i.points[p];_.normalImpulse*=t.dtRatio,_.tangentImpulse*=t.dtRatio;var y=_.normalImpulse*c+_.tangentImpulse*u,d=_.normalImpulse*h+_.tangentImpulse*m;n.m_angularVelocity-=r*(_.rA.x*d-_.rA.y*y),n.m_linearVelocity.x-=s*y,n.m_linearVelocity.y-=s*d,o.m_angularVelocity+=l*(_.rB.x*d-_.rB.y*y),o.m_linearVelocity.x+=a*y,o.m_linearVelocity.y+=a*d}else for(f=i.pointCount,p=0;p<f;++p){var x=i.points[p];x.normalImpulse=0,x.tangentImpulse=0}}},_.prototype.SolveVelocityConstraints=function(){for(var t,e,i=0,n=0,o=0,s=0,r=0,a=0,l=0,c=0,h=0,u=0,m=0,p=0,f=0,_=0,y=0,d=0,x=0;x<this.m_constraintCount;++x){var v=this.m_constraints[x],b=v.bodyA,g=v.bodyB,C=b.m_angularVelocity,w=g.m_angularVelocity,S=b.m_linearVelocity,A=g.m_linearVelocity,B=b.m_invMass,M=b.m_invI,I=g.m_invMass,P=g.m_invI,V=v.normal.x,k=v.normal.y,T=k,L=-V,E=v.friction;for(i=0;i<v.pointCount;i++)t=v.points[i],n=A.x-w*t.rB.y-S.x+C*t.rA.y,o=A.y+w*t.rB.x-S.y-C*t.rA.x,r=n*T+o*L,a=t.tangentMass*-r,l=E*t.normalImpulse,c=D.Clamp(t.tangentImpulse+a,-l,l),a=c-t.tangentImpulse,h=a*T,u=a*L,S.x-=B*h,S.y-=B*u,C-=M*(t.rA.x*u-t.rA.y*h),A.x+=I*h,A.y+=I*u,w+=P*(t.rB.x*u-t.rB.y*h),t.tangentImpulse=c;parseInt(v.pointCount);if(1==v.pointCount)t=v.points[0],n=A.x+-w*t.rB.y-S.x- -C*t.rA.y,o=A.y+w*t.rB.x-S.y-C*t.rA.x,s=n*V+o*k,a=-t.normalMass*(s-t.velocityBias),c=t.normalImpulse+a,c=c>0?c:0,a=c-t.normalImpulse,h=a*V,u=a*k,S.x-=B*h,S.y-=B*u,C-=M*(t.rA.x*u-t.rA.y*h),A.x+=I*h,A.y+=I*u,w+=P*(t.rB.x*u-t.rB.y*h),t.normalImpulse=c;else{var F=v.points[0],R=v.points[1],G=F.normalImpulse,N=R.normalImpulse,J=A.x-w*F.rB.y-S.x+C*F.rA.y,O=A.y+w*F.rB.x-S.y-C*F.rA.x,j=A.x-w*R.rB.y-S.x+C*R.rA.y,q=A.y+w*R.rB.x-S.y-C*R.rA.x,z=J*V+O*k,H=j*V+q*k,U=z-F.velocityBias,W=H-R.velocityBias;e=v.K,U-=e.col1.x*G+e.col2.x*N,W-=e.col1.y*G+e.col2.y*N;for(;;){e=v.normalMass;var $=-(e.col1.x*U+e.col2.x*W),K=-(e.col1.y*U+e.col2.y*W);if($>=0&&K>=0){m=$-G,p=K-N,f=m*V,_=m*k,y=p*V,d=p*k,S.x-=B*(f+y),S.y-=B*(_+d),C-=M*(F.rA.x*_-F.rA.y*f+R.rA.x*d-R.rA.y*y),A.x+=I*(f+y),A.y+=I*(_+d),w+=P*(F.rB.x*_-F.rB.y*f+R.rB.x*d-R.rB.y*y),F.normalImpulse=$,R.normalImpulse=K;break}if($=-F.normalMass*U,K=0,z=0,H=v.K.col1.y*$+W,$>=0&&H>=0){m=$-G,p=K-N,f=m*V,_=m*k,y=p*V,d=p*k,S.x-=B*(f+y),S.y-=B*(_+d),C-=M*(F.rA.x*_-F.rA.y*f+R.rA.x*d-R.rA.y*y),A.x+=I*(f+y),A.y+=I*(_+d),w+=P*(F.rB.x*_-F.rB.y*f+R.rB.x*d-R.rB.y*y),F.normalImpulse=$,R.normalImpulse=K;break}if($=0,K=-R.normalMass*W,z=v.K.col2.x*K+U,H=0,K>=0&&z>=0){m=$-G,p=K-N,f=m*V,_=m*k,y=p*V,d=p*k,S.x-=B*(f+y),S.y-=B*(_+d),C-=M*(F.rA.x*_-F.rA.y*f+R.rA.x*d-R.rA.y*y),A.x+=I*(f+y),A.y+=I*(_+d),w+=P*(F.rB.x*_-F.rB.y*f+R.rB.x*d-R.rB.y*y),F.normalImpulse=$,R.normalImpulse=K;break}if($=0,K=0,z=U,H=W,z>=0&&H>=0){m=$-G,p=K-N,f=m*V,_=m*k,y=p*V,d=p*k,S.x-=B*(f+y),S.y-=B*(_+d),C-=M*(F.rA.x*_-F.rA.y*f+R.rA.x*d-R.rA.y*y),A.x+=I*(f+y),A.y+=I*(_+d),w+=P*(F.rB.x*_-F.rB.y*f+R.rB.x*d-R.rB.y*y),F.normalImpulse=$,R.normalImpulse=K;break}break}}b.m_angularVelocity=C,g.m_angularVelocity=w}},_.prototype.FinalizeVelocityConstraints=function(){for(var t=0;t<this.m_constraintCount;++t)for(var e=this.m_constraints[t],i=e.manifold,n=0;n<e.pointCount;++n){var o=i.m_points[n],s=e.points[n];o.m_normalImpulse=s.normalImpulse,o.m_tangentImpulse=s.tangentImpulse}},_.prototype.SolvePositionConstraints=function(t){void 0===t&&(t=0);for(var e=0,i=0;i<this.m_constraintCount;i++){var n=this.m_constraints[i],o=n.bodyA,s=n.bodyB,r=o.m_mass*o.m_invMass,a=o.m_mass*o.m_invI,l=s.m_mass*s.m_invMass,c=s.m_mass*s.m_invI;_.s_psm.Initialize(n);for(var h=_.s_psm.m_normal,u=0;u<n.pointCount;u++){var m=n.points[u],p=_.s_psm.m_points[u],f=_.s_psm.m_separations[u],y=p.x-o.m_sweep.c.x,d=p.y-o.m_sweep.c.y,x=p.x-s.m_sweep.c.x,v=p.y-s.m_sweep.c.y;e=e<f?e:f;var b=D.Clamp(t*(f+S.b2_linearSlop),-S.b2_maxLinearCorrection,0),g=-m.equalizedMass*b,C=g*h.x,w=g*h.y;o.m_sweep.c.x-=r*C,o.m_sweep.c.y-=r*w,o.m_sweep.a-=a*(y*w-d*C),o.SynchronizeTransform(),s.m_sweep.c.x+=l*C,s.m_sweep.c.y+=l*w,s.m_sweep.a+=c*(x*w-v*C),s.SynchronizeTransform()}}return e>-1.5*S.b2_linearSlop},n.postDefs.push(function(){n.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new T,n.Dynamics.Contacts.b2ContactSolver.s_psm=new g}),n.inherit(y,n.Dynamics.Contacts.b2Contact),y.prototype.__super=n.Dynamics.Contacts.b2Contact.prototype,y.b2EdgeAndCircleContact=function(){n.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},y.Create=function(t){return new y},y.Destroy=function(t,e){},y.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},y.prototype.Evaluate=function(){var i=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof e?this.m_fixtureA.GetShape():null,i.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,n.m_xf)},y.prototype.b2CollideEdgeAndCircle=function(t,e,i,n,o){},n.inherit(d,n.Dynamics.Contacts.b2Contact),d.prototype.__super=n.Dynamics.Contacts.b2Contact.prototype,d.b2NullContact=function(){n.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},d.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)},d.prototype.Evaluate=function(){},n.inherit(x,n.Dynamics.Contacts.b2Contact),x.prototype.__super=n.Dynamics.Contacts.b2Contact.prototype,x.b2PolyAndCircleContact=function(){n.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},x.Create=function(t){return new x},x.Destroy=function(t,e){},x.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),S.b2Assert(t.GetType()==r.e_polygonShape),S.b2Assert(e.GetType()==r.e_circleShape)},x.prototype.Evaluate=function(){var e=this.m_fixtureA.m_body,n=this.m_fixtureB.m_body;M.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,n.m_xf)},n.inherit(v,n.Dynamics.Contacts.b2Contact),v.prototype.__super=n.Dynamics.Contacts.b2Contact.prototype,v.b2PolyAndEdgeContact=function(){n.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},v.Create=function(t){return new v},v.Destroy=function(t,e){},v.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),S.b2Assert(t.GetType()==r.e_polygonShape),S.b2Assert(e.GetType()==r.e_edgeShape)},v.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof e?this.m_fixtureB.GetShape():null,n.m_xf)},v.prototype.b2CollidePolyAndEdge=function(t,e,i,n,o){},n.inherit(b,n.Dynamics.Contacts.b2Contact),b.prototype.__super=n.Dynamics.Contacts.b2Contact.prototype,b.b2PolygonContact=function(){n.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},b.Create=function(t){return new b},b.Destroy=function(t,e){},b.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},b.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();M.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof i?this.m_fixtureB.GetShape():null,e.m_xf)},g.b2PositionSolverManifold=function(){},g.prototype.b2PositionSolverManifold=function(){this.m_normal=new B,this.m_separations=new s(S.b2_maxManifoldPoints),this.m_points=new o(S.b2_maxManifoldPoints);for(var t=0;t<S.b2_maxManifoldPoints;t++)this.m_points[t]=new B},g.prototype.Initialize=function(t){S.b2Assert(t.pointCount>0);var e,i,n=0,o=0,s=0,r=0,a=0;switch(t.type){case P.e_circles:e=t.bodyA.m_xf.R,i=t.localPoint;var l=t.bodyA.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),c=t.bodyA.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y);e=t.bodyB.m_xf.R,i=t.points[0].localPoint;var h=t.bodyB.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),u=t.bodyB.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),m=h-l,p=u-c,f=m*m+p*p;if(f>Number.MIN_VALUE*Number.MIN_VALUE){var _=Math.sqrt(f);this.m_normal.x=m/_,this.m_normal.y=p/_}else this.m_normal.x=1,this.m_normal.y=0;this.m_points[0].x=.5*(l+h),this.m_points[0].y=.5*(c+u),this.m_separations[0]=m*this.m_normal.x+p*this.m_normal.y-t.radius;break;case P.e_faceA:for(e=t.bodyA.m_xf.R,i=t.localPlaneNormal,this.m_normal.x=e.col1.x*i.x+e.col2.x*i.y,this.m_normal.y=e.col1.y*i.x+e.col2.y*i.y,e=t.bodyA.m_xf.R,i=t.localPoint,r=t.bodyA.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),a=t.bodyA.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),e=t.bodyB.m_xf.R,n=0;n<t.pointCount;++n)i=t.points[n].localPoint,o=t.bodyB.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),s=t.bodyB.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),this.m_separations[n]=(o-r)*this.m_normal.x+(s-a)*this.m_normal.y-t.radius,this.m_points[n].x=o,this.m_points[n].y=s;break;case P.e_faceB:for(e=t.bodyB.m_xf.R,i=t.localPlaneNormal,this.m_normal.x=e.col1.x*i.x+e.col2.x*i.y,this.m_normal.y=e.col1.y*i.x+e.col2.y*i.y,e=t.bodyB.m_xf.R,i=t.localPoint,r=t.bodyB.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),a=t.bodyB.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),e=t.bodyA.m_xf.R,n=0;n<t.pointCount;++n)i=t.points[n].localPoint,o=t.bodyA.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),s=t.bodyA.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),this.m_separations[n]=(o-r)*this.m_normal.x+(s-a)*this.m_normal.y-t.radius,this.m_points[n].Set(o,s);this.m_normal.x*=-1,this.m_normal.y*=-1}},n.postDefs.push(function(){n.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new B,n.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new B})}(),function(){var t=(n.Dynamics.b2Body,n.Dynamics.b2BodyDef,n.Dynamics.b2ContactFilter,n.Dynamics.b2ContactImpulse,n.Dynamics.b2ContactListener,n.Dynamics.b2ContactManager,n.Dynamics.b2DebugDraw,n.Dynamics.b2DestructionListener,n.Dynamics.b2FilterData,n.Dynamics.b2Fixture,n.Dynamics.b2FixtureDef,n.Dynamics.b2Island,n.Dynamics.b2TimeStep,n.Dynamics.b2World,n.Common.Math.b2Mat22),e=(n.Common.Math.b2Mat33,n.Common.Math.b2Math),i=(n.Common.Math.b2Sweep,n.Common.Math.b2Transform,n.Common.Math.b2Vec2),o=(n.Common.Math.b2Vec3,n.Common.b2Color),s=(n.Common.b2internal,n.Common.b2Settings,n.Collision.Shapes.b2CircleShape,n.Collision.Shapes.b2EdgeChainDef,n.Collision.Shapes.b2EdgeShape,n.Collision.Shapes.b2MassData,n.Collision.Shapes.b2PolygonShape,n.Collision.Shapes.b2Shape,n.Dynamics.Controllers.b2BuoyancyController),r=n.Dynamics.Controllers.b2ConstantAccelController,a=n.Dynamics.Controllers.b2ConstantForceController,l=n.Dynamics.Controllers.b2Controller,c=n.Dynamics.Controllers.b2ControllerEdge,h=n.Dynamics.Controllers.b2GravityController,u=n.Dynamics.Controllers.b2TensorDampingController;n.inherit(s,n.Dynamics.Controllers.b2Controller),s.prototype.__super=n.Dynamics.Controllers.b2Controller.prototype,s.b2BuoyancyController=function(){n.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.normal=new i(0,-1),this.offset=0,this.density=0,this.velocity=new i(0,0),this.linearDrag=2,this.angularDrag=1,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=null},s.prototype.Step=function(t){if(this.m_bodyList){this.useWorldGravity&&(this.gravity=this.GetWorld().GetGravity().Copy());for(var e=this.m_bodyList;e;e=e.nextBody){var n=e.body;if(0!=n.IsAwake()){for(var o=new i,s=new i,r=0,a=0,l=n.GetFixtureList();l;l=l.GetNext()){var c=new i,h=l.GetShape().ComputeSubmergedArea(this.normal,this.offset,n.GetTransform(),c);r+=h,o.x+=h*c.x,o.y+=h*c.y;var u=0;u=(this.useDensity,1),a+=h*u,s.x+=h*c.x*u,s.y+=h*c.y*u}if(o.x/=r,o.y/=r,s.x/=a,s.y/=a,!(r<Number.MIN_VALUE)){var m=this.gravity.GetNegative();m.Multiply(this.density*r),n.ApplyForce(m,s);var p=n.GetLinearVelocityFromWorldPoint(o);p.Subtract(this.velocity),p.Multiply(-this.linearDrag*r),n.ApplyForce(p,o),n.ApplyTorque(-n.GetInertia()/n.GetMass()*r*n.GetAngularVelocity()*this.angularDrag)}}}}},s.prototype.Draw=function(t){var e=1e3,n=new i,s=new i;n.x=this.normal.x*this.offset+this.normal.y*e,n.y=this.normal.y*this.offset-this.normal.x*e,s.x=this.normal.x*this.offset-this.normal.y*e,s.y=this.normal.y*this.offset+this.normal.x*e;var r=new o(0,0,1);t.DrawSegment(n,s,r)},n.inherit(r,n.Dynamics.Controllers.b2Controller),r.prototype.__super=n.Dynamics.Controllers.b2Controller.prototype,r.b2ConstantAccelController=function(){n.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.A=new i(0,0)},r.prototype.Step=function(t){for(var e=new i(this.A.x*t.dt,this.A.y*t.dt),n=this.m_bodyList;n;n=n.nextBody){var o=n.body;o.IsAwake()&&o.SetLinearVelocity(new i(o.GetLinearVelocity().x+e.x,o.GetLinearVelocity().y+e.y))}},n.inherit(a,n.Dynamics.Controllers.b2Controller),a.prototype.__super=n.Dynamics.Controllers.b2Controller.prototype,a.b2ConstantForceController=function(){n.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.F=new i(0,0)},a.prototype.Step=function(t){for(var e=this.m_bodyList;e;e=e.nextBody){var i=e.body;i.IsAwake()&&i.ApplyForce(this.F,i.GetWorldCenter())}},l.b2Controller=function(){},l.prototype.Step=function(t){},l.prototype.Draw=function(t){},l.prototype.AddBody=function(t){var e=new c;e.controller=this,e.body=t,e.nextBody=this.m_bodyList,e.prevBody=null,this.m_bodyList=e,e.nextBody&&(e.nextBody.prevBody=e),this.m_bodyCount++,e.nextController=t.m_controllerList,e.prevController=null,t.m_controllerList=e,e.nextController&&(e.nextController.prevController=e),t.m_controllerCount++},l.prototype.RemoveBody=function(t){for(var e=t.m_controllerList;e&&e.controller!=this;)e=e.nextController;e.prevBody&&(e.prevBody.nextBody=e.nextBody),e.nextBody&&(e.nextBody.prevBody=e.prevBody),e.nextController&&(e.nextController.prevController=e.prevController),e.prevController&&(e.prevController.nextController=e.nextController),this.m_bodyList==e&&(this.m_bodyList=e.nextBody),t.m_controllerList==e&&(t.m_controllerList=e.nextController),t.m_controllerCount--,this.m_bodyCount--},l.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body)},l.prototype.GetNext=function(){return this.m_next},l.prototype.GetWorld=function(){return this.m_world},l.prototype.GetBodyList=function(){return this.m_bodyList},c.b2ControllerEdge=function(){},n.inherit(h,n.Dynamics.Controllers.b2Controller),h.prototype.__super=n.Dynamics.Controllers.b2Controller.prototype,h.b2GravityController=function(){n.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.G=1,this.invSqr=!0},h.prototype.Step=function(t){var e=null,n=null,o=null,s=0,r=null,a=null,l=null,c=0,h=0,u=0,m=null;if(this.invSqr)for(e=this.m_bodyList;e;e=e.nextBody)for(n=e.body,o=n.GetWorldCenter(),s=n.GetMass(),r=this.m_bodyList;r!=e;r=r.nextBody)a=r.body,l=a.GetWorldCenter(),c=l.x-o.x,h=l.y-o.y,(u=c*c+h*h)<Number.MIN_VALUE||(m=new i(c,h),m.Multiply(this.G/u/Math.sqrt(u)*s*a.GetMass()),n.IsAwake()&&n.ApplyForce(m,o),m.Multiply(-1),a.IsAwake()&&a.ApplyForce(m,l));else for(e=this.m_bodyList;e;e=e.nextBody)for(n=e.body,o=n.GetWorldCenter(),s=n.GetMass(),r=this.m_bodyList;r!=e;r=r.nextBody)a=r.body,l=a.GetWorldCenter(),c=l.x-o.x,h=l.y-o.y,(u=c*c+h*h)<Number.MIN_VALUE||(m=new i(c,h),m.Multiply(this.G/u*s*a.GetMass()),n.IsAwake()&&n.ApplyForce(m,o),m.Multiply(-1),a.IsAwake()&&a.ApplyForce(m,l))},n.inherit(u,n.Dynamics.Controllers.b2Controller),u.prototype.__super=n.Dynamics.Controllers.b2Controller.prototype,u.b2TensorDampingController=function(){n.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.T=new t,this.maxTimestep=0},u.prototype.SetAxisAligned=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.T.col1.x=-t,this.T.col1.y=0,this.T.col2.x=0,this.T.col2.y=-e,this.maxTimestep=t>0||e>0?1/Math.max(t,e):0},u.prototype.Step=function(t){var n=t.dt;if(!(n<=Number.MIN_VALUE)){n>this.maxTimestep&&this.maxTimestep>0&&(n=this.maxTimestep);for(var o=this.m_bodyList;o;o=o.nextBody){var s=o.body;if(s.IsAwake()){var r=s.GetWorldVector(e.MulMV(this.T,s.GetLocalVector(s.GetLinearVelocity())));s.SetLinearVelocity(new i(s.GetLinearVelocity().x+r.x*n,s.GetLinearVelocity().y+r.y*n))}}}}}(),function(){var t=(n.Common.b2Color,n.Common.b2internal,n.Common.b2Settings),e=n.Common.Math.b2Mat22,i=n.Common.Math.b2Mat33,o=n.Common.Math.b2Math,s=(n.Common.Math.b2Sweep,n.Common.Math.b2Transform,n.Common.Math.b2Vec2),r=n.Common.Math.b2Vec3,a=n.Dynamics.Joints.b2DistanceJoint,l=n.Dynamics.Joints.b2DistanceJointDef,c=n.Dynamics.Joints.b2FrictionJoint,h=n.Dynamics.Joints.b2FrictionJointDef,u=n.Dynamics.Joints.b2GearJoint,m=n.Dynamics.Joints.b2GearJointDef,p=n.Dynamics.Joints.b2Jacobian,f=n.Dynamics.Joints.b2Joint,_=n.Dynamics.Joints.b2JointDef,y=n.Dynamics.Joints.b2JointEdge,d=n.Dynamics.Joints.b2LineJoint,x=n.Dynamics.Joints.b2LineJointDef,v=n.Dynamics.Joints.b2MouseJoint,b=n.Dynamics.Joints.b2MouseJointDef,g=n.Dynamics.Joints.b2PrismaticJoint,C=n.Dynamics.Joints.b2PrismaticJointDef,w=n.Dynamics.Joints.b2PulleyJoint,S=n.Dynamics.Joints.b2PulleyJointDef,A=n.Dynamics.Joints.b2RevoluteJoint,D=n.Dynamics.Joints.b2RevoluteJointDef,B=n.Dynamics.Joints.b2WeldJoint,M=n.Dynamics.Joints.b2WeldJointDef;n.Dynamics.b2Body,n.Dynamics.b2BodyDef,n.Dynamics.b2ContactFilter,n.Dynamics.b2ContactImpulse,n.Dynamics.b2ContactListener,n.Dynamics.b2ContactManager,n.Dynamics.b2DebugDraw,n.Dynamics.b2DestructionListener,n.Dynamics.b2FilterData,n.Dynamics.b2Fixture,n.Dynamics.b2FixtureDef,n.Dynamics.b2Island,n.Dynamics.b2TimeStep,n.Dynamics.b2World;n.inherit(a,n.Dynamics.Joints.b2Joint),a.prototype.__super=n.Dynamics.Joints.b2Joint.prototype,a.b2DistanceJoint=function(){n.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_u=new s},a.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},a.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},a.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)},a.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},a.prototype.GetLength=function(){return this.m_length},a.prototype.SetLength=function(t){void 0===t&&(t=0),this.m_length=t},a.prototype.GetFrequency=function(){return this.m_frequencyHz},a.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},a.prototype.GetDampingRatio=function(){return this.m_dampingRatio},a.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},a.prototype.b2DistanceJoint=function(t){this.__super.b2Joint.call(this,t);this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_length=t.length,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0},a.prototype.InitVelocityConstraints=function(e){var i,n=0,o=this.m_bodyA,s=this.m_bodyB;i=o.m_xf.R;var r=this.m_localAnchor1.x-o.m_sweep.localCenter.x,a=this.m_localAnchor1.y-o.m_sweep.localCenter.y;n=i.col1.x*r+i.col2.x*a,a=i.col1.y*r+i.col2.y*a,r=n,i=s.m_xf.R;var l=this.m_localAnchor2.x-s.m_sweep.localCenter.x,c=this.m_localAnchor2.y-s.m_sweep.localCenter.y;n=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=n,this.m_u.x=s.m_sweep.c.x+l-o.m_sweep.c.x-r,this.m_u.y=s.m_sweep.c.y+c-o.m_sweep.c.y-a;var h=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);h>t.b2_linearSlop?this.m_u.Multiply(1/h):this.m_u.SetZero();var u=r*this.m_u.y-a*this.m_u.x,m=l*this.m_u.y-c*this.m_u.x,p=o.m_invMass+o.m_invI*u*u+s.m_invMass+s.m_invI*m*m;if(this.m_mass=0!=p?1/p:0,this.m_frequencyHz>0){var f=h-this.m_length,_=2*Math.PI*this.m_frequencyHz,y=2*this.m_mass*this.m_dampingRatio*_,d=this.m_mass*_*_;this.m_gamma=e.dt*(y+e.dt*d),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=f*e.dt*d*this.m_gamma,this.m_mass=p+this.m_gamma,this.m_mass=0!=this.m_mass?1/this.m_mass:0}if(e.warmStarting){this.m_impulse*=e.dtRatio;var x=this.m_impulse*this.m_u.x,v=this.m_impulse*this.m_u.y;o.m_linearVelocity.x-=o.m_invMass*x,o.m_linearVelocity.y-=o.m_invMass*v,o.m_angularVelocity-=o.m_invI*(r*v-a*x),s.m_linearVelocity.x+=s.m_invMass*x,s.m_linearVelocity.y+=s.m_invMass*v,s.m_angularVelocity+=s.m_invI*(l*v-c*x)}else this.m_impulse=0},a.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyA,n=this.m_bodyB;e=i.m_xf.R;var o=this.m_localAnchor1.x-i.m_sweep.localCenter.x,s=this.m_localAnchor1.y-i.m_sweep.localCenter.y,r=e.col1.x*o+e.col2.x*s;s=e.col1.y*o+e.col2.y*s,o=r,e=n.m_xf.R;var a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y;r=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=r;var c=i.m_linearVelocity.x+-i.m_angularVelocity*s,h=i.m_linearVelocity.y+i.m_angularVelocity*o,u=n.m_linearVelocity.x+-n.m_angularVelocity*l,m=n.m_linearVelocity.y+n.m_angularVelocity*a,p=this.m_u.x*(u-c)+this.m_u.y*(m-h),f=-this.m_mass*(p+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=f;var _=f*this.m_u.x,y=f*this.m_u.y;i.m_linearVelocity.x-=i.m_invMass*_,i.m_linearVelocity.y-=i.m_invMass*y,i.m_angularVelocity-=i.m_invI*(o*y-s*_),n.m_linearVelocity.x+=n.m_invMass*_,n.m_linearVelocity.y+=n.m_invMass*y,n.m_angularVelocity+=n.m_invI*(a*y-l*_)},a.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i;if(this.m_frequencyHz>0)return!0;var n=this.m_bodyA,s=this.m_bodyB;i=n.m_xf.R;var r=this.m_localAnchor1.x-n.m_sweep.localCenter.x,a=this.m_localAnchor1.y-n.m_sweep.localCenter.y,l=i.col1.x*r+i.col2.x*a;a=i.col1.y*r+i.col2.y*a,r=l,i=s.m_xf.R;var c=this.m_localAnchor2.x-s.m_sweep.localCenter.x,h=this.m_localAnchor2.y-s.m_sweep.localCenter.y;l=i.col1.x*c+i.col2.x*h,h=i.col1.y*c+i.col2.y*h,c=l;var u=s.m_sweep.c.x+c-n.m_sweep.c.x-r,m=s.m_sweep.c.y+h-n.m_sweep.c.y-a,p=Math.sqrt(u*u+m*m);u/=p,m/=p;var f=p-this.m_length;f=o.Clamp(f,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection);var _=-this.m_mass*f;this.m_u.Set(u,m);var y=_*this.m_u.x,d=_*this.m_u.y;return n.m_sweep.c.x-=n.m_invMass*y,n.m_sweep.c.y-=n.m_invMass*d,n.m_sweep.a-=n.m_invI*(r*d-a*y),s.m_sweep.c.x+=s.m_invMass*y,s.m_sweep.c.y+=s.m_invMass*d,s.m_sweep.a+=s.m_invI*(c*d-h*y),n.SynchronizeTransform(),s.SynchronizeTransform(),o.Abs(f)<t.b2_linearSlop},n.inherit(l,n.Dynamics.Joints.b2JointDef),l.prototype.__super=n.Dynamics.Joints.b2JointDef.prototype,l.b2DistanceJointDef=function(){n.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s},l.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this),this.type=f.e_distanceJoint,this.length=1,this.frequencyHz=0,this.dampingRatio=0},l.prototype.Initialize=function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n));var o=n.x-i.x,s=n.y-i.y;this.length=Math.sqrt(o*o+s*s),this.frequencyHz=0,this.dampingRatio=0},n.inherit(c,n.Dynamics.Joints.b2Joint),c.prototype.__super=n.Dynamics.Joints.b2Joint.prototype,c.b2FrictionJoint=function(){n.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new s,this.m_localAnchorB=new s,this.m_linearMass=new e,this.m_linearImpulse=new s},c.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},c.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},c.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)},c.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_angularImpulse},c.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},c.prototype.GetMaxForce=function(){return this.m_maxForce},c.prototype.SetMaxTorque=function(t){void 0===t&&(t=0),this.m_maxTorque=t},c.prototype.GetMaxTorque=function(){return this.m_maxTorque},c.prototype.b2FrictionJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_linearMass.SetZero(),this.m_angularMass=0,this.m_linearImpulse.SetZero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque},c.prototype.InitVelocityConstraints=function(t){var i,n=0,o=this.m_bodyA,s=this.m_bodyB;i=o.m_xf.R;var r=this.m_localAnchorA.x-o.m_sweep.localCenter.x,a=this.m_localAnchorA.y-o.m_sweep.localCenter.y;n=i.col1.x*r+i.col2.x*a,a=i.col1.y*r+i.col2.y*a,r=n,i=s.m_xf.R;var l=this.m_localAnchorB.x-s.m_sweep.localCenter.x,c=this.m_localAnchorB.y-s.m_sweep.localCenter.y;n=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=n;var h=o.m_invMass,u=s.m_invMass,m=o.m_invI,p=s.m_invI,f=new e;if(f.col1.x=h+u,f.col2.x=0,f.col1.y=0,f.col2.y=h+u,f.col1.x+=m*a*a,f.col2.x+=-m*r*a,f.col1.y+=-m*r*a,f.col2.y+=m*r*r,f.col1.x+=p*c*c,f.col2.x+=-p*l*c,f.col1.y+=-p*l*c,f.col2.y+=p*l*l,f.GetInverse(this.m_linearMass),this.m_angularMass=m+p,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.x*=t.dtRatio,this.m_linearImpulse.y*=t.dtRatio,this.m_angularImpulse*=t.dtRatio;var _=this.m_linearImpulse;o.m_linearVelocity.x-=h*_.x,o.m_linearVelocity.y-=h*_.y,o.m_angularVelocity-=m*(r*_.y-a*_.x+this.m_angularImpulse),s.m_linearVelocity.x+=u*_.x,s.m_linearVelocity.y+=u*_.y,s.m_angularVelocity+=p*(l*_.y-c*_.x+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0},c.prototype.SolveVelocityConstraints=function(t){var e,i=0,n=this.m_bodyA,r=this.m_bodyB,a=n.m_linearVelocity,l=n.m_angularVelocity,c=r.m_linearVelocity,h=r.m_angularVelocity,u=n.m_invMass,m=r.m_invMass,p=n.m_invI,f=r.m_invI;e=n.m_xf.R;var _=this.m_localAnchorA.x-n.m_sweep.localCenter.x,y=this.m_localAnchorA.y-n.m_sweep.localCenter.y;i=e.col1.x*_+e.col2.x*y,y=e.col1.y*_+e.col2.y*y,_=i,e=r.m_xf.R;var d=this.m_localAnchorB.x-r.m_sweep.localCenter.x,x=this.m_localAnchorB.y-r.m_sweep.localCenter.y;i=e.col1.x*d+e.col2.x*x,x=e.col1.y*d+e.col2.y*x,d=i;var v=0,b=h-l,g=-this.m_angularMass*b,C=this.m_angularImpulse;v=t.dt*this.m_maxTorque,this.m_angularImpulse=o.Clamp(this.m_angularImpulse+g,-v,v),g=this.m_angularImpulse-C,l-=p*g,h+=f*g;var w=c.x-h*x-a.x+l*y,S=c.y+h*d-a.y-l*_,A=o.MulMV(this.m_linearMass,new s(-w,-S)),D=this.m_linearImpulse.Copy();this.m_linearImpulse.Add(A),v=t.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>v*v&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(v)),A=o.SubtractVV(this.m_linearImpulse,D),a.x-=u*A.x,a.y-=u*A.y,l-=p*(_*A.y-y*A.x),c.x+=m*A.x,c.y+=m*A.y,h+=f*(d*A.y-x*A.x),n.m_angularVelocity=l,r.m_angularVelocity=h},c.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!0},n.inherit(h,n.Dynamics.Joints.b2JointDef),h.prototype.__super=n.Dynamics.Joints.b2JointDef.prototype,h.b2FrictionJointDef=function(){n.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s},h.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this),this.type=f.e_frictionJoint,this.maxForce=0,this.maxTorque=0},h.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i))},n.inherit(u,n.Dynamics.Joints.b2Joint),u.prototype.__super=n.Dynamics.Joints.b2Joint.prototype,u.b2GearJoint=function(){n.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new s,this.m_groundAnchor2=new s,this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_J=new p},u.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},u.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},u.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse*this.m_J.linearB.x,t*this.m_impulse*this.m_J.linearB.y)},u.prototype.GetReactionTorque=function(t){void 0===t&&(t=0);var e=this.m_bodyB.m_xf.R,i=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,n=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,o=e.col1.x*i+e.col2.x*n;n=e.col1.y*i+e.col2.y*n,i=o;var s=this.m_impulse*this.m_J.linearB.x,r=this.m_impulse*this.m_J.linearB.y;return t*(this.m_impulse*this.m_J.angularB-i*r+n*s)},u.prototype.GetRatio=function(){return this.m_ratio},u.prototype.SetRatio=function(t){void 0===t&&(t=0),this.m_ratio=t},u.prototype.b2GearJoint=function(t){this.__super.b2Joint.call(this,t);var e=parseInt(t.joint1.m_type),i=parseInt(t.joint2.m_type);this.m_revolute1=null,this.m_prismatic1=null,this.m_revolute2=null,this.m_prismatic2=null;var n=0,o=0;this.m_ground1=t.joint1.GetBodyA(),this.m_bodyA=t.joint1.GetBodyB(),e==f.e_revoluteJoint?(this.m_revolute1=t.joint1 instanceof A?t.joint1:null,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),n=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=t.joint1 instanceof g?t.joint1:null,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),n=this.m_prismatic1.GetJointTranslation()),this.m_ground2=t.joint2.GetBodyA(),this.m_bodyB=t.joint2.GetBodyB(),i==f.e_revoluteJoint?(this.m_revolute2=t.joint2 instanceof A?t.joint2:null,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),o=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=t.joint2 instanceof g?t.joint2:null,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),o=this.m_prismatic2.GetJointTranslation()),this.m_ratio=t.ratio,this.m_constant=n+this.m_ratio*o,this.m_impulse=0},u.prototype.InitVelocityConstraints=function(t){var e,i,n=this.m_ground1,o=this.m_ground2,s=this.m_bodyA,r=this.m_bodyB,a=0,l=0,c=0,h=0,u=0,m=0,p=0;this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,p+=s.m_invI):(e=n.m_xf.R,i=this.m_prismatic1.m_localXAxis1,a=e.col1.x*i.x+e.col2.x*i.y,l=e.col1.y*i.x+e.col2.y*i.y,e=s.m_xf.R,c=this.m_localAnchor1.x-s.m_sweep.localCenter.x,h=this.m_localAnchor1.y-s.m_sweep.localCenter.y,m=e.col1.x*c+e.col2.x*h,h=e.col1.y*c+e.col2.y*h,c=m,u=c*l-h*a,this.m_J.linearA.Set(-a,-l),this.m_J.angularA=-u,p+=s.m_invMass+s.m_invI*u*u),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,p+=this.m_ratio*this.m_ratio*r.m_invI):(e=o.m_xf.R,i=this.m_prismatic2.m_localXAxis1,a=e.col1.x*i.x+e.col2.x*i.y,l=e.col1.y*i.x+e.col2.y*i.y,e=r.m_xf.R,c=this.m_localAnchor2.x-r.m_sweep.localCenter.x,h=this.m_localAnchor2.y-r.m_sweep.localCenter.y,m=e.col1.x*c+e.col2.x*h,h=e.col1.y*c+e.col2.y*h,c=m,u=c*l-h*a,this.m_J.linearB.Set(-this.m_ratio*a,-this.m_ratio*l),this.m_J.angularB=-this.m_ratio*u,p+=this.m_ratio*this.m_ratio*(r.m_invMass+r.m_invI*u*u)),this.m_mass=p>0?1/p:0,t.warmStarting?(s.m_linearVelocity.x+=s.m_invMass*this.m_impulse*this.m_J.linearA.x,s.m_linearVelocity.y+=s.m_invMass*this.m_impulse*this.m_J.linearA.y,s.m_angularVelocity+=s.m_invI*this.m_impulse*this.m_J.angularA,r.m_linearVelocity.x+=r.m_invMass*this.m_impulse*this.m_J.linearB.x,r.m_linearVelocity.y+=r.m_invMass*this.m_impulse*this.m_J.linearB.y,r.m_angularVelocity+=r.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},u.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,n=this.m_J.Compute(e.m_linearVelocity,e.m_angularVelocity,i.m_linearVelocity,i.m_angularVelocity),o=-this.m_mass*n;this.m_impulse+=o,e.m_linearVelocity.x+=e.m_invMass*o*this.m_J.linearA.x,e.m_linearVelocity.y+=e.m_invMass*o*this.m_J.linearA.y,e.m_angularVelocity+=e.m_invI*o*this.m_J.angularA,i.m_linearVelocity.x+=i.m_invMass*o*this.m_J.linearB.x,i.m_linearVelocity.y+=i.m_invMass*o*this.m_J.linearB.y,i.m_angularVelocity+=i.m_invI*o*this.m_J.angularB},u.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i=this.m_bodyA,n=this.m_bodyB,o=0,s=0;o=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation(),s=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation();var r=this.m_constant-(o+this.m_ratio*s),a=-this.m_mass*r;return i.m_sweep.c.x+=i.m_invMass*a*this.m_J.linearA.x,i.m_sweep.c.y+=i.m_invMass*a*this.m_J.linearA.y,i.m_sweep.a+=i.m_invI*a*this.m_J.angularA,n.m_sweep.c.x+=n.m_invMass*a*this.m_J.linearB.x,n.m_sweep.c.y+=n.m_invMass*a*this.m_J.linearB.y,n.m_sweep.a+=n.m_invI*a*this.m_J.angularB,i.SynchronizeTransform(),n.SynchronizeTransform(),0<t.b2_linearSlop},n.inherit(m,n.Dynamics.Joints.b2JointDef),m.prototype.__super=n.Dynamics.Joints.b2JointDef.prototype,m.b2GearJointDef=function(){n.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)},m.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this),this.type=f.e_gearJoint,this.joint1=null,this.joint2=null,this.ratio=1},p.b2Jacobian=function(){this.linearA=new s,this.linearB=new s},p.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},p.prototype.Set=function(t,e,i,n){void 0===e&&(e=0),void 0===n&&(n=0),this.linearA.SetV(t),this.angularA=e,this.linearB.SetV(i),this.angularB=n},p.prototype.Compute=function(t,e,i,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.linearA.x*t.x+this.linearA.y*t.y+this.angularA*e+(this.linearB.x*i.x+this.linearB.y*i.y)+this.angularB*n},f.b2Joint=function(){this.m_edgeA=new y,this.m_edgeB=new y,this.m_localCenterA=new s,this.m_localCenterB=new s},f.prototype.GetType=function(){return this.m_type},f.prototype.GetAnchorA=function(){return null},f.prototype.GetAnchorB=function(){return null},f.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),null},f.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},f.prototype.GetBodyA=function(){return this.m_bodyA},f.prototype.GetBodyB=function(){return this.m_bodyB},f.prototype.GetNext=function(){return this.m_next},f.prototype.GetUserData=function(){return this.m_userData},f.prototype.SetUserData=function(t){this.m_userData=t},f.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},f.Create=function(t,e){var i=null;switch(t.type){case f.e_distanceJoint:i=new a(t instanceof l?t:null);break;case f.e_mouseJoint:i=new v(t instanceof b?t:null);break;case f.e_prismaticJoint:i=new g(t instanceof C?t:null);break;case f.e_revoluteJoint:i=new A(t instanceof D?t:null);break;case f.e_pulleyJoint:i=new w(t instanceof S?t:null);break;case f.e_gearJoint:i=new u(t instanceof m?t:null);break;case f.e_lineJoint:i=new d(t instanceof x?t:null);break;case f.e_weldJoint:i=new B(t instanceof M?t:null);break;case f.e_frictionJoint:i=new c(t instanceof h?t:null)}return i},f.Destroy=function(t,e){},f.prototype.b2Joint=function(e){t.b2Assert(e.bodyA!=e.bodyB),this.m_type=e.type,this.m_prev=null,this.m_next=null,this.m_bodyA=e.bodyA,this.m_bodyB=e.bodyB,this.m_collideConnected=e.collideConnected,this.m_islandFlag=!1,this.m_userData=e.userData},f.prototype.InitVelocityConstraints=function(t){},f.prototype.SolveVelocityConstraints=function(t){},f.prototype.FinalizeVelocityConstraints=function(){},f.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!1},n.postDefs.push(function(){n.Dynamics.Joints.b2Joint.e_unknownJoint=0,n.Dynamics.Joints.b2Joint.e_revoluteJoint=1,n.Dynamics.Joints.b2Joint.e_prismaticJoint=2,n.Dynamics.Joints.b2Joint.e_distanceJoint=3,n.Dynamics.Joints.b2Joint.e_pulleyJoint=4,n.Dynamics.Joints.b2Joint.e_mouseJoint=5,n.Dynamics.Joints.b2Joint.e_gearJoint=6,n.Dynamics.Joints.b2Joint.e_lineJoint=7,n.Dynamics.Joints.b2Joint.e_weldJoint=8,n.Dynamics.Joints.b2Joint.e_frictionJoint=9,n.Dynamics.Joints.b2Joint.e_inactiveLimit=0,n.Dynamics.Joints.b2Joint.e_atLowerLimit=1,n.Dynamics.Joints.b2Joint.e_atUpperLimit=2,n.Dynamics.Joints.b2Joint.e_equalLimits=3}),_.b2JointDef=function(){},_.prototype.b2JointDef=function(){this.type=f.e_unknownJoint,this.userData=null,this.bodyA=null,this.bodyB=null,this.collideConnected=!1},y.b2JointEdge=function(){},n.inherit(d,n.Dynamics.Joints.b2Joint),d.prototype.__super=n.Dynamics.Joints.b2Joint.prototype,d.b2LineJoint=function(){n.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_localXAxis1=new s,this.m_localYAxis1=new s,this.m_axis=new s,this.m_perp=new s,this.m_K=new e,this.m_impulse=new s},d.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},d.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},d.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},d.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},d.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchor1),n=e.GetWorldPoint(this.m_localAnchor2),o=n.x-i.x,s=n.y-i.y,r=t.GetWorldVector(this.m_localXAxis1);return r.x*o+r.y*s},d.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*n+t.col2.x*o;o=t.col1.y*n+t.col2.y*o,n=s,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s;var l=e.m_sweep.c.x+n,c=e.m_sweep.c.y+o,h=i.m_sweep.c.x+r,u=i.m_sweep.c.y+a,m=h-l,p=u-c,f=e.GetWorldVector(this.m_localXAxis1),_=e.m_linearVelocity,y=i.m_linearVelocity,d=e.m_angularVelocity,x=i.m_angularVelocity;return m*(-d*f.y)+p*(d*f.x)+(f.x*(y.x+-x*a-_.x- -d*o)+f.y*(y.y+x*r-_.y-d*n))},d.prototype.IsLimitEnabled=function(){return this.m_enableLimit},d.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},d.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},d.prototype.GetUpperLimit=function(){return this.m_upperTranslation},d.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},d.prototype.IsMotorEnabled=function(){return this.m_enableMotor},d.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},d.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},d.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},d.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},d.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},d.prototype.GetMotorForce=function(){return this.m_motorImpulse},d.prototype.b2LineJoint=function(t){this.__super.b2Joint.call(this,t);this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=f.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},d.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,s=this.m_bodyB,r=0;this.m_localCenterA.SetV(n.GetLocalCenter()),this.m_localCenterB.SetV(s.GetLocalCenter());var a=n.GetTransform();s.GetTransform();i=n.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;r=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=r,i=s.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x,u=this.m_localAnchor2.y-this.m_localCenterB.y;r=i.col1.x*h+i.col2.x*u,u=i.col1.y*h+i.col2.y*u,h=r;var m=s.m_sweep.c.x+h-n.m_sweep.c.x-l,p=s.m_sweep.c.y+u-n.m_sweep.c.y-c;this.m_invMassA=n.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=n.m_invI,this.m_invIB=s.m_invI,this.m_axis.SetV(o.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(m+l)*this.m_axis.y-(p+c)*this.m_axis.x,this.m_a2=h*this.m_axis.y-u*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.SetV(o.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(m+l)*this.m_perp.y-(p+c)*this.m_perp.x,this.m_s2=h*this.m_perp.y-u*this.m_perp.x;var _=this.m_invMassA,y=this.m_invMassB,d=this.m_invIA,x=this.m_invIB;if(this.m_K.col1.x=_+y+d*this.m_s1*this.m_s1+x*this.m_s2*this.m_s2,this.m_K.col1.y=d*this.m_s1*this.m_a1+x*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=_+y+d*this.m_a1*this.m_a1+x*this.m_a2*this.m_a2,this.m_enableLimit){var v=this.m_axis.x*m+this.m_axis.y*p;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=f.e_equalLimits:v<=this.m_lowerTranslation?this.m_limitState!=f.e_atLowerLimit&&(this.m_limitState=f.e_atLowerLimit,this.m_impulse.y=0):v>=this.m_upperTranslation?this.m_limitState!=f.e_atUpperLimit&&(this.m_limitState=f.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=f.e_inactiveLimit,this.m_impulse.y=0)}else this.m_limitState=f.e_inactiveLimit;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var b=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,g=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,C=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,w=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2;n.m_linearVelocity.x-=this.m_invMassA*b,n.m_linearVelocity.y-=this.m_invMassA*g,n.m_angularVelocity-=this.m_invIA*C,s.m_linearVelocity.x+=this.m_invMassB*b,s.m_linearVelocity.y+=this.m_invMassB*g,s.m_angularVelocity+=this.m_invIB*w}else this.m_impulse.SetZero(),this.m_motorImpulse=0},d.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,n=e.m_linearVelocity,r=e.m_angularVelocity,a=i.m_linearVelocity,l=i.m_angularVelocity,c=0,h=0,u=0,m=0;if(this.m_enableMotor&&this.m_limitState!=f.e_equalLimits){var p=this.m_axis.x*(a.x-n.x)+this.m_axis.y*(a.y-n.y)+this.m_a2*l-this.m_a1*r,_=this.m_motorMass*(this.m_motorSpeed-p),y=this.m_motorImpulse,d=t.dt*this.m_maxMotorForce;this.m_motorImpulse=o.Clamp(this.m_motorImpulse+_,-d,d),_=this.m_motorImpulse-y,c=_*this.m_axis.x,h=_*this.m_axis.y,u=_*this.m_a1,m=_*this.m_a2,n.x-=this.m_invMassA*c,n.y-=this.m_invMassA*h,r-=this.m_invIA*u,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*h,l+=this.m_invIB*m}var x=this.m_perp.x*(a.x-n.x)+this.m_perp.y*(a.y-n.y)+this.m_s2*l-this.m_s1*r;if(this.m_enableLimit&&this.m_limitState!=f.e_inactiveLimit){var v=this.m_axis.x*(a.x-n.x)+this.m_axis.y*(a.y-n.y)+this.m_a2*l-this.m_a1*r,b=this.m_impulse.Copy(),g=this.m_K.Solve(new s,-x,-v);this.m_impulse.Add(g),this.m_limitState==f.e_atLowerLimit?this.m_impulse.y=o.Max(this.m_impulse.y,0):this.m_limitState==f.e_atUpperLimit&&(this.m_impulse.y=o.Min(this.m_impulse.y,0));var C=-x-(this.m_impulse.y-b.y)*this.m_K.col2.x,w=0;w=0!=this.m_K.col1.x?C/this.m_K.col1.x+b.x:b.x,this.m_impulse.x=w,g.x=this.m_impulse.x-b.x,g.y=this.m_impulse.y-b.y,c=g.x*this.m_perp.x+g.y*this.m_axis.x,h=g.x*this.m_perp.y+g.y*this.m_axis.y,u=g.x*this.m_s1+g.y*this.m_a1,m=g.x*this.m_s2+g.y*this.m_a2,n.x-=this.m_invMassA*c,n.y-=this.m_invMassA*h,r-=this.m_invIA*u,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*h,l+=this.m_invIB*m}else{var S=0;S=0!=this.m_K.col1.x?-x/this.m_K.col1.x:0,this.m_impulse.x+=S,c=S*this.m_perp.x,h=S*this.m_perp.y,u=S*this.m_s1,m=S*this.m_s2,n.x-=this.m_invMassA*c,n.y-=this.m_invMassA*h,r-=this.m_invIA*u,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*h,l+=this.m_invIB*m}e.m_linearVelocity.SetV(n),e.m_angularVelocity=r,i.m_linearVelocity.SetV(a),i.m_angularVelocity=l},d.prototype.SolvePositionConstraints=function(i){void 0===i&&(i=0);var n,r=this.m_bodyA,a=this.m_bodyB,l=r.m_sweep.c,c=r.m_sweep.a,h=a.m_sweep.c,u=a.m_sweep.a,m=0,p=0,f=0,_=0,y=0,d=0,x=0,v=!1,b=0,g=e.FromAngle(c),C=e.FromAngle(u);n=g;var w=this.m_localAnchor1.x-this.m_localCenterA.x,S=this.m_localAnchor1.y-this.m_localCenterA.y;m=n.col1.x*w+n.col2.x*S,S=n.col1.y*w+n.col2.y*S,w=m,n=C;var A=this.m_localAnchor2.x-this.m_localCenterB.x,D=this.m_localAnchor2.y-this.m_localCenterB.y;m=n.col1.x*A+n.col2.x*D,D=n.col1.y*A+n.col2.y*D,A=m;var B=h.x+A-l.x-w,M=h.y+D-l.y-S;if(this.m_enableLimit){this.m_axis=o.MulMV(g,this.m_localXAxis1),this.m_a1=(B+w)*this.m_axis.y-(M+S)*this.m_axis.x,this.m_a2=A*this.m_axis.y-D*this.m_axis.x;var I=this.m_axis.x*B+this.m_axis.y*M;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(b=o.Clamp(I,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),d=o.Abs(I),v=!0):I<=this.m_lowerTranslation?(b=o.Clamp(I-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),d=this.m_lowerTranslation-I,v=!0):I>=this.m_upperTranslation&&(b=o.Clamp(I-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),d=I-this.m_upperTranslation,v=!0)}this.m_perp=o.MulMV(g,this.m_localYAxis1),this.m_s1=(B+w)*this.m_perp.y-(M+S)*this.m_perp.x,this.m_s2=A*this.m_perp.y-D*this.m_perp.x;var P=new s,V=this.m_perp.x*B+this.m_perp.y*M;if(d=o.Max(d,o.Abs(V)),x=0,v)p=this.m_invMassA,f=this.m_invMassB,_=this.m_invIA,y=this.m_invIB,this.m_K.col1.x=p+f+_*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,this.m_K.col1.y=_*this.m_s1*this.m_a1+y*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=p+f+_*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2,this.m_K.Solve(P,-V,-b);else{p=this.m_invMassA,f=this.m_invMassB,_=this.m_invIA,y=this.m_invIB;var k=p+f+_*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,T=0;T=0!=k?-V/k:0,P.x=T,P.y=0}var L=P.x*this.m_perp.x+P.y*this.m_axis.x,E=P.x*this.m_perp.y+P.y*this.m_axis.y,F=P.x*this.m_s1+P.y*this.m_a1,R=P.x*this.m_s2+P.y*this.m_a2;return l.x-=this.m_invMassA*L,l.y-=this.m_invMassA*E,c-=this.m_invIA*F,h.x+=this.m_invMassB*L,h.y+=this.m_invMassB*E,u+=this.m_invIB*R,r.m_sweep.a=c,a.m_sweep.a=u,r.SynchronizeTransform(),a.SynchronizeTransform(),d<=t.b2_linearSlop&&x<=t.b2_angularSlop},n.inherit(x,n.Dynamics.Joints.b2JointDef),x.prototype.__super=n.Dynamics.Joints.b2JointDef.prototype,x.b2LineJointDef=function(){n.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s,this.localAxisA=new s},x.prototype.b2LineJointDef=function(){this.__super.b2JointDef.call(this),this.type=f.e_lineJoint,this.localAxisA.Set(1,0),this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},x.prototype.Initialize=function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.localAxisA=this.bodyA.GetLocalVector(n)},n.inherit(v,n.Dynamics.Joints.b2Joint),v.prototype.__super=n.Dynamics.Joints.b2Joint.prototype,v.b2MouseJoint=function(){n.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.m_localAnchor=new s,this.m_target=new s,this.m_impulse=new s,this.m_mass=new e,this.m_C=new s},v.prototype.GetAnchorA=function(){return this.m_target},v.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},v.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse.x,t*this.m_impulse.y)},v.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},v.prototype.GetTarget=function(){return this.m_target},v.prototype.SetTarget=function(t){0==this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0),this.m_target=t},v.prototype.GetMaxForce=function(){return this.m_maxForce},v.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},v.prototype.GetFrequency=function(){return this.m_frequencyHz},v.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},v.prototype.GetDampingRatio=function(){return this.m_dampingRatio},v.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},v.prototype.b2MouseJoint=function(t){this.__super.b2Joint.call(this,t),this.m_target.SetV(t.target);var e=this.m_target.x-this.m_bodyB.m_xf.position.x,i=this.m_target.y-this.m_bodyB.m_xf.position.y,n=this.m_bodyB.m_xf.R;this.m_localAnchor.x=e*n.col1.x+i*n.col1.y,this.m_localAnchor.y=e*n.col2.x+i*n.col2.y,this.m_maxForce=t.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0},v.prototype.InitVelocityConstraints=function(t){var e=this.m_bodyB,i=e.GetMass(),n=2*Math.PI*this.m_frequencyHz,o=2*i*this.m_dampingRatio*n,s=i*n*n;this.m_gamma=t.dt*(o+t.dt*s),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_beta=t.dt*s*this.m_gamma;var r;r=e.m_xf.R;var a=this.m_localAnchor.x-e.m_sweep.localCenter.x,l=this.m_localAnchor.y-e.m_sweep.localCenter.y,c=r.col1.x*a+r.col2.x*l;l=r.col1.y*a+r.col2.y*l,a=c;var h=e.m_invMass,u=e.m_invI;this.K1.col1.x=h,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=h,this.K2.col1.x=u*l*l,this.K2.col2.x=-u*a*l,this.K2.col1.y=-u*a*l,this.K2.col2.y=u*a*a,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=e.m_sweep.c.x+a-this.m_target.x,this.m_C.y=e.m_sweep.c.y+l-this.m_target.y,e.m_angularVelocity*=.98,this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,e.m_linearVelocity.x+=h*this.m_impulse.x,e.m_linearVelocity.y+=h*this.m_impulse.y,e.m_angularVelocity+=u*(a*this.m_impulse.y-l*this.m_impulse.x)},v.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyB,n=0,o=0;e=i.m_xf.R;var s=this.m_localAnchor.x-i.m_sweep.localCenter.x,r=this.m_localAnchor.y-i.m_sweep.localCenter.y;n=e.col1.x*s+e.col2.x*r,r=e.col1.y*s+e.col2.y*r,s=n;var a=i.m_linearVelocity.x+-i.m_angularVelocity*r,l=i.m_linearVelocity.y+i.m_angularVelocity*s;e=this.m_mass,n=a+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,o=l+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y;var c=-(e.col1.x*n+e.col2.x*o),h=-(e.col1.y*n+e.col2.y*o),u=this.m_impulse.x,m=this.m_impulse.y;this.m_impulse.x+=c,this.m_impulse.y+=h;var p=t.dt*this.m_maxForce;this.m_impulse.LengthSquared()>p*p&&this.m_impulse.Multiply(p/this.m_impulse.Length()),c=this.m_impulse.x-u,h=this.m_impulse.y-m,i.m_linearVelocity.x+=i.m_invMass*c,i.m_linearVelocity.y+=i.m_invMass*h,i.m_angularVelocity+=i.m_invI*(s*h-r*c)},v.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!0},n.inherit(b,n.Dynamics.Joints.b2JointDef),b.prototype.__super=n.Dynamics.Joints.b2JointDef.prototype,b.b2MouseJointDef=function(){n.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.target=new s},b.prototype.b2MouseJointDef=function(){this.__super.b2JointDef.call(this),this.type=f.e_mouseJoint,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7},n.inherit(g,n.Dynamics.Joints.b2Joint),g.prototype.__super=n.Dynamics.Joints.b2Joint.prototype,g.b2PrismaticJoint=function(){n.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_localXAxis1=new s,this.m_localYAxis1=new s,this.m_axis=new s,this.m_perp=new s,this.m_K=new i,this.m_impulse=new r},g.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},g.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},g.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},g.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},g.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchor1),n=e.GetWorldPoint(this.m_localAnchor2),o=n.x-i.x,s=n.y-i.y,r=t.GetWorldVector(this.m_localXAxis1);return r.x*o+r.y*s},g.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*n+t.col2.x*o;o=t.col1.y*n+t.col2.y*o,n=s,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s;var l=e.m_sweep.c.x+n,c=e.m_sweep.c.y+o,h=i.m_sweep.c.x+r,u=i.m_sweep.c.y+a,m=h-l,p=u-c,f=e.GetWorldVector(this.m_localXAxis1),_=e.m_linearVelocity,y=i.m_linearVelocity,d=e.m_angularVelocity,x=i.m_angularVelocity;return m*(-d*f.y)+p*(d*f.x)+(f.x*(y.x+-x*a-_.x- -d*o)+f.y*(y.y+x*r-_.y-d*n))},g.prototype.IsLimitEnabled=function(){return this.m_enableLimit},g.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},g.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},g.prototype.GetUpperLimit=function(){return this.m_upperTranslation},g.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},g.prototype.IsMotorEnabled=function(){return this.m_enableMotor},g.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},g.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},g.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},g.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},g.prototype.GetMotorForce=function(){return this.m_motorImpulse},g.prototype.b2PrismaticJoint=function(t){this.__super.b2Joint.call(this,t);this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=f.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},g.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,s=this.m_bodyB,r=0;this.m_localCenterA.SetV(n.GetLocalCenter()),this.m_localCenterB.SetV(s.GetLocalCenter());var a=n.GetTransform();s.GetTransform();i=n.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;r=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=r,i=s.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x,u=this.m_localAnchor2.y-this.m_localCenterB.y;r=i.col1.x*h+i.col2.x*u,u=i.col1.y*h+i.col2.y*u,h=r;var m=s.m_sweep.c.x+h-n.m_sweep.c.x-l,p=s.m_sweep.c.y+u-n.m_sweep.c.y-c;this.m_invMassA=n.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=n.m_invI,this.m_invIB=s.m_invI,this.m_axis.SetV(o.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(m+l)*this.m_axis.y-(p+c)*this.m_axis.x,this.m_a2=h*this.m_axis.y-u*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(o.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(m+l)*this.m_perp.y-(p+c)*this.m_perp.x,this.m_s2=h*this.m_perp.y-u*this.m_perp.x;var _=this.m_invMassA,y=this.m_invMassB,d=this.m_invIA,x=this.m_invIB;if(this.m_K.col1.x=_+y+d*this.m_s1*this.m_s1+x*this.m_s2*this.m_s2,this.m_K.col1.y=d*this.m_s1+x*this.m_s2,this.m_K.col1.z=d*this.m_s1*this.m_a1+x*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=d+x,this.m_K.col2.z=d*this.m_a1+x*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=_+y+d*this.m_a1*this.m_a1+x*this.m_a2*this.m_a2,this.m_enableLimit){var v=this.m_axis.x*m+this.m_axis.y*p;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=f.e_equalLimits:v<=this.m_lowerTranslation?this.m_limitState!=f.e_atLowerLimit&&(this.m_limitState=f.e_atLowerLimit,this.m_impulse.z=0):v>=this.m_upperTranslation?this.m_limitState!=f.e_atUpperLimit&&(this.m_limitState=f.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=f.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=f.e_inactiveLimit;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var b=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,g=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,C=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,w=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.m_linearVelocity.x-=this.m_invMassA*b,n.m_linearVelocity.y-=this.m_invMassA*g,n.m_angularVelocity-=this.m_invIA*C,s.m_linearVelocity.x+=this.m_invMassB*b,s.m_linearVelocity.y+=this.m_invMassB*g,s.m_angularVelocity+=this.m_invIB*w}else this.m_impulse.SetZero(),this.m_motorImpulse=0},g.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,n=e.m_linearVelocity,a=e.m_angularVelocity,l=i.m_linearVelocity,c=i.m_angularVelocity,h=0,u=0,m=0,p=0;if(this.m_enableMotor&&this.m_limitState!=f.e_equalLimits){var _=this.m_axis.x*(l.x-n.x)+this.m_axis.y*(l.y-n.y)+this.m_a2*c-this.m_a1*a,y=this.m_motorMass*(this.m_motorSpeed-_),d=this.m_motorImpulse,x=t.dt*this.m_maxMotorForce;this.m_motorImpulse=o.Clamp(this.m_motorImpulse+y,-x,x),y=this.m_motorImpulse-d,h=y*this.m_axis.x,u=y*this.m_axis.y,m=y*this.m_a1,p=y*this.m_a2,n.x-=this.m_invMassA*h,n.y-=this.m_invMassA*u,a-=this.m_invIA*m,l.x+=this.m_invMassB*h,l.y+=this.m_invMassB*u,c+=this.m_invIB*p}var v=this.m_perp.x*(l.x-n.x)+this.m_perp.y*(l.y-n.y)+this.m_s2*c-this.m_s1*a,b=c-a;if(this.m_enableLimit&&this.m_limitState!=f.e_inactiveLimit){var g=this.m_axis.x*(l.x-n.x)+this.m_axis.y*(l.y-n.y)+this.m_a2*c-this.m_a1*a,C=this.m_impulse.Copy(),w=this.m_K.Solve33(new r,-v,-b,-g);this.m_impulse.Add(w),this.m_limitState==f.e_atLowerLimit?this.m_impulse.z=o.Max(this.m_impulse.z,0):this.m_limitState==f.e_atUpperLimit&&(this.m_impulse.z=o.Min(this.m_impulse.z,0));var S=-v-(this.m_impulse.z-C.z)*this.m_K.col3.x,A=-b-(this.m_impulse.z-C.z)*this.m_K.col3.y,D=this.m_K.Solve22(new s,S,A);D.x+=C.x,D.y+=C.y,this.m_impulse.x=D.x,this.m_impulse.y=D.y,w.x=this.m_impulse.x-C.x,w.y=this.m_impulse.y-C.y,w.z=this.m_impulse.z-C.z,h=w.x*this.m_perp.x+w.z*this.m_axis.x,u=w.x*this.m_perp.y+w.z*this.m_axis.y,m=w.x*this.m_s1+w.y+w.z*this.m_a1,p=w.x*this.m_s2+w.y+w.z*this.m_a2,n.x-=this.m_invMassA*h,n.y-=this.m_invMassA*u,a-=this.m_invIA*m,l.x+=this.m_invMassB*h,l.y+=this.m_invMassB*u,c+=this.m_invIB*p}else{var B=this.m_K.Solve22(new s,-v,-b);this.m_impulse.x+=B.x,this.m_impulse.y+=B.y,h=B.x*this.m_perp.x,u=B.x*this.m_perp.y,m=B.x*this.m_s1+B.y,p=B.x*this.m_s2+B.y,n.x-=this.m_invMassA*h,n.y-=this.m_invMassA*u,a-=this.m_invIA*m,l.x+=this.m_invMassB*h,l.y+=this.m_invMassB*u,c+=this.m_invIB*p}e.m_linearVelocity.SetV(n),e.m_angularVelocity=a,i.m_linearVelocity.SetV(l),i.m_angularVelocity=c},g.prototype.SolvePositionConstraints=function(i){void 0===i&&(i=0);var n,a=this.m_bodyA,l=this.m_bodyB,c=a.m_sweep.c,h=a.m_sweep.a,u=l.m_sweep.c,m=l.m_sweep.a,p=0,f=0,_=0,y=0,d=0,x=0,v=0,b=!1,g=0,C=e.FromAngle(h),w=e.FromAngle(m);n=C;var S=this.m_localAnchor1.x-this.m_localCenterA.x,A=this.m_localAnchor1.y-this.m_localCenterA.y;p=n.col1.x*S+n.col2.x*A,A=n.col1.y*S+n.col2.y*A,S=p,n=w;var D=this.m_localAnchor2.x-this.m_localCenterB.x,B=this.m_localAnchor2.y-this.m_localCenterB.y;p=n.col1.x*D+n.col2.x*B,B=n.col1.y*D+n.col2.y*B,D=p;var M=u.x+D-c.x-S,I=u.y+B-c.y-A;if(this.m_enableLimit){this.m_axis=o.MulMV(C,this.m_localXAxis1),this.m_a1=(M+S)*this.m_axis.y-(I+A)*this.m_axis.x,this.m_a2=D*this.m_axis.y-B*this.m_axis.x;var P=this.m_axis.x*M+this.m_axis.y*I;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(g=o.Clamp(P,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),x=o.Abs(P),b=!0):P<=this.m_lowerTranslation?(g=o.Clamp(P-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),x=this.m_lowerTranslation-P,b=!0):P>=this.m_upperTranslation&&(g=o.Clamp(P-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),x=P-this.m_upperTranslation,b=!0)}this.m_perp=o.MulMV(C,this.m_localYAxis1),this.m_s1=(M+S)*this.m_perp.y-(I+A)*this.m_perp.x,this.m_s2=D*this.m_perp.y-B*this.m_perp.x;var V=new r,k=this.m_perp.x*M+this.m_perp.y*I,T=m-h-this.m_refAngle;if(x=o.Max(x,o.Abs(k)),v=o.Abs(T),b)f=this.m_invMassA,_=this.m_invMassB,y=this.m_invIA,d=this.m_invIB,this.m_K.col1.x=f+_+y*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1+d*this.m_s2,this.m_K.col1.z=y*this.m_s1*this.m_a1+d*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=y+d,this.m_K.col2.z=y*this.m_a1+d*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=f+_+y*this.m_a1*this.m_a1+d*this.m_a2*this.m_a2,this.m_K.Solve33(V,-k,-T,-g);else{f=this.m_invMassA,_=this.m_invMassB,y=this.m_invIA,d=this.m_invIB;var L=f+_+y*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2,E=y*this.m_s1+d*this.m_s2,F=y+d;this.m_K.col1.Set(L,E,0),this.m_K.col2.Set(E,F,0);var R=this.m_K.Solve22(new s,-k,-T);V.x=R.x,V.y=R.y,V.z=0}var G=V.x*this.m_perp.x+V.z*this.m_axis.x,N=V.x*this.m_perp.y+V.z*this.m_axis.y,J=V.x*this.m_s1+V.y+V.z*this.m_a1,O=V.x*this.m_s2+V.y+V.z*this.m_a2;return c.x-=this.m_invMassA*G,c.y-=this.m_invMassA*N,h-=this.m_invIA*J,u.x+=this.m_invMassB*G,u.y+=this.m_invMassB*N,m+=this.m_invIB*O,a.m_sweep.a=h,l.m_sweep.a=m,a.SynchronizeTransform(),l.SynchronizeTransform(),x<=t.b2_linearSlop&&v<=t.b2_angularSlop},n.inherit(C,n.Dynamics.Joints.b2JointDef),C.prototype.__super=n.Dynamics.Joints.b2JointDef.prototype,C.b2PrismaticJointDef=function(){n.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s,this.localAxisA=new s},C.prototype.b2PrismaticJointDef=function(){this.__super.b2JointDef.call(this),this.type=f.e_prismaticJoint,this.localAxisA.Set(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},C.prototype.Initialize=function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.localAxisA=this.bodyA.GetLocalVector(n),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},n.inherit(w,n.Dynamics.Joints.b2Joint),w.prototype.__super=n.Dynamics.Joints.b2Joint.prototype,w.b2PulleyJoint=function(){n.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new s,this.m_groundAnchor2=new s,this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_u1=new s,this.m_u2=new s},w.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},w.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},w.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse*this.m_u2.x,t*this.m_impulse*this.m_u2.y)},w.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},w.prototype.GetGroundAnchorA=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor1),t},w.prototype.GetGroundAnchorB=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor2),t},w.prototype.GetLength1=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),e=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,i=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,n=t.x-e,o=t.y-i;return Math.sqrt(n*n+o*o)},w.prototype.GetLength2=function(){var t=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),e=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,i=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,n=t.x-e,o=t.y-i;return Math.sqrt(n*n+o*o)},w.prototype.GetRatio=function(){return this.m_ratio},w.prototype.b2PulleyJoint=function(t){this.__super.b2Joint.call(this,t);this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=t.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=t.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=t.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=t.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_ratio=t.ratio,this.m_constant=t.lengthA+this.m_ratio*t.lengthB,this.m_maxLength1=o.Min(t.maxLengthA,this.m_constant-this.m_ratio*w.b2_minPulleyLength),this.m_maxLength2=o.Min(t.maxLengthB,(this.m_constant-w.b2_minPulleyLength)/this.m_ratio),this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},w.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,o=this.m_bodyB;i=n.m_xf.R;var s=this.m_localAnchor1.x-n.m_sweep.localCenter.x,r=this.m_localAnchor1.y-n.m_sweep.localCenter.y,a=i.col1.x*s+i.col2.x*r;r=i.col1.y*s+i.col2.y*r,s=a,i=o.m_xf.R;var l=this.m_localAnchor2.x-o.m_sweep.localCenter.x,c=this.m_localAnchor2.y-o.m_sweep.localCenter.y;a=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=a;var h=n.m_sweep.c.x+s,u=n.m_sweep.c.y+r,m=o.m_sweep.c.x+l,p=o.m_sweep.c.y+c,_=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,y=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,d=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,x=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(h-_,u-y),this.m_u2.Set(m-d,p-x);var v=this.m_u1.Length(),b=this.m_u2.Length();v>t.b2_linearSlop?this.m_u1.Multiply(1/v):this.m_u1.SetZero(),b>t.b2_linearSlop?this.m_u2.Multiply(1/b):this.m_u2.SetZero(),this.m_constant-v-this.m_ratio*b>0?(this.m_state=f.e_inactiveLimit,this.m_impulse=0):this.m_state=f.e_atUpperLimit,v<this.m_maxLength1?(this.m_limitState1=f.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=f.e_atUpperLimit,b<this.m_maxLength2?(this.m_limitState2=f.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=f.e_atUpperLimit;var g=s*this.m_u1.y-r*this.m_u1.x,C=l*this.m_u2.y-c*this.m_u2.x;if(this.m_limitMass1=n.m_invMass+n.m_invI*g*g,this.m_limitMass2=o.m_invMass+o.m_invI*C*C,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass,e.warmStarting){this.m_impulse*=e.dtRatio,this.m_limitImpulse1*=e.dtRatio,this.m_limitImpulse2*=e.dtRatio;var w=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,S=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,A=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,D=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y;n.m_linearVelocity.x+=n.m_invMass*w,n.m_linearVelocity.y+=n.m_invMass*S,n.m_angularVelocity+=n.m_invI*(s*S-r*w),o.m_linearVelocity.x+=o.m_invMass*A,o.m_linearVelocity.y+=o.m_invMass*D,o.m_angularVelocity+=o.m_invI*(l*D-c*A)}else this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},w.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyA,n=this.m_bodyB;e=i.m_xf.R;var s=this.m_localAnchor1.x-i.m_sweep.localCenter.x,r=this.m_localAnchor1.y-i.m_sweep.localCenter.y,a=e.col1.x*s+e.col2.x*r;r=e.col1.y*s+e.col2.y*r,s=a,e=n.m_xf.R;var l=this.m_localAnchor2.x-n.m_sweep.localCenter.x,c=this.m_localAnchor2.y-n.m_sweep.localCenter.y;a=e.col1.x*l+e.col2.x*c,c=e.col1.y*l+e.col2.y*c,l=a;var h=0,u=0,m=0,p=0,_=0,y=0,d=0,x=0,v=0,b=0,g=0;this.m_state==f.e_atUpperLimit&&(h=i.m_linearVelocity.x+-i.m_angularVelocity*r,u=i.m_linearVelocity.y+i.m_angularVelocity*s,m=n.m_linearVelocity.x+-n.m_angularVelocity*c,p=n.m_linearVelocity.y+n.m_angularVelocity*l,v=-(this.m_u1.x*h+this.m_u1.y*u)-this.m_ratio*(this.m_u2.x*m+this.m_u2.y*p),b=this.m_pulleyMass*-v,g=this.m_impulse,this.m_impulse=o.Max(0,this.m_impulse+b),b=this.m_impulse-g,_=-b*this.m_u1.x,y=-b*this.m_u1.y,d=-this.m_ratio*b*this.m_u2.x,x=-this.m_ratio*b*this.m_u2.y,i.m_linearVelocity.x+=i.m_invMass*_,i.m_linearVelocity.y+=i.m_invMass*y,i.m_angularVelocity+=i.m_invI*(s*y-r*_),n.m_linearVelocity.x+=n.m_invMass*d,n.m_linearVelocity.y+=n.m_invMass*x,n.m_angularVelocity+=n.m_invI*(l*x-c*d)),this.m_limitState1==f.e_atUpperLimit&&(h=i.m_linearVelocity.x+-i.m_angularVelocity*r,u=i.m_linearVelocity.y+i.m_angularVelocity*s,v=-(this.m_u1.x*h+this.m_u1.y*u),b=-this.m_limitMass1*v,g=this.m_limitImpulse1,this.m_limitImpulse1=o.Max(0,this.m_limitImpulse1+b),b=this.m_limitImpulse1-g,_=-b*this.m_u1.x,y=-b*this.m_u1.y,i.m_linearVelocity.x+=i.m_invMass*_,i.m_linearVelocity.y+=i.m_invMass*y,i.m_angularVelocity+=i.m_invI*(s*y-r*_)),this.m_limitState2==f.e_atUpperLimit&&(m=n.m_linearVelocity.x+-n.m_angularVelocity*c,p=n.m_linearVelocity.y+n.m_angularVelocity*l,v=-(this.m_u2.x*m+this.m_u2.y*p),b=-this.m_limitMass2*v,g=this.m_limitImpulse2,this.m_limitImpulse2=o.Max(0,this.m_limitImpulse2+b),b=this.m_limitImpulse2-g,d=-b*this.m_u2.x,x=-b*this.m_u2.y,n.m_linearVelocity.x+=n.m_invMass*d,n.m_linearVelocity.y+=n.m_invMass*x,n.m_angularVelocity+=n.m_invI*(l*x-c*d))},w.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i,n=this.m_bodyA,s=this.m_bodyB,r=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,a=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,l=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,c=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,h=0,u=0,m=0,p=0,_=0,y=0,d=0,x=0,v=0,b=0,g=0,C=0,w=0,S=0;return this.m_state==f.e_atUpperLimit&&(i=n.m_xf.R,h=this.m_localAnchor1.x-n.m_sweep.localCenter.x,u=this.m_localAnchor1.y-n.m_sweep.localCenter.y,w=i.col1.x*h+i.col2.x*u,u=i.col1.y*h+i.col2.y*u,h=w,i=s.m_xf.R,m=this.m_localAnchor2.x-s.m_sweep.localCenter.x,p=this.m_localAnchor2.y-s.m_sweep.localCenter.y,w=i.col1.x*m+i.col2.x*p,p=i.col1.y*m+i.col2.y*p,m=w,_=n.m_sweep.c.x+h,y=n.m_sweep.c.y+u,d=s.m_sweep.c.x+m,x=s.m_sweep.c.y+p,this.m_u1.Set(_-r,y-a),this.m_u2.Set(d-l,x-c),v=this.m_u1.Length(),b=this.m_u2.Length(),v>t.b2_linearSlop?this.m_u1.Multiply(1/v):this.m_u1.SetZero(),b>t.b2_linearSlop?this.m_u2.Multiply(1/b):this.m_u2.SetZero(),g=this.m_constant-v-this.m_ratio*b,S=o.Max(S,-g),g=o.Clamp(g+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),C=-this.m_pulleyMass*g,_=-C*this.m_u1.x,y=-C*this.m_u1.y,d=-this.m_ratio*C*this.m_u2.x,x=-this.m_ratio*C*this.m_u2.y,n.m_sweep.c.x+=n.m_invMass*_,n.m_sweep.c.y+=n.m_invMass*y,n.m_sweep.a+=n.m_invI*(h*y-u*_),s.m_sweep.c.x+=s.m_invMass*d,s.m_sweep.c.y+=s.m_invMass*x,s.m_sweep.a+=s.m_invI*(m*x-p*d),n.SynchronizeTransform(),s.SynchronizeTransform()),this.m_limitState1==f.e_atUpperLimit&&(i=n.m_xf.R,h=this.m_localAnchor1.x-n.m_sweep.localCenter.x,u=this.m_localAnchor1.y-n.m_sweep.localCenter.y,w=i.col1.x*h+i.col2.x*u,u=i.col1.y*h+i.col2.y*u,h=w,_=n.m_sweep.c.x+h,y=n.m_sweep.c.y+u,this.m_u1.Set(_-r,y-a),v=this.m_u1.Length(),v>t.b2_linearSlop?(this.m_u1.x*=1/v,this.m_u1.y*=1/v):this.m_u1.SetZero(),g=this.m_maxLength1-v,S=o.Max(S,-g),g=o.Clamp(g+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),C=-this.m_limitMass1*g,_=-C*this.m_u1.x,y=-C*this.m_u1.y,n.m_sweep.c.x+=n.m_invMass*_,n.m_sweep.c.y+=n.m_invMass*y,n.m_sweep.a+=n.m_invI*(h*y-u*_),n.SynchronizeTransform()),this.m_limitState2==f.e_atUpperLimit&&(i=s.m_xf.R,m=this.m_localAnchor2.x-s.m_sweep.localCenter.x,p=this.m_localAnchor2.y-s.m_sweep.localCenter.y,w=i.col1.x*m+i.col2.x*p,p=i.col1.y*m+i.col2.y*p,m=w,d=s.m_sweep.c.x+m,x=s.m_sweep.c.y+p,this.m_u2.Set(d-l,x-c),b=this.m_u2.Length(),b>t.b2_linearSlop?(this.m_u2.x*=1/b,this.m_u2.y*=1/b):this.m_u2.SetZero(),g=this.m_maxLength2-b,S=o.Max(S,-g),g=o.Clamp(g+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),C=-this.m_limitMass2*g,d=-C*this.m_u2.x,x=-C*this.m_u2.y,s.m_sweep.c.x+=s.m_invMass*d,s.m_sweep.c.y+=s.m_invMass*x,s.m_sweep.a+=s.m_invI*(m*x-p*d),s.SynchronizeTransform()),S<t.b2_linearSlop},n.postDefs.push(function(){n.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2}),n.inherit(S,n.Dynamics.Joints.b2JointDef),S.prototype.__super=n.Dynamics.Joints.b2JointDef.prototype,S.b2PulleyJointDef=function(){n.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.groundAnchorA=new s,this.groundAnchorB=new s,this.localAnchorA=new s,this.localAnchorB=new s},S.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this),this.type=f.e_pulleyJoint,this.groundAnchorA.Set(-1,1),this.groundAnchorB.Set(1,1),this.localAnchorA.Set(-1,0),this.localAnchorB.Set(1,0),this.lengthA=0,this.maxLengthA=0,this.lengthB=0,this.maxLengthB=0,this.ratio=1,this.collideConnected=!0},S.prototype.Initialize=function(t,e,i,n,o,s,r){void 0===r&&(r=0),this.bodyA=t,this.bodyB=e,this.groundAnchorA.SetV(i),this.groundAnchorB.SetV(n),this.localAnchorA=this.bodyA.GetLocalPoint(o),this.localAnchorB=this.bodyB.GetLocalPoint(s);var a=o.x-i.x,l=o.y-i.y;this.lengthA=Math.sqrt(a*a+l*l);var c=s.x-n.x,h=s.y-n.y;this.lengthB=Math.sqrt(c*c+h*h),this.ratio=r;var u=this.lengthA+this.ratio*this.lengthB;this.maxLengthA=u-this.ratio*w.b2_minPulleyLength,this.maxLengthB=(u-w.b2_minPulleyLength)/this.ratio},n.inherit(A,n.Dynamics.Joints.b2Joint),A.prototype.__super=n.Dynamics.Joints.b2Joint.prototype,A.b2RevoluteJoint=function(){n.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.K3=new e,this.impulse3=new r,this.impulse2=new s,this.reduced=new s,this.m_localAnchor1=new s,this.m_localAnchor2=new s,this.m_impulse=new r,this.m_mass=new i},A.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},A.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},A.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse.x,t*this.m_impulse.y)},A.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},A.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},A.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},A.prototype.IsLimitEnabled=function(){return this.m_enableLimit};A.prototype.EnableLimit=function(t){this.m_enableLimit=t},A.prototype.GetLowerLimit=function(){return this.m_lowerAngle},A.prototype.GetUpperLimit=function(){return this.m_upperAngle},A.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_lowerAngle=t,this.m_upperAngle=e},A.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},A.prototype.EnableMotor=function(t){this.m_enableMotor=t},A.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},A.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},A.prototype.SetMaxMotorTorque=function(t){void 0===t&&(t=0),this.m_maxMotorTorque=t},A.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},A.prototype.b2RevoluteJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=f.e_inactiveLimit},A.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,s=this.m_bodyB,r=0;this.m_enableMotor||this.m_enableLimit,i=n.m_xf.R;var a=this.m_localAnchor1.x-n.m_sweep.localCenter.x,l=this.m_localAnchor1.y-n.m_sweep.localCenter.y;r=i.col1.x*a+i.col2.x*l,l=i.col1.y*a+i.col2.y*l,a=r,i=s.m_xf.R;var c=this.m_localAnchor2.x-s.m_sweep.localCenter.x,h=this.m_localAnchor2.y-s.m_sweep.localCenter.y;r=i.col1.x*c+i.col2.x*h,h=i.col1.y*c+i.col2.y*h,c=r;var u=n.m_invMass,m=s.m_invMass,p=n.m_invI,_=s.m_invI;if(this.m_mass.col1.x=u+m+l*l*p+h*h*_,this.m_mass.col2.x=-l*a*p-h*c*_,this.m_mass.col3.x=-l*p-h*_,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=u+m+a*a*p+c*c*_,this.m_mass.col3.y=a*p+c*_,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=p+_,this.m_motorMass=1/(p+_),0==this.m_enableMotor&&(this.m_motorImpulse=0),this.m_enableLimit){var y=s.m_sweep.a-n.m_sweep.a-this.m_referenceAngle;o.Abs(this.m_upperAngle-this.m_lowerAngle)<2*t.b2_angularSlop?this.m_limitState=f.e_equalLimits:y<=this.m_lowerAngle?(this.m_limitState!=f.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=f.e_atLowerLimit):y>=this.m_upperAngle?(this.m_limitState!=f.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=f.e_atUpperLimit):(this.m_limitState=f.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=f.e_inactiveLimit;if(e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var d=this.m_impulse.x,x=this.m_impulse.y;n.m_linearVelocity.x-=u*d,n.m_linearVelocity.y-=u*x,n.m_angularVelocity-=p*(a*x-l*d+this.m_motorImpulse+this.m_impulse.z),s.m_linearVelocity.x+=m*d,s.m_linearVelocity.y+=m*x,s.m_angularVelocity+=_*(c*x-h*d+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0},A.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyA,n=this.m_bodyB,s=0,r=0,a=0,l=0,c=0,h=i.m_linearVelocity,u=i.m_angularVelocity,m=n.m_linearVelocity,p=n.m_angularVelocity,_=i.m_invMass,y=n.m_invMass,d=i.m_invI,x=n.m_invI;if(this.m_enableMotor&&this.m_limitState!=f.e_equalLimits){var v=p-u-this.m_motorSpeed,b=this.m_motorMass*-v,g=this.m_motorImpulse,C=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=o.Clamp(this.m_motorImpulse+b,-C,C),b=this.m_motorImpulse-g,u-=d*b,p+=x*b}if(this.m_enableLimit&&this.m_limitState!=f.e_inactiveLimit){e=i.m_xf.R,r=this.m_localAnchor1.x-i.m_sweep.localCenter.x,a=this.m_localAnchor1.y-i.m_sweep.localCenter.y,s=e.col1.x*r+e.col2.x*a,a=e.col1.y*r+e.col2.y*a,r=s,e=n.m_xf.R,l=this.m_localAnchor2.x-n.m_sweep.localCenter.x,c=this.m_localAnchor2.y-n.m_sweep.localCenter.y,s=e.col1.x*l+e.col2.x*c,c=e.col1.y*l+e.col2.y*c,l=s;var w=m.x+-p*c-h.x- -u*a,S=m.y+p*l-h.y-u*r,A=p-u;this.m_mass.Solve33(this.impulse3,-w,-S,-A),this.m_limitState==f.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState==f.e_atLowerLimit?this.m_impulse.z+this.impulse3.z<0&&(this.m_mass.Solve22(this.reduced,-w,-S),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0):this.m_limitState==f.e_atUpperLimit&&this.m_impulse.z+this.impulse3.z>0&&(this.m_mass.Solve22(this.reduced,-w,-S),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0),h.x-=_*this.impulse3.x,h.y-=_*this.impulse3.y,u-=d*(r*this.impulse3.y-a*this.impulse3.x+this.impulse3.z),m.x+=y*this.impulse3.x,m.y+=y*this.impulse3.y,p+=x*(l*this.impulse3.y-c*this.impulse3.x+this.impulse3.z)}else{e=i.m_xf.R,r=this.m_localAnchor1.x-i.m_sweep.localCenter.x,a=this.m_localAnchor1.y-i.m_sweep.localCenter.y,s=e.col1.x*r+e.col2.x*a,a=e.col1.y*r+e.col2.y*a,r=s,e=n.m_xf.R,l=this.m_localAnchor2.x-n.m_sweep.localCenter.x,c=this.m_localAnchor2.y-n.m_sweep.localCenter.y,s=e.col1.x*l+e.col2.x*c,c=e.col1.y*l+e.col2.y*c,l=s;var D=m.x+-p*c-h.x- -u*a,B=m.y+p*l-h.y-u*r;this.m_mass.Solve22(this.impulse2,-D,-B),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,h.x-=_*this.impulse2.x,h.y-=_*this.impulse2.y,u-=d*(r*this.impulse2.y-a*this.impulse2.x),m.x+=y*this.impulse2.x,m.y+=y*this.impulse2.y,p+=x*(l*this.impulse2.y-c*this.impulse2.x)}i.m_linearVelocity.SetV(h),i.m_angularVelocity=u,n.m_linearVelocity.SetV(m),n.m_angularVelocity=p},A.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i,n=0,s=this.m_bodyA,r=this.m_bodyB,a=0,l=0,c=0,h=0,u=0;if(this.m_enableLimit&&this.m_limitState!=f.e_inactiveLimit){var m=r.m_sweep.a-s.m_sweep.a-this.m_referenceAngle,p=0;this.m_limitState==f.e_equalLimits?(n=o.Clamp(m-this.m_lowerAngle,-t.b2_maxAngularCorrection,t.b2_maxAngularCorrection),p=-this.m_motorMass*n,a=o.Abs(n)):this.m_limitState==f.e_atLowerLimit?(n=m-this.m_lowerAngle,a=-n,n=o.Clamp(n+t.b2_angularSlop,-t.b2_maxAngularCorrection,0),p=-this.m_motorMass*n):this.m_limitState==f.e_atUpperLimit&&(n=m-this.m_upperAngle,a=n,n=o.Clamp(n-t.b2_angularSlop,0,t.b2_maxAngularCorrection),p=-this.m_motorMass*n),s.m_sweep.a-=s.m_invI*p,r.m_sweep.a+=r.m_invI*p,s.SynchronizeTransform(),r.SynchronizeTransform()}i=s.m_xf.R;var _=this.m_localAnchor1.x-s.m_sweep.localCenter.x,y=this.m_localAnchor1.y-s.m_sweep.localCenter.y;c=i.col1.x*_+i.col2.x*y,y=i.col1.y*_+i.col2.y*y,_=c,i=r.m_xf.R;var d=this.m_localAnchor2.x-r.m_sweep.localCenter.x,x=this.m_localAnchor2.y-r.m_sweep.localCenter.y;c=i.col1.x*d+i.col2.x*x,x=i.col1.y*d+i.col2.y*x,d=c;var v=r.m_sweep.c.x+d-s.m_sweep.c.x-_,b=r.m_sweep.c.y+x-s.m_sweep.c.y-y,g=v*v+b*b,C=Math.sqrt(g);l=C;var w=s.m_invMass,S=r.m_invMass,D=s.m_invI,B=r.m_invI,M=10*t.b2_linearSlop;if(g>M*M){var I=w+S,P=1/I;h=P*-v,u=P*-b;s.m_sweep.c.x-=.5*w*h,s.m_sweep.c.y-=.5*w*u,r.m_sweep.c.x+=.5*S*h,r.m_sweep.c.y+=.5*S*u,v=r.m_sweep.c.x+d-s.m_sweep.c.x-_,b=r.m_sweep.c.y+x-s.m_sweep.c.y-y}return this.K1.col1.x=w+S,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=w+S,this.K2.col1.x=D*y*y,this.K2.col2.x=-D*_*y,this.K2.col1.y=-D*_*y,this.K2.col2.y=D*_*_,this.K3.col1.x=B*x*x,this.K3.col2.x=-B*d*x,this.K3.col1.y=-B*d*x,this.K3.col2.y=B*d*d,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(A.tImpulse,-v,-b),h=A.tImpulse.x,u=A.tImpulse.y,s.m_sweep.c.x-=s.m_invMass*h,s.m_sweep.c.y-=s.m_invMass*u,s.m_sweep.a-=s.m_invI*(_*u-y*h),r.m_sweep.c.x+=r.m_invMass*h,r.m_sweep.c.y+=r.m_invMass*u,r.m_sweep.a+=r.m_invI*(d*u-x*h),s.SynchronizeTransform(),r.SynchronizeTransform(),l<=t.b2_linearSlop&&a<=t.b2_angularSlop},n.postDefs.push(function(){n.Dynamics.Joints.b2RevoluteJoint.tImpulse=new s}),n.inherit(D,n.Dynamics.Joints.b2JointDef),D.prototype.__super=n.Dynamics.Joints.b2JointDef.prototype,D.b2RevoluteJointDef=function(){n.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s},D.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this),this.type=f.e_revoluteJoint,this.localAnchorA.Set(0,0),this.localAnchorB.Set(0,0),this.referenceAngle=0,this.lowerAngle=0,this.upperAngle=0,this.maxMotorTorque=0,this.motorSpeed=0,this.enableLimit=!1,this.enableMotor=!1},D.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},n.inherit(B,n.Dynamics.Joints.b2Joint),B.prototype.__super=n.Dynamics.Joints.b2Joint.prototype,B.b2WeldJoint=function(){n.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new s,this.m_localAnchorB=new s,this.m_impulse=new r,this.m_mass=new i},B.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},B.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},B.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new s(t*this.m_impulse.x,t*this.m_impulse.y)},B.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},B.prototype.b2WeldJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_mass=new i},B.prototype.InitVelocityConstraints=function(t){var e,i=0,n=this.m_bodyA,o=this.m_bodyB;e=n.m_xf.R;var s=this.m_localAnchorA.x-n.m_sweep.localCenter.x,r=this.m_localAnchorA.y-n.m_sweep.localCenter.y;i=e.col1.x*s+e.col2.x*r,r=e.col1.y*s+e.col2.y*r,s=i,e=o.m_xf.R;var a=this.m_localAnchorB.x-o.m_sweep.localCenter.x,l=this.m_localAnchorB.y-o.m_sweep.localCenter.y;i=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=i;var c=n.m_invMass,h=o.m_invMass,u=n.m_invI,m=o.m_invI;this.m_mass.col1.x=c+h+r*r*u+l*l*m,this.m_mass.col2.x=-r*s*u-l*a*m,this.m_mass.col3.x=-r*u-l*m,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=c+h+s*s*u+a*a*m,this.m_mass.col3.y=s*u+a*m,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=u+m,t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_impulse.z*=t.dtRatio,n.m_linearVelocity.x-=c*this.m_impulse.x,n.m_linearVelocity.y-=c*this.m_impulse.y,n.m_angularVelocity-=u*(s*this.m_impulse.y-r*this.m_impulse.x+this.m_impulse.z),o.m_linearVelocity.x+=h*this.m_impulse.x,o.m_linearVelocity.y+=h*this.m_impulse.y,o.m_angularVelocity+=m*(a*this.m_impulse.y-l*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},B.prototype.SolveVelocityConstraints=function(t){var e,i=0,n=this.m_bodyA,o=this.m_bodyB,s=n.m_linearVelocity,a=n.m_angularVelocity,l=o.m_linearVelocity,c=o.m_angularVelocity,h=n.m_invMass,u=o.m_invMass,m=n.m_invI,p=o.m_invI;e=n.m_xf.R;var f=this.m_localAnchorA.x-n.m_sweep.localCenter.x,_=this.m_localAnchorA.y-n.m_sweep.localCenter.y;i=e.col1.x*f+e.col2.x*_,_=e.col1.y*f+e.col2.y*_,f=i,e=o.m_xf.R;var y=this.m_localAnchorB.x-o.m_sweep.localCenter.x,d=this.m_localAnchorB.y-o.m_sweep.localCenter.y;i=e.col1.x*y+e.col2.x*d,d=e.col1.y*y+e.col2.y*d,y=i;var x=l.x-c*d-s.x+a*_,v=l.y+c*y-s.y-a*f,b=c-a,g=new r;this.m_mass.Solve33(g,-x,-v,-b),this.m_impulse.Add(g),s.x-=h*g.x,s.y-=h*g.y,a-=m*(f*g.y-_*g.x+g.z),l.x+=u*g.x,l.y+=u*g.y,c+=p*(y*g.y-d*g.x+g.z),n.m_angularVelocity=a,o.m_angularVelocity=c},B.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i,n=0,s=this.m_bodyA,a=this.m_bodyB;i=s.m_xf.R;var l=this.m_localAnchorA.x-s.m_sweep.localCenter.x,c=this.m_localAnchorA.y-s.m_sweep.localCenter.y;n=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=n,i=a.m_xf.R;var h=this.m_localAnchorB.x-a.m_sweep.localCenter.x,u=this.m_localAnchorB.y-a.m_sweep.localCenter.y;n=i.col1.x*h+i.col2.x*u,u=i.col1.y*h+i.col2.y*u,h=n;var m=s.m_invMass,p=a.m_invMass,f=s.m_invI,_=a.m_invI,y=a.m_sweep.c.x+h-s.m_sweep.c.x-l,d=a.m_sweep.c.y+u-s.m_sweep.c.y-c,x=a.m_sweep.a-s.m_sweep.a-this.m_referenceAngle,v=10*t.b2_linearSlop,b=Math.sqrt(y*y+d*d),g=o.Abs(x);b>v&&(f*=1,_*=1),this.m_mass.col1.x=m+p+c*c*f+u*u*_,this.m_mass.col2.x=-c*l*f-u*h*_,this.m_mass.col3.x=-c*f-u*_,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=m+p+l*l*f+h*h*_,this.m_mass.col3.y=l*f+h*_,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=f+_;var C=new r;return this.m_mass.Solve33(C,-y,-d,-x),s.m_sweep.c.x-=m*C.x,s.m_sweep.c.y-=m*C.y,s.m_sweep.a-=f*(l*C.y-c*C.x+C.z),a.m_sweep.c.x+=p*C.x,a.m_sweep.c.y+=p*C.y,a.m_sweep.a+=_*(h*C.y-u*C.x+C.z),s.SynchronizeTransform(),a.SynchronizeTransform(),b<=t.b2_linearSlop&&g<=t.b2_angularSlop},n.inherit(M,n.Dynamics.Joints.b2JointDef),M.prototype.__super=n.Dynamics.Joints.b2JointDef.prototype,M.b2WeldJointDef=function(){n.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new s,this.localAnchorB=new s},M.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this),this.type=f.e_weldJoint,this.referenceAngle=0},M.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}(),function(){var t=n.Dynamics.b2DebugDraw;t.b2DebugDraw=function(){this.m_drawScale=1,this.m_lineThickness=1,this.m_alpha=1,this.m_fillAlpha=1,this.m_xformScale=1;var t=this;this.m_sprite={graphics:{clear:function(){t.m_ctx.clearRect(0,0,t.m_ctx.canvas.width,t.m_ctx.canvas.height)}}}},t.prototype._color=function(t,e){return"rgba("+((16711680&t)>>16)+","+((65280&t)>>8)+","+(255&t)+","+e+")"},t.prototype.b2DebugDraw=function(){this.m_drawFlags=0},t.prototype.SetFlags=function(t){void 0===t&&(t=0),this.m_drawFlags=t},t.prototype.GetFlags=function(){return this.m_drawFlags},t.prototype.AppendFlags=function(t){void 0===t&&(t=0),this.m_drawFlags|=t},t.prototype.ClearFlags=function(t){void 0===t&&(t=0),this.m_drawFlags&=~t},t.prototype.SetSprite=function(t){this.m_ctx=t},t.prototype.GetSprite=function(){return this.m_ctx},t.prototype.SetDrawScale=function(t){void 0===t&&(t=0),this.m_drawScale=t},t.prototype.GetDrawScale=function(){return this.m_drawScale},t.prototype.SetLineThickness=function(t){void 0===t&&(t=0),this.m_lineThickness=t,this.m_ctx.strokeWidth=t},t.prototype.GetLineThickness=function(){return this.m_lineThickness},t.prototype.SetAlpha=function(t){void 0===t&&(t=0),this.m_alpha=t},t.prototype.GetAlpha=function(){return this.m_alpha},t.prototype.SetFillAlpha=function(t){void 0===t&&(t=0),this.m_fillAlpha=t},t.prototype.GetFillAlpha=function(){return this.m_fillAlpha},t.prototype.SetXFormScale=function(t){void 0===t&&(t=0),this.m_xformScale=t},t.prototype.GetXFormScale=function(){return this.m_xformScale},t.prototype.DrawPolygon=function(t,e,i){if(e){var n=this.m_ctx,o=this.m_drawScale;n.beginPath(),n.strokeStyle=this._color(i.color,this.m_alpha),n.moveTo(t[0].x*o,t[0].y*o);for(var s=1;s<e;s++)n.lineTo(t[s].x*o,t[s].y*o);n.lineTo(t[0].x*o,t[0].y*o),n.closePath(),n.stroke()}},t.prototype.DrawSolidPolygon=function(t,e,i){if(e){var n=this.m_ctx,o=this.m_drawScale;n.beginPath(),n.strokeStyle=this._color(i.color,this.m_alpha),n.fillStyle=this._color(i.color,this.m_fillAlpha),n.moveTo(t[0].x*o,t[0].y*o);for(var s=1;s<e;s++)n.lineTo(t[s].x*o,t[s].y*o);n.lineTo(t[0].x*o,t[0].y*o),n.closePath(),n.fill(),n.stroke()}},t.prototype.DrawCircle=function(t,e,i){if(e){var n=this.m_ctx,o=this.m_drawScale;n.beginPath(),n.strokeStyle=this._color(i.color,this.m_alpha),n.arc(t.x*o,t.y*o,e*o,0,2*Math.PI,!0),n.closePath(),n.stroke()}},t.prototype.DrawSolidCircle=function(t,e,i,n){if(e){var o=this.m_ctx,s=this.m_drawScale,r=t.x*s,a=t.y*s;o.moveTo(0,0),o.beginPath(),o.strokeStyle=this._color(n.color,this.m_alpha),o.fillStyle=this._color(n.color,this.m_fillAlpha),o.arc(r,a,e*s,0,2*Math.PI,!0),o.moveTo(r,a),o.lineTo((t.x+i.x*e)*s,(t.y+i.y*e)*s),o.closePath(),o.fill(),o.stroke()}},t.prototype.DrawSegment=function(t,e,i){var n=this.m_ctx,o=this.m_drawScale;n.strokeStyle=this._color(i.color,this.m_alpha),n.beginPath(),n.moveTo(t.x*o,t.y*o),n.lineTo(e.x*o,e.y*o),n.closePath(),n.stroke()},t.prototype.DrawTransform=function(t){var e=this.m_ctx,i=this.m_drawScale;e.beginPath(),e.strokeStyle=this._color(16711680,this.m_alpha),e.moveTo(t.position.x*i,t.position.y*i),e.lineTo((t.position.x+this.m_xformScale*t.R.col1.x)*i,(t.position.y+this.m_xformScale*t.R.col1.y)*i),e.strokeStyle=this._color(65280,this.m_alpha),e.moveTo(t.position.x*i,t.position.y*i),e.lineTo((t.position.x+this.m_xformScale*t.R.col2.x)*i,(t.position.y+this.m_xformScale*t.R.col2.y)*i),e.closePath(),e.stroke()}}();var r;for(r=0;r<n.postDefs.length;++r)n.postDefs[r]();t.exports=n},function(t,e,i){i(12),Crafty.c("PlayerParticles",{init:function(){this.requires("BattleParticles")},playerParticles:function(){return this}})},,,,,function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var i,n;i=_.reduce(e,function(t,e,i){return t+e},0),t.hp=t.hp-i,n=new Function("entity","let new_health, old_health;old_health = entity.getHP();new_health = old_health - "+i+";entity.setHP(new_health);"),t.getEffectQueue().push(n)}function s(t,e){var i;i=t.body.GetWorldCenter(),t.body.ApplyForce(e,i)}function r(t,e){var i={};if(t.charSheet)return _.each(t.charSheet.data.properties,function(t,n){var o=void 0;o=e[n]-t,i[n]=o<0?0:o}),i}function a(t,e){return Crafty.e("2D, DOM, Collision, TextFragment, TextFragmentAttackDisplay, DefendableAttack, Box2D, TriggerableEffectOnCollide, BattleProjectile, BattlePhysicsProjectile").attr({x:e.source._x,y:e.source._y-20,z:e.source._z+1,h:20,w:20}).textFragment(t).textFragmentAttackDisplay().defendableAttack({source:e.source,target:e.target,effects:e.effects}).collision().battleProjectile().box2d(e.box2d).triggerableEffectOnCollide({source:e.source,target:e.target,effects:e.effects,targetComponent:"BattlePlayer"})}function l(t){var e,i,n;for(t.minLength&&t.maxLength?i=t.minLength==t.maxLength?t.minLength:_.random(t.minLength,t.maxLength):t.minLength?i=_.random(t.minLength,100):t.maxLength&&(i=_.random(1,t.maxLength)),n="",e=0;e<i;e++)n+=_.sample(d);return n}function c(t,e){return p.default.retrieve(t.getVocabulary(),e)}function h(t){return"self"==t.target&&(t.target=t.source),t}function u(t){t.has("BattleParticles")&&t.triggerParticles()}function m(t,e){if(!e)throw new Error(t+" being executed without a target")}Object.defineProperty(e,"__esModule",{value:!0});var p=i(6);i.d(e,"Damage",function(){return x}),i.d(e,"PlaySound",function(){return v}),i.d(e,"ScreenShake",function(){return g}),i.d(e,"SetCooldown",function(){return b}),i.d(e,"SpawnTextProjectile",function(){return S}),i.d(e,"SpawnScatterTextProjectilePhysics",function(){return C}),i.d(e,"SpawnTextProjectilePhysics",function(){return w}),i.d(e,"TriggerAnimation",function(){return A});var f=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),y=i(18);i(7),i(41),i(40),i(39),i(14),i(42),i(38),i(43),i(19);var d=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],x=function(){function t(){n(this,t)}return f(t,null,[{key:"execute",value:function(t){var e;if(m("EffectDamage",t.target),!t.target.has("BattleCharacter"))throw new Error("EffectDamage being executed without a valid target");t=h(t),e=r(t.target,t.properties),o(t.target,e),u(t.target)}}]),t}(),v=function(){function t(){n(this,t)}return f(t,null,[{key:"execute",value:function(t){t.soundId&&(t.delay||Crafty.trigger("PlaySound",t.soundId))}}]),t}(),b=function(){function t(){n(this,t)}return f(t,null,[{key:"execute",value:function(t){var e;m("EffectSetCooldown",t.target),t=h(t),e=_.merge({},t),setTimeout(function(){e.skill.prepare()},t.cooldownLength)}}]),t}(),g=function(){function t(){n(this,t)}return f(t,null,[{key:"execute",value:function(t){window.camera.shake(t)}}]),t}(),C=function(){function t(){n(this,t)}return f(t,null,[{key:"execute",value:function(t){var e,i,n;if(!t.count)throw new Error("Error, attempting to SpawnScatterTextProjectilePhysics without a count");for(m("SpawnScatterTextProjectilePhysics",t.target),e=0;e<t.count;e++)n=t.textOptions.randomString?l(t.textOptions):c(t.source,t.textOptions),i=a(n,t),s(i,this.getRandomForceVectorToHit())}},{key:"getRandomForceVectorToHit",value:function(){var t,e;return t=_.random(-9300,-15e3),e=_.random(-12e3,-26e3),new y.Common.Math.b2Vec2(t,e)}}]),t}(),w=function(){function t(){n(this,t)}return f(t,null,[{key:"execute",value:function(t){var e,i;return m("EffectSpawnTextProjectilePhysics",t.target),e=c(t.source,t.textOptions),i=a(e,t),s(i,this.getRandomForceVectorToHit()),i}},{key:"getRandomForceVectorToHit",value:function(){var t,e;return t=_.random(-9300,-15e3),e=_.random(-12e3,-26e3),new y.Common.Math.b2Vec2(t,e)}}]),t}(),S=function(){function t(){n(this,t)}return f(t,null,[{key:"execute",value:function(t){var e;return m("EffectSpawnTextProjectile",t.target),e=c(t.source,t.textOptions),Crafty.e("2D, DOM, Collision, TextFragment, TextFragmentAttackDisplay, DefendableAttack, BattleProjectile, BattleNPCProjectile, TriggerableEffectOnCollide").attr({x:t.source._x,y:t.source._y-20,z:t.source._z+1,h:10,w:10}).textFragment(e).textFragmentAttackDisplay().defendableAttack().collision().battleProjectile().battleNPCProjectile(t.positionFunction,t.speed).triggerableEffectOnCollide({source:t.source,target:t.target,effects:t.effects,targetComponent:"BattlePlayer"})}}]),t}(),A=function(){function t(){n(this,t)}return f(t,null,[{key:"execute",value:function(t){if(m("EffectTriggerAnimation",t.target),t=h(t),!t.target.has("SpriteAnimation"))throw new Error("EffectTriggerAnimation being executed without a valid target");t.target.playAnim(t.animation)}}]),t}()},,,,,,,,,,,,,,function(t,e){Crafty.c("BattlePhysicsProjectile",{_deadCount:null,init:function(){this._deadCount=0},battlePhysicsProjectile:function(){return this},getDeadCounter:function(){return this._deadCount},setDeadCounter:function(t){this._deadCount=t}})},function(t,e){Crafty.c("BattleProjectile",{init:function(){this.requires("2D, Collision")},battleProjectile:function(){return this.onHit("BattleStageBoundary",this._handleBattleBoundaryHit.bind(this)),this},_handleBattleBoundaryHit:function(t){this.addComponent("BattleProjectileOutOfBounds")}})},function(t,e){Crafty.c("DefendableAttack",{init:function(){},defendableAttack:function(t){return this},acceptInput:function(t){return this.takeInput(t)},cancel:function(){this._textFragFsm.cancel()}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i.n(n);i(7),i(14);var s=i(1),r=o.a.View.extend({tagName:"div",className:"text-fragment-attack",_templateId:"#text_fragment_attack_template",initialize:function(t){if(this._entity=t.entity,!this._entity)throw new Error("Attempting to initialize TextFragmentAttackDisplayView without an entity");this._template=s.compile($(this._templateId).html())},render:function(){var t,e;e=this._prepareTemplateOptions(),0===$(this.id).length?(this.id=this._generateId(this._entity),this.$el.html(this._template(e)),t=this._entity.getDomId(),$("#"+t).append(this.$el)):this.$el.html(this._template(e))},_generateId:function(t){return"text_fragment_"+t.getId()},_prepareTemplateOptions:function(){var t=this._entity;return{typed:t.getCorrectCharacters(),missed:t.getIncorrectCharacters(),rest:t.getRemainingCharacters(),activeClass:t.isActive()?"active":"inactive"}}});Crafty.c("TextFragmentAttackDisplay",{_view:null,init:function(){this.requires("2D, DOM, Collision, TextFragment")},textFragmentAttackDisplay:function(t){return this._initView(),this._bindRerenderOnRedraw(),this.render(),this},cleanupView:function(){this._view.undelegateEvents(),this._view.remove()},render:function(){this._view.render()},_bindRerenderOnRedraw:function(){this.bind("TextFragmentRedraw",this.render.bind(this))},_initView:function(){this._view=new r({entity:this})}})},function(t,e){Crafty.c("TriggerableEffectOnCollide",{init:function(){this.requires("2D, Collision")},triggerableEffectOnCollide:function(t){return this._source=t.source,this._target=t.target,this._effects=t.effects,this._targetComponent=t.targetComponent,this.onHit(this._targetComponent,this._handleTargetHit.bind(this)),this},getEffects:function(){return this._effects},getSource:function(){return this._source},getTarget:function(){return this._target},getTargetComponent:function(){return this._targetComponent},_handleTargetHit:function(t){console.log("DEBUG: the player was hit by a projectile.!!!!!!"),this.addComponent("TriggerableEffectOnCollideHit")}})},function(t,e,i){var n=i(18),o=n.Common.Math.b2Vec2,s=n.Dynamics.b2BodyDef,r=n.Dynamics.b2Body,a=n.Dynamics.b2FixtureDef,l=(n.Dynamics.b2Fixture,n.Dynamics.b2World),c=(n.Collision.Shapes.b2MassData,n.Collision.Shapes.b2PolygonShape),h=n.Collision.Shapes.b2CircleShape,u=n.Dynamics.b2DebugDraw,m=(n.Dynamics.Joints.b2MouseJointDef,n.Dynamics.Joints.b2PrismaticJointDef,n.Dynamics.b2ContactListener),p=n.Dynamics.b2FilterData;Crafty.c("Box2D",{body:null,fixtures:null,init:function(){this.requires("2D"),Crafty.box2D.world||Crafty.box2D.init(0,10,55,!0)},box2d:function(t){var e,i=Crafty.box2D.world,n=Crafty.box2D.PTM_RATIO;if(this.fixtures=[],t.bodyDef)var e=t.bodyDef;else{var e=new s;"dynamic"===t.bodyType?e.type=r.b2_dynamicBody:"static"===t.bodyType?e.type=r.b2_staticBody:e.type=r.b2_kinematicBody,e.position.Set(this._x/n,this._y/n)}return e.userData=this,this.body=i.CreateBody(e),this.addFixture(t),this.bind("Remove",this.box2dRemoved),this.bind("RemoveComponent",this.box2dRemoved),this},box2dRemoved:function(t){void 0!==t&&"Box2D"!==t||Crafty.box2D.world.DestroyBody(this.body)},addFixture:function(t){var e={};return t.fixDef?(e=t.fixDef,e.shape=this._addShapeToFixture(e.shape)):(e=new a,e.density=isNaN(t.density)?1:t.density,e.friction=isNaN(t.friction)?.5:t.friction,e.restitution=isNaN(t.restitution)?.2:t.restitution,e.isSensor=Boolean(t.isSensor),e.filter=this._addFilterToFixture(t),e.shape=this._addShapeToFixture(t.shape)),Object.keys(e).length&&this.fixtures.push(this.body.CreateFixture(e)),this},_addFilterToFixture:function(t){var e=new p;return e.categoryBits=isNaN(t.categoryBits)?1:t.categoryBits,e.maskBits=isNaN(t.maskBits)?65535:t.maskBits,e.groupIndex=isNaN(t.groupIndex)?0:t.groupIndex,e},_addShapeToFixture:function(t){var e,i=Crafty.box2D.PTM_RATIO;if("string"==typeof t&&"circle"===t)e=new h(this._w/i/2),e.SetLocalPosition(new o(this._w/i/2,this._h/i/2));else if("[object Array]"===Object.prototype.toString.call(t)){e=new c;for(var n=t.length,s=[],r=0;r<n;r++){var a=t[r];s.push(new o(a[0]/i,a[1]/i))}e.SetAsArray(s,n)}else e=new c,e.SetAsOrientedBox(this.w/2/i,this.h/2/i,new o(this.w/2/i,this.h/2/i));return e||null},contact:function(t){if(0===Crafty.box2D.contacts.length)return!1;for(var e=Crafty(t),i=[],n=0;n<Crafty.box2D.contacts.length;n++)for(var o=Crafty.box2D.contacts[n],s=0;s<e.length;s++){var r=e.get(s);if(!r.__c.Box2D)return!1;for(var a=0;a<this.fixtures.length;a++)for(var l=0;l<this.fixtures.length;l++)(o.fixtureA===this.fixtures[a]&&o.fixtureB===r.fixtures[l]||o.fixtureA===r.fixtures[l]&&o.fixtureB===this.fixtures[a])&&i.push({obj:r,contact:o})}return!!i.length&&i},onContact:function(t,e){return this.bind("EnterFrame",function(){var i=this.contact(t);i&&e.call(this,i)}),this}}),Crafty.extend({box2D:{ShowBox2DDebug:!1,contacts:null,world:null,PTM_RATIO:null,init:function(t,e,i,n){var s=new l(new o(t,e),n),r=i,a=[],c=new m;c.BeginContact=function(t){var e={fixtureA:t.GetFixtureA(),fixtureB:t.GetFixtureB()};for(t in a)if(a[t].fixtureA==e.fixtureA&&a[t].fixtureB==e.fixtureB)return;a.push(e)},c.EndContact=function(t){var e={fixtureA:t.GetFixtureA(),fixtureB:t.GetFixtureB()};for(t in a)if(a[t].fixtureA==e.fixtureA&&a[t].fixtureB==e.fixtureB)return void a.splice(t,1)},s.SetContactListener(c),Crafty.bind("EnterFrame",function(t){s.Step(t.dt/1e3,8,3);for(var e=s.GetBodyList();e;e=e.GetNext())if(e.GetUserData()){var i=e.GetUserData();0!==e.GetType()?(i.attr({x:e.GetPosition().x*r,y:e.GetPosition().y*r}),i.rotation=Crafty.math.radToDeg(e.GetAngle())):e.SetPosition({x:i.x/r,y:i.y/r})}Crafty.box2D.ShowBox2DDebug&&s.DrawDebugData(),s.ClearForces()}),Crafty.box2D.world=s,Crafty.box2D.PTM_RATIO=r,Crafty.box2D.contacts=a},showDebugInfo:function(){var t=Crafty.box2D.world,e=Crafty.box2D.PTM_RATIO;if(Crafty.support.canvas){var i=document.createElement("canvas");i.id="Box2DCanvasDebug",i.width=Crafty.viewport.width,i.height=Crafty.viewport.height,i.style.position="absolute",i.style.left="0px",i.style.top="0px",Crafty.stage.elem.appendChild(i);var n=new u;n.SetSprite(i.getContext("2d")),n.SetDrawScale(e),n.SetFillAlpha(.7),n.SetLineThickness(1),n.SetFlags(u.e_shapeBit|u.e_jointBit),t.SetDebugDraw(n),Crafty.box2D.ShowBox2DDebug=!0}else Crafty.box2D.ShowBox2DDebug=!1}}})},,,,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(15),o={spriteId:"slime",spriteFrame:"slime_st0",animationComponent:"BattleSlimeAnimation",width:42,height:42,hitbox:[0,0,0,50,50,60,0,60],charSheet:{name:"Slime",properties:{blunt:1,slashing:1,piercing:1,fire:1,earth:1,water:1,air:1,light:1,dark:1,poison:1,life:1,death:1},status:{hp:10,maxHp:10},stats:{level:0,str:0,spd:0,sta:0,dex:0,int:0,cha:0,wis:0},skills:[n.SlimeStandardAttack]}};e.default=o}]);